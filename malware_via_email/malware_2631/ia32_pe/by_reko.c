// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040100E: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_23 = CreateFileA(4415242, 0x40000000, 0x06, null, 0x03, 0x0105, 0x00);
	if (eax_23 != ~0x00)
	{
		GetFileSize(dwLoc08, null);
		CloseHandle(eax_23);
		GetVersion();
		GetCurrentThreadId();
		CloseHandle(eax_23);
		GetCurrentProcessId();
		VirtualProtect(&globals->v40125D, eax_23, 60080, (DWORD *) 0x40);
		GetCommandLineW();
		GetCommandLineW();
		GetCurrentProcessId();
		GetCurrentProcessId();
		word32 esp_181;
		word32 ebp_182;
		byte SCZO_183;
		word32 eax_184;
		byte Z_185;
		byte SZO_186;
		byte C_187;
		bcuiposr0 None_188;
		struct Eq_72 * edx_189;
		ui32 esi_190;
		byte D_191;
		byte al_192;
		word32 ecx_193;
		byte dh_194;
		byte bl_195;
		word16 dx_196;
		(dwLoc1C - ~0x40401204)();
		GetOEMCP();
		*(ebp - 0x24) = (uint32) GetVersion();
		Eq_33 eax_206 = CloseHandle(*(ebp - 0x1C));
		byte al_207 = (byte) eax_206;
		edx_189->dw7B8412FD = edx_189->dw7B8412FD & esi_190;
		byte al_212;
		__das(al_207, &al_212);
		edx_189->dwB1C12FFD = edx_189->dwB1C12FFD & esi_190;
		if (edx_189->dwB1C12FFD != 0x00 && ecx_193 != 0x01)
		{
			byte al_230;
			__das(al_212, &al_230);
			edx_189->b0000 = edx_189->b0000 & bl_195;
			__outdw(dx_196, eax_206);
		}
		else
		{
			(eax_206 - (struct <anonymous> *) 0x14)->dw0000 = (eax_206 - (struct <anonymous> *) 0x14)->dw0000 + 3696836911;
			byte al_223;
			__das(al_212, &al_223);
			edx_189->b0000 = -edx_189->b0000;
		}
	}
	else
	{
		GetFileType(dwLoc18);
		Eq_3 eax_32 = GetModuleHandleA(dwLoc18);
		GetACP();
		Eq_117 eax_40 = GetProcAddress(eax_32, 4415223);
		GetFileSize(eax_32, null);
		GetFileSize(eax_23, null);
		GetCurrentThreadId();
		CreateFileA(0x00435EE7, 0x40000000, 0x02, null, 0x03, 0x00, 0x00);
		GetCurrentThreadId();
		GetCommandLineA();
		int32 eax_83 = eax_40();
		GetProcessHeap();
		<anonymous> * eax_100 = (eax_83 ^ 0xC0000005) + 0x00401117;
		word32 esp_102;
		word32 ebp_103;
		byte SCZO_104;
		Eq_2 eax_105;
		byte Z_106;
		byte SZO_107;
		byte C_108;
		bcuiposr0 None_109;
		word32 edx_110;
		word32 esi_111;
		byte D_112;
		byte al_113;
		word32 ecx_114;
		byte dh_115;
		byte bl_116;
		word16 dx_117;
		eax_100();
		return eax_105;
	}
}

