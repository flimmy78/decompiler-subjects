//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2018 Retargetable Decompiler <info@retdec.com>
//

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int32_t insert(int32_t * a1, int32_t * a2);
int32_t printout(int32_t * a1);

// ------------------------ Functions -------------------------

// Address range: 0x804845d - 0x80484c7
int32_t insert(int32_t * a1, int32_t * a2) {
    // 0x804845d
    if (*a1 == 0) {
        // 0x804846c
        *a1 = (int32_t)a2;
        // branch -> 0x80484c6
        // 0x80484c6
        return (int32_t)a1;
    }
    // 0x8048476
    int32_t result; // 0x80484c7_2
    if (*a2 < *(int32_t *)*a1) {
        // 0x8048486
        result = insert((int32_t *)(*a1 + 8), a2);
        // branch -> 0x80484c6
    } else {
        int32_t v1 = *(int32_t *)*a1; // 0x80484a9
        if (*a2 > v1) {
            // 0x80484af
            result = insert((int32_t *)(*a1 + 4), a2);
            // branch -> 0x80484c6
        } else {
            result = v1;
        }
    }
    // 0x80484c6
    return result;
}

// Address range: 0x80484c8 - 0x8048514
int32_t printout(int32_t * a1) {
    int32_t v1 = (int32_t)a1;
    int32_t * v2 = (int32_t *)(v1 + 8); // 0x80484d1_0
    if (*v2 != 0) {
        // 0x80484d8
        printout((int32_t *)*v2);
        // branch -> 0x80484e6
    }
    // 0x80484e6
    printf("%d\n", *a1);
    int32_t * v3 = (int32_t *)(v1 + 4); // 0x80484fe_0
    if (*v3 != 0) {
        // 0x8048505
        printout((int32_t *)*v3);
        // branch -> 0x8048513
    }
    // 0x8048513
    return 0;
}

// Address range: 0x8048515 - 0x804859f
int main(int argc, char ** argv) {
    int32_t v1 = 0; // bp-28
    // branch -> 0x8048530
    for (int32_t i = 1; i < 11; i++) {
        char * mem = malloc(12); // 0x8048537
        int32_t v2 = (int32_t)mem; // 0x8048537_3
        int32_t * v3 = (int32_t *)(v2 + 4); // 0x8048544_0
        *v3 = 0;
        *(int32_t *)(v2 + 8) = *v3;
        *(int32_t *)mem = rand();
        insert(&v1, (int32_t *)mem);
        // continue -> 0x8048530
    }
    // 0x8048584
    printout((int32_t *)v1);
    return 0;
}

// --------------- Dynamically Linked Functions ---------------

// void * malloc(size_t size);
// int printf(const char * restrict format, ...);
// int rand(void);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.8.1)
// Detected functions: 3
// Decompiler release: VERSION
// Decompilation date: DATE
