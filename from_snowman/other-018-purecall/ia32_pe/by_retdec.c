//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2018 Retargetable Decompiler <info@retdec.com>
//

#include <stdint.h>
#include <stdlib.h>
#include <windows.h>

// ------------------------ Structures ------------------------

struct _EXCEPTION_POINTERS {
    struct _EXCEPTION_RECORD * e0;
    struct _CONTEXT * e1;
};

struct _EXCEPTION_RECORD {
    int32_t e0;
    int32_t e1;
    struct _EXCEPTION_RECORD * e2;
    char * e3;
    int32_t e4;
    int32_t e5[1];
};

struct _M128A {
    int64_t e0;
    int64_t e1;
};

struct _CONTEXT {
    int64_t e0;
    int64_t e1;
    int64_t e2;
    int64_t e3;
    int64_t e4;
    int64_t e5;
    int32_t e6;
    int32_t e7;
    int16_t e8;
    int16_t e9;
    int16_t e10;
    int16_t e11;
    int16_t e12;
    int16_t e13;
    int32_t e14;
    int64_t e15;
    int64_t e16;
    int64_t e17;
    int64_t e18;
    int64_t e19;
    int64_t e20;
    int64_t e21;
    int64_t e22;
    int64_t e23;
    int64_t e24;
    int64_t e25;
    int64_t e26;
    int64_t e27;
    int64_t e28;
    int64_t e29;
    int64_t e30;
    int64_t e31;
    int64_t e32;
    int64_t e33;
    int64_t e34;
    int64_t e35;
    int64_t e36;
    int64_t e37;
    int32_t e38;
    struct _M128A e39[26];
    int64_t e40;
    int64_t e41;
    int64_t e42;
    int64_t e43;
    int64_t e44;
    int64_t e45;
};

// ------------------------- Classes --------------------------

// AAAAA
// BBBBB (base classes: AAAAA)
// type_info

// ------------------- Function Prototypes --------------------

void entry_point(void);
int32_t function_401000(int32_t a1);
int32_t function_4010df(int32_t a1);
int32_t function_4010e4(void);
int32_t function_4010f7(int32_t a1, int32_t a2, int32_t a3);
int32_t function_401312(int32_t a1);
int32_t (**function_4014f1(void))(struct _EXCEPTION_POINTERS *);
void function_401500(void);
int32_t function_401610(void);
void function_401665(void);
void function_4016b4(void);
int32_t function_40177d(int32_t (***a1)());
int32_t function_40180e(void);
int32_t function_40185d(int32_t a1);
int32_t function_401867(void);
void function_40186a(void);
int32_t (**function_40190b(void (****a1)()))();
int32_t function_40193a(void);
int32_t function_401a52(void);
int32_t unknown_406230(void);

// --------------------- Global Variables ---------------------

int32_t g1 = 0; // eax
void (**g2)() = (void (**)())-0x47a90075; // 0x4015ea
char * g3 = "\x33\xc0\xc3\x33\xc0\xc3\xff\x25\xe8\x61\x40"; // 0x401864
int32_t g4 = -2; // 0x405050
int32_t g5 = 1; // 0x405054
int32_t g6 = 0; // 0x405170
char *** g7 = NULL; // 0x405174
char *** g8 = NULL; // 0x405178
int32_t g9 = 0; // 0x40517c
int32_t g10 = 0; // 0x405180
int32_t g11 = 0; // 0x405184
int32_t g12 = 0; // 0x405190
int32_t g13 = 0; // 0x405194
int32_t g14 = 0; // 0x405198
int32_t g15 = 0; // 0x40519c
int32_t g16 = 0; // 0x4054d8
int32_t g17 = 0; // 0x4054e8

// ------------------------ Functions -------------------------

// Address range: 0x401000 - 0x401092
int32_t function_401000(int32_t a1) {
    // 0x401000
    return 0;
}

// Address range: 0x4010df - 0x4010e3
int32_t function_4010df(int32_t a1) {
    // 0x4010df
    return 0;
}

// Address range: 0x4010e4 - 0x4010f6
// From class:    AAAAA
// Type:          virtual member function
int32_t function_4010e4(void) {
    // 0x4010e4
    _purecall();
    return g1;
}

// Address range: 0x4010f7 - 0x401141
int32_t function_4010f7(int32_t a1, int32_t a2, int32_t a3) {
    // 0x4010f7
    atexit((void (**)())&g2);
    g11 = g13;
    int32_t result = __getmainargs(&g6, (char ***)&g8, (char ***)&g7, g12, &g11); // 0x401127
    g10 = result;
    if (result <= 0) {
        // 0x401139
        _amsg_exit(8);
        // branch -> 0x401141
    }
    // 0x401141
    return result;
}

// Address range: 0x401312 - 0x4013cb
int32_t function_401312(int32_t a1) {
    // 0x401312
    int32_t v1; // 0x401369_4
    if (*(int16_t *)0x400000 == 0x5a4d) {
        int32_t v2 = *(int32_t *)0x40003c; // 0x401324
        if (*(int32_t *)(v2 + 0x400000) == 0x4550) {
            // 0x401335
            if (*(int16_t *)(v2 + 0x400018) == 267) {
                // 0x401343
                int32_t v3;
                if (*(int32_t *)(v2 + 0x400074) >= 15) {
                    // 0x40134c
                    v3 = *(int32_t *)(v2 + 0x4000e8) != 0;
                    // branch -> 0x401359
                } else {
                    v3 = 0;
                }
                // 0x401359
                g9 = v3;
                __set_app_type(1);
                v1 = (int32_t)EncodePointer((char *)-1);
                g16 = v1;
                g17 = v1;
                *(int32_t *)0x6360 = g15;
                *(int32_t *)0x6354 = g14;
                _RTC_Initialize();
                function_401867();
                if (g5 == 0) {
                    // 0x4013a6
                    __setusermatherr((int32_t)&g3);
                    // branch -> 0x4013b2
                }
                // 0x4013b2
                __setdefaultprecision();
                if (g4 == -1) {
                    // 0x4013c0
                    _configthreadlocale(-1);
                    // branch -> 0x4013c9
                }
                // 0x4013c9
                return 0;
            }
        }
    }
    // 0x401359
    g9 = 0;
    __set_app_type(1);
    v1 = (int32_t)EncodePointer((char *)-1);
    g16 = v1;
    g17 = v1;
    *(int32_t *)0x6360 = g15;
    *(int32_t *)0x6354 = g14;
    _RTC_Initialize();
    function_401867();
    if (g5 == 0) {
        // 0x4013a6
        __setusermatherr((int32_t)&g3);
        // branch -> 0x4013b2
    }
    // 0x4013b2
    __setdefaultprecision();
    if (g4 == -1) {
        // 0x4013c0
        _configthreadlocale(-1);
        // branch -> 0x4013c9
    }
    // 0x4013c9
    return 0;
}

// Address range: 0x4013cc - 0x4013db
void entry_point(void) {
    // 0x4013cc
    __security_init_cookie();
    _qm__qm__qm_();
}

// Address range: 0x4014f1 - 0x4014ff
int32_t (**function_4014f1(void))(struct _EXCEPTION_POINTERS *) {
    // 0x4014f1
    SetUnhandledExceptionFilter((int32_t (**)(struct _EXCEPTION_POINTERS *))0x4014af);
    return NULL;
}

// Address range: 0x401500 - 0x40150b
void function_401500(void) {
    // 0x401500
    unknown_406230();
}

// Address range: 0x401610 - 0x40162f
int32_t function_401610(void) {
    // 0x401610
    _cexit();
    return g1;
}

// Address range: 0x401665 - 0x40166f
void function_401665(void) {
    // 0x401665
    return;
}

// Address range: 0x4016b4 - 0x4016bf
void function_4016b4(void) {
    // 0x4016b4
    return;
}

// Address range: 0x40177d - 0x40178f
int32_t function_40177d(int32_t (***a1)()) {
    // 0x40177d
    return _initterm_e(NULL, a1);
}

// Address range: 0x40180e - 0x401813
int32_t function_40180e(void) {
    // 0x40180e
    return _configthreadlocale(0);
}

// Address range: 0x40185d - 0x401866
int32_t function_40185d(int32_t a1) {
    // 0x40185d
    int32_t v1;
    __setusermatherr(v1);
    return g1;
}

// Address range: 0x401867 - 0x401869
int32_t function_401867(void) {
    // 0x401867
    return 0;
}

// Address range: 0x40186a - 0x40186f
void function_40186a(void) {
    // 0x40186a
    __set_app_type(0);
}

// Address range: 0x40190b - 0x401939
int32_t (**function_40190b(void (****a1)()))() {
    // 0x40190b
    _qm_terminate__YAXXZ((int32_t)a1);
    return (int32_t (**)())g1;
}

// Address range: 0x40193a - 0x40194b
int32_t function_40193a(void) {
    // 0x40193a
    return _except_handler4_common();
}

// Address range: 0x401a52 - 0x402d3d
int32_t function_401a52(void) {
    // 0x401a52
    _crt_debugger_hook();
    return g1;
}

// --------------- Statically Linked Functions ----------------

// void __cdecl __security_init_cookie(void);
// void __setdefaultprecision(void);
// void _qm__qm__qm_(void);
// void __cdecl _RTC_Initialize(void);
// int atexit(void(* func)(void));

// --------------- Dynamically Linked Functions ---------------

// int __getmainargs(int * Argc, char *** Argv, char *** Env, int DoWildCard, _startupinfo * StartInfo);
// void __set_app_type(int at);
// void __setusermatherr(_HANDLE_MATH_ERROR pf);
// void _amsg_exit(int rterrnum);
// void __cdecl _cexit(void);
// int __cdecl _configthreadlocale(_In_ int Flag);
// void _crt_debugger_hook(void);
// int _except_handler4_common(void);
// int __cdecl _initterm_e(_PIFV * First, _In_ _PIFV * Last);
// void _purecall(void);
// void _qm_terminate__YAXXZ(int32_t a1);
// PVOID EncodePointer(_In_opt_ PVOID Ptr);
// LPTOP_LEVEL_EXCEPTION_FILTER SetUnhandledExceptionFilter(_In_opt_ LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: microsoft linker (10.0)
// Detected functions: 19
// Decompiler release: VERSION
// Decompilation date: DATE
