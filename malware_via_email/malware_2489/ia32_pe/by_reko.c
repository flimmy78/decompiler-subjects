// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0041196D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
	{
		real64 rArg0_53;
		eax_12 = fn004119A7(GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 252, fp - 0x08), ds, rArg0, rArg5, out rArg0_53);
	}
	return eax_12;
}

// 004119A7: Register (ptr Eq_39) fn004119A7(Register Eq_16 ebx, Register (ptr Eq_17) ds, FpuStack real64 rArg0, FpuStack real64 rArg5, FpuStack out Eq_20 rArg0Out)
Eq_39 * fn004119A7(UINT ebx, Eq_17 * ds, real64 rArg0, real64 rArg5, Eq_20 & rArg0Out)
{
	Eq_40 eax_10 = VirtualAlloc(0x00, 0x00014813, 0x3000, 0x40);
	word32 ecx_103 = 0x01F6;
	union Eq_54 * esi_23 = (union Eq_54 *) 166;
	Eq_40 edi_25 = eax_10;
	uint32 edx_30 = DPB(0xA7E0DA0C, bl + 0x0C, 0);
	word32 ebp_43 = 0x00;
	do
	{
		*edi_25 = (word32) *edi_25 + (byte) ((char *) (*esi_23) + edx_30);
		word32 ebp_77 = ebp_43 - 460344;
		uint32 edx_582 = edx_30 >> 0x08;
		esi_23 = (union Eq_54 *) ((char *) esi_23 + 0x01);
		edi_25 = edi_25 + 0x01;
		ebp_43 = ebp_77 + 0x00070639;
		byte dl_584 = (byte) edx_582;
		if (0x04 == ebp_77 + 0x00070639)
		{
			edx_582 = 0xA7E0DA0C;
			dl_584 = 0x0C;
			ebp_43 = 0x00;
		}
		edx_30 = DPB(edx_582, dl_584 + bl, 0);
		ecx_103 = ecx_596 - 0x01;
		word32 ecx_596 = ecx_103;
	} while (ecx_596 != 0x01);
	ptr32 esp_120;
	struct Eq_39 * eax_121;
	struct Eq_106 * edi_122;
	byte SCZO_123;
	struct Eq_108 * esi_124;
	struct Eq_39 * ecx_125;
	struct Eq_110 * edx_126;
	byte dl_127;
	word32 ebp_129;
	byte cl_130;
	byte SZO_131;
	byte Z_132;
	byte C_133;
	byte ah_134;
	byte FPUF_135;
	byte bh_136;
	byte dh_137;
	byte D_138;
	byte ch_139;
	byte al_141;
	Eq_124 gs_142;
	word16 si_143;
	struct Eq_126 * ss_144;
	word16 dx_145;
	byte CZP_147;
	struct Eq_129 * ds_148;
	byte SCZDOP_149;
	byte O_150;
	byte SO_152;
	bool P_146;
	byte bl_128;
	word16 bx_151;
	struct Eq_136 * ebx_140;
	eax_10();
	if (ecx_125 == eax_121)
		return eax_121;
	edi_122->b0000 = esi_124->b0000;
	cu8 dh_206 = dh_137 + edx_126->b27799F2C;
	*(esi_124 - 0x07) = *(esi_124 - 0x07) - bl_128 - (dh_206 < 0x00);
	ui8 ch_215 = ch_139 ^ ((edi_122->a0001))[ebx_140].b0000;
	byte * ecx_216 = DPB(ecx_125, ch_215, 8);
	word32 ecx_218 = DPB(ecx_216, cl_130 | *ecx_216, 0);
	edi_122->bF329B773 = edi_122->bF329B773 | ch_215;
	struct Eq_185 * edx_207 = DPB(edx_126, dh_206, 8);
	edx_207->t0000.u3 = gs_142;
	*(esp_120 - 0x04) = esp_120;
	Eq_195 al_203 = (byte) ebp_129;
	struct Eq_39 * ebp_204 = eax_121;
	word16 dx_208 = DPB(dx_145, dh_206, 8);
	byte ** edi_231 = &edi_122->a0001->b0000 + 0x01;
	ptr32 esp_234 = esp_120 - 0x04;
	byte * eax_237 = DPB(ebp_129, esi_124->b0001, 0);
	struct Eq_210 * esi_241 = DPB(&esi_124->b0001 + 0x01, ss_144, 0);
	Eq_214 edi_332;
	struct Eq_210 * eax_321;
	Eq_216 SCZDOP_329;
	Eq_216 C_327;
	ci8 al_320;
	union Eq_219 * esp_305;
	struct Eq_220 * ecx_250;
	byte cl_247;
	byte * eax_260;
	byte al_257;
	byte ah_256;
	if (al_203 >= ((edi_122->a0001))[0x00].b0000)
	{
		__outdw(dx_208, DPB(eax_237, 0xE0, 8));
		eax_121->dw97EB3155 = eax_121->dw97EB3155 - 113;
		ebx_140->dw4E346030 = ebx_140->dw4E346030 & 117;
		eax_260 = (byte *) esi_241[0x04];
		ah_256 = SLICE(eax_260, byte, 8);
		al_257 = (byte) eax_260;
		esi_241 = esi_241 + 0x08;
		ecx_250 = ecx_218 - 0x01;
		cl_247 = (byte) (ecx_218 - 0x01);
		if (ebx_140->dw4E346030 != 0x00 && ecx_218 != 0x01)
			goto l00411BB7;
		*(esp_120 - 0x08) = (struct Eq_185 **) edx_207;
		eax_237 = DPB(eax_260, al_257 & 0x5D, 0);
		esp_234 = esp_120 - 0x08;
		if (*(eax_121 - 0x20) != ~0x46)
			esi_241 = ebx_140->ptrF85DE09B;
		*eax_237 = *eax_237 + 4219829683;
		ecx_218 = DPB(ecx_218 - 0x01, 0x70, 8);
	}
	else
	{
		bl_128 = 0x7D;
		ebx_140 = DPB(ebx_140, 0x7D, 0);
		bx_151 = DPB(bx_151, 0x7D, 0);
	}
	do
	{
		eax_237 = eax_237 - 0x01;
		__outb(dx_208, (byte) eax_237);
		esi_241 = esi_241 + 0x01;
	} while (P_146);
	byte ** esp_476 = esp_234 - 0x04;
	*esp_476 = (byte **) eax_237;
	byte * esp_478 = *esp_476;
	*esp_478 = (byte) (struct Eq_356 *) 2069701674;
	struct Eq_356 * esp_485 = *esp_478;
	(ui32 *) 0x6934828A = (ui32 *) 0x6934828A & 0x33;
	esp_485->ptr0004 = ds_148;
	edi_332 = *(ebx_140 - 0x10) *s 0x28;
	ecx_250 = ecx_218 - 0x01;
	Eq_216 SCZO_507 = cond(edi_332);
	P_146 = cond(rArg0 - rArg5);
	esp_305 = (union Eq_219 *) &esp_485->ptr0004;
	cl_247 = (byte) ecx_250;
	eax_321 = esi_241;
	al_320 = (byte) esi_241;
	esi_241 = (struct Eq_210 *) (eax_237 + -1490356131);
	ebp_204 = ecx_250->dw0000 *s ~0x0C;
	C_327 = SCZO_507;
	SCZDOP_329 = SCZO_507;
l00411B9A:
	struct Eq_210 ***** esp_364 = esp_305 - 0x04;
	*esp_364 = (struct Eq_210 *****) eax_321;
	*(esp_364 - (struct Eq_210 *****) 0x04) = (union Eq_216 *) SCZDOP_329;
	edi_231 = edi_332 + Mem367[esi_241 + 0x00:word32] + C_327 & esp_364 - 0x04;
	__outb(0x23, al_320);
	int64 edx_eax_372 = ecx_250->dw0000 *s eax_321;
	struct Eq_210 * esp_370 = *(esp_364 - (struct Eq_210 *****) 0x04);
	byte * eax_373 = (word32) edx_eax_372;
	Mem381[eax_373 - 0x03 + 0x00:byte] = Mem367[eax_373 - 0x03 + 0x00:byte] & cl_247;
	esp_234 = esp_370 + 0x04;
	edx_207 = SLICE(edx_eax_372, word32, 32);
	dx_208 = SLICE(edx_eax_372, word16, 32);
	if (OVERFLOW(*(eax_373 - (byte *) 0x03)))
		;
	eax_260 = eax_373 & 2939252024;
	ah_256 = SLICE(eax_373 & 2939252024, byte, 8);
	al_257 = (byte) (eax_373 & 2939252024);
	if (P_146)
	{
		esp_370->t0000 = eax_373 & 2939252024;
		*(esp_370 - 0x04) = (union Eq_408 *) false;
		*(esp_370 - 0x08) = 0x29;
		word32 esp_417;
		word32 eax_418;
		word32 edi_419;
		byte SCZO_420;
		word32 esi_421;
		word32 ecx_422;
		word32 edx_423;
		byte dl_424;
		byte bl_425;
		word32 ebp_426;
		byte cl_427;
		byte SZO_428;
		byte Z_429;
		byte C_430;
		byte ah_431;
		byte FPUF_432;
		byte bh_433;
		byte dh_434;
		byte D_435;
		byte ch_436;
		word32 ebx_437;
		byte al_438;
		struct Eq_442 * gs_439;
		word16 si_440;
		struct Eq_444 * ss_441;
		word16 dx_442;
		byte P_443;
		byte CZP_444;
		struct Eq_448 * ds_445;
		byte SCZDOP_446;
		byte O_447;
		word16 bx_448;
		byte SO_449;
		fnC041EC45();
		return eax_418;
	}
l00411BB7:
	byte v49_264 = *eax_260 - ah_256;
	*eax_260 = v49_264;
	__outb(dx_208, al_257);
	struct Eq_288 * esi_268 = esi_241 + 0x01;
	Mem271[esi_268 + 627751054 + edx_207:word32] = __rcr(Mem265[esi_268 + 627751054 + edx_207:word32], cl_247, cond(v49_264));
	struct Eq_306 * edi_281 = (char *) edi_231 + 0x04;
	if (P_146)
	{
		*eax_260 = __rol(*eax_260, 0x01);
		*eax_260 = __rol(*eax_260, ~0x32);
	}
	*eax_260 = *eax_260 - ah_256 - (eax_260 < *edi_231);
	__outb(dx_208, al_257);
	int32 v52_285 = ebx_140->dw0000 >> cl_247;
	ebx_140->dw0000 = v52_285;
	byte * eax_290 = DPB(eax_260, __inb(0x5E), 0);
	edi_281->tAD16E82B = __rcr(edi_281->tAD16E82B, cl_247, cond(v52_285));
	bl_128 = bl_128 + ecx_250->b0009 + ((edi_281->tAD16E82B & 0x01 << cl_247) != 0x00);
	__sti();
	ebp_204 = &ebp_204->dw97EB3155 + 0x1A0533AB;
	esp_305 = esp_234 - 0x04;
	*esp_305 = (union Eq_219 *) cond(ebp_204);
	ebx_140 = DPB(ebx_140, bl_128, 0);
	esi_268[0x05] = (struct Eq_288) (esi_268[0x05] ^ ebx_140);
	bx_151 = DPB(bx_151, bl_128, 0);
	__arpl(esi_268[0x05], bx_151, &esi_268[0x05]);
	Eq_541 eax_315 = esi_268[0x05];
	al_320 = (byte) eax_315 + 0x5C + ((byte) (eax_290 + -215399529) < edi_281->b0004);
	edi_281->b0005 = __in(dx_208);
	Eq_216 SCZO_323 = cond(al_320);
	esi_241 = esi_268 + 0x09;
	eax_321 = (struct Eq_210 *) DPB(eax_315, al_320, 0);
	C_327 = SCZO_323;
	SCZDOP_329 = SCZO_323;
	edi_332 = &edi_281->b0005 + 0x01;
	if (al_320 >= 0x00)
		__hlt();
	goto l00411B9A;
}

