// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401005: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	GetCurrentProcessId();
	GetCurrentProcessId();
	SizeofResource(0x00, dwLoc0C);
	Eq_2 eax_19 = GetModuleHandleA(0x00);
	GetCurrentThreadId();
	GetFileType(eax_19);
	Eq_2 eax_45 = CreateFileA(4415429, 0x20000000, 0x06, null, 0x03, 0x01A0, 0x00);
	Eq_11 eax_47 = GetProcAddress(4415429, 0x20000000);
	SizeofResource(0x00, eax_47);
	GetOEMCP();
	CloseHandle(eax_45);
	ptr32 esp_64 = fp - 0x78;
	do
	{
		LPDWORD * esp_67 = esp_64 - 0x04;
		*esp_67 = (LPDWORD *) null;
		*(esp_67 - 0x04) = (union Eq_2 *) eax_19;
		GetFileSize(*(esp_67 - 0x04), *esp_67);
		int32 eax_76 = eax_47();
		*(esp_67 - 0x08) = 0x00;
		*(esp_67 - 0x0C) = 0x0183;
		*(esp_67 - 0x10) = 0x03;
		*(esp_67 - 0x14) = 0x00;
		*(esp_67 - 0x18) = 0x02;
		*(esp_67 - 0x1C) = 0xE0000000;
		*(esp_67 - 0x20) = 4415399;
		esp_64 = esp_67 - 0x20;
	} while (CreateFileA(*(esp_67 - 0x20), *(esp_67 - 0x1C), *(esp_67 - 0x18), *(esp_67 - 0x14), *(esp_67 - 0x10), *(esp_67 - 0x0C), *(esp_67 - 0x08)) != ~0x00);
	GetProcessHeap();
	<anonymous> * eax_102 = (eax_76 ^ 0xC0000005) + 0x00401116;
	word32 esp_104;
	word32 ebp_105;
	byte SCZO_106;
	Eq_2 eax_107;
	byte Z_108;
	byte SZO_109;
	byte C_110;
	eax_102();
	return eax_107;
}

