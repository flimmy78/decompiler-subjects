// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00001000: void fn00001000(Register word32 d2, Register int32 d3, Register int32 d4)
void fn00001000(word32 d2, int32 d3, int32 d4)
{
	ptr32 a0_15 = 4340 + globals->dw10E8;
	uint32 d0_154 = *(a0_15 - 0x04);
	union Eq_18 * a2_16 = 0x00050000 + globals->dw10EC;
	word32 * a0_149 = a0_15 - 0x04;
	ui32 d5_145 = globals->dw10F0 ^ d0_154;
	do
	{
		uint32 d0_328 = d0_154 >> 0x01;
		bool C_333 = cond(d0_328);
		if (d0_328 == 0x00)
			C_333 = fn000010C2(d5_145, a0_149, out d0_328, out d5_145, out a0_149);
		uint32 d0_148;
		int32 d1_236;
		int32 d1_146;
		if (!C_333)
		{
			d0_148 = d0_328 >> 0x01;
			d1_236 = 0x08;
			d3 = 0x01;
			bool C_257 = cond(d0_148);
			if (d0_148 == 0x00)
				C_257 = fn000010C2(d5_145, a0_149, out d0_148, out d5_145, out a0_149);
			if (C_257)
				goto l0000108C;
			d1_146 = 0x03;
			d4 = DPB(d4, 0x00, 0);
			goto l00001036;
		}
		word32 d1_294;
		d0_148 = fn000010CE(d0_328, 0x02, d2, d5_145, a0_149, out d1_294, out d2, out d5_145, out a0_149);
		if ((byte) d2 >= 0x02)
		{
			if ((byte) d2 != 0x03)
			{
				word32 d1_307;
				d0_148 = fn000010CE(d0_148, 0x08, d2, d5_145, a0_149, out d1_307, out d2, out d5_145, out a0_149);
				d3 = DPB(d3, (word16) d2, 0);
				d1_236 = DPB(d1_307, 0x0C, 0);
				goto l0000108C;
			}
			d1_146 = 0x08;
			d4 = 0x08;
l00001036:
			word32 d1_150;
			d0_154 = fn000010CE(d0_148, d1_146, d2, d5_145, a0_149, out d1_150, out d2, out d5_145, out a0_149);
			d3 = DPB(d3, (word16) d2 + (word16) d4, 0);
			do
			{
				int32 d1_176 = 0x07;
				do
				{
					d0_154 = d0_154 >> 0x01;
					bool X_192 = cond(d0_154);
					if (d0_154 == 0x00)
						X_192 = fn000010C2(d5_145, a0_149, out d0_154, out d5_145, out a0_149);
					d2 = __rcl(d2, 0x01, X_192);
					d1_176 = d1_176 - 0x01;
				} while (d1_176 != ~0x00);
				a2_16 = a2_16 - (union Eq_197 *) 0x01;
				*a2_16 = (union Eq_18 *) (byte) d2;
				d3 = d3 - 0x01;
			} while (d3 != ~0x00);
		}
		else
		{
			word16 v30_322 = (word16) d2 + 0x02;
			d1_236 = DPB(d1_294, (word16) d2 + 0x09, 0);
			d2 = DPB(d2, v30_322, 0);
			d3 = DPB(d3, v30_322, 0);
l0000108C:
			word32 d1_240;
			d0_154 = fn000010CE(d0_148, d1_236, d2, d5_145, a0_149, out d1_240, out d2, out d5_145, out a0_149);
			do
			{
				a2_16 = a2_16 - 0x01;
				*a2_16 = *((char *) a2_16 + (int32) ((int16) d2));
				d3 = d3 - 0x01;
			} while (d3 != ~0x00);
		}
		*(word32 **) 0x00DFF180 = a0_149;
	} while ((union Eq_155 *) 0x00050000 - a2_16 < 0x00);
	if (d5_145 != 0x00)
	{
		uint32 d0_124 = DPB(d0_154, ~0x00, 0);
		do
		{
			*(word16 *) 0x00DFF180 = (word16) d0_124;
			d0_124 = d0_124 - 0x01;
		} while (d0_124 != ~0x00);
	}
	else
	{
		word32 a7_103;
		word32 a0_104;
		word32 a1_105;
		word32 d0_106;
		byte CVZN_107;
		word32 d1_108;
		word32 d5_109;
		word32 a2_110;
		byte ZN_111;
		byte C_112;
		byte V_113;
		byte CVZNX_114;
		byte Z_115;
		word32 d3_116;
		word32 d2_117;
		byte CZ_118;
		word32 d4_119;
		byte N_120;
		byte X_121;
		byte CZNX_122;
		byte CX_123;
		fn00050000();
	}
}

// 000010C2: FlagGroup byte fn000010C2(Register ui32 d5, Register (ptr word32) a0, Register out Eq_41 d0Out, Register out Eq_42 d5Out, Register out ptr32 a0Out)
byte fn000010C2(ui32 d5, word32 * a0, Eq_41 & d0Out, Eq_42 & d5Out, ptr32 & a0Out)
{
	word32 d0_5 = *(a0 - 0x04);
	uint32 d0_10 = __rcr(d0_5, 0x01, X);
	*d0Out = d0_10;
	word32 a0_3;
	*a0Out = a0 - 0x04;
	word32 d5_7;
	*d5Out = d5 ^ d0_5;
	return cond(d0_10);
}

// 000010CE: Register uint32 fn000010CE(Register uint32 d0, Register int32 d1, Register word32 d2, Register ui32 d5, Register (ptr word32) a0, Register out ptr32 d1Out, Register out ptr32 d2Out, Register out Eq_59 d5Out, Register out ptr32 a0Out)
uint32 fn000010CE(uint32 d0, int32 d1, word32 d2, ui32 d5, word32 * a0, ptr32 & d1Out, ptr32 & d2Out, Eq_59 & d5Out, ptr32 & a0Out)
{
	*a0Out = a0;
	*d5Out = d5;
	word32 d1_21 = DPB(d1, (word16) d1 - 0x01, 0);
	word32 d2_20 = DPB(d2, 0x00, 0);
	do
	{
		d0 = d0 >> 0x01;
		bool CVZNX_23 = cond(d0);
		bool X_28 = CVZNX_23;
		if (d0 == 0x00)
		{
			a0 = a0 - 0x04;
			*a0Out = a0;
			word32 d0_53 = *a0;
			d0 = __rcr(d0_53, 0x01, CVZNX_23);
			*d5Out = d5 ^ d0_53;
			X_28 = cond(d0);
		}
		d2_20 = __rcl(d2_20, 0x01, X_28);
		*d2Out = d2_20;
		d1_21 = d1_21 - 0x01;
		*d1Out = d1_21;
	} while (d1_21 != ~0x00);
	return d0;
}

