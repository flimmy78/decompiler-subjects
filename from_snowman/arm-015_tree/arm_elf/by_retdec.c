//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2018 Retargetable Decompiler <info@retdec.com>
//

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int32_t insert(int32_t * a1, int32_t * a2);
int32_t printout(int32_t * a1);

// --------------------- Global Variables ---------------------

int32_t g1 = 0; // R11

// ------------------------ Functions -------------------------

// Address range: 0x8458 - 0x84ff
int32_t insert(int32_t * a1, int32_t * a2) {
    int32_t result = (int32_t)a1;
    int32_t v1 = g1; // 0x8458
    int32_t v2 = 0; // bp-4
    g1 = &v2;
    int32_t v3 = *a1; // 0x8470
    if (v3 == 0) {
        // 0x847c
        *a1 = (int32_t)a2;
        // branch -> 0x84f8
        // 0x84f8
        g1 = v1;
        return result;
    }
    int32_t v4 = *a2; // 0x8490
    int32_t v5 = *(int32_t *)v3; // 0x849c
    int32_t result2; // 0x84fc_2
    if (v4 < v5) {
        // 0x84a8
        result2 = insert((int32_t *)(v3 + 8), a2);
        // branch -> 0x84f8
    } else {
        // 0x84c4
        if (v4 > v5) {
            // 0x84e0
            result2 = insert((int32_t *)(v3 + 4), a2);
            // branch -> 0x84f8
        } else {
            result2 = result;
        }
    }
    // 0x84f8
    g1 = v1;
    return result2;
}

// Address range: 0x8500 - 0x856f
int32_t printout(int32_t * a1) {
    int32_t v1 = (int32_t)a1;
    int32_t v2 = g1; // 0x8500
    int32_t v3 = 0; // bp-4
    g1 = &v3;
    int32_t v4 = *(int32_t *)(v1 + 8); // 0x8514
    if (v4 != 0) {
        // 0x8520
        printout((int32_t *)v4);
        // branch -> 0x8530
    }
    int32_t chars_printed = printf((char *)((int32_t)"%d\n" & 0xffff));
    int32_t v5 = *(int32_t *)(v1 + 4); // 0x854c
    int32_t result; // 0x856c_2
    if (v5 != 0) {
        // 0x8558
        result = printout((int32_t *)v5);
        // branch -> 0x8568
    } else {
        result = chars_printed;
    }
    // 0x8568
    g1 = v2;
    return result;
}

// Address range: 0x8570 - 0x860f
int main(int argc, char ** argv) {
    int32_t v1 = 0; // bp-4
    g1 = &v1;
    int32_t v2 = 0; // bp-20
    // branch -> 0x8590
    for (int32_t i = 1; i < 11; i++) {
        char * mem = malloc(12); // 0x8594
        int32_t v3 = (int32_t)mem; // 0x8594_3
        *(int32_t *)(v3 + 4) = 0;
        *(int32_t *)(v3 + 8) = 0;
        *(int32_t *)mem = rand();
        insert(&v2, (int32_t *)mem);
        // continue -> 0x8590
    }
    // 0x85f4
    printout((int32_t *)v2);
    return 0;
}

// --------------- Dynamically Linked Functions ---------------

// void * malloc(size_t size);
// int printf(const char * restrict format, ...);
// int rand(void);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.9.1)
// Detected functions: 3
// Decompiler release: VERSION
// Decompilation date: DATE
