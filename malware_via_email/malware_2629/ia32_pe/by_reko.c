// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401026: Register word32 fn00401026(Register byte al, Register word32 ebx)
word32 fn00401026(byte al, word32 ebx)
{
l00401026:
	ptr32 esp_5;
	byte D_6;
	byte CZ_7;
	bu8 al_8;
	word16 ax_9;
	ptr32 ebx_10;
	byte SCZO_11;
	word32 eax_12;
	fn00400FEF();
	return eax_12;
}

// 00411079: Register Eq_29 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	GetCurrentThreadId();
	Eq_33 eax_11 = GetModuleHandleA(&globals->t435624);
	GetCurrentProcessId();
	Eq_42 eax_19 = GetProcAddress(eax_11, &globals->t43562E);
	GetCurrentProcessId();
	GetProcessHeap();
	SizeofResource(0x00, eax_11);
	GetCommandLineA();
	Eq_63 eax_38 = eax_19();
	<anonymous> * eax_46 = (eax_38 ^ 0xC0000005) + 0x004110F5;
	ptr32 esp_48;
	word32 ebp_49;
	byte SCZO_50;
	word32 eax_51;
	byte SZO_52;
	byte C_53;
	byte al_54;
	word32 ebx_55;
	eax_46();
	*(esp_48 - 0x04) = (FARPROC *) eax_19;
	*(esp_48 - 0x08) = 0x00;
	SizeofResource(*(esp_48 - 0x08), *(esp_48 - 0x04));
	*(esp_48 - 0x0C) = (FARPROC *) eax_19;
	GetFileType(*(esp_48 - 0x0C));
	*(esp_48 - 0x10) = fp - 0x10;
	*(esp_48 - 0x14) = 0x40;
	*(esp_48 - 0x18) = 0xFDA7;
	GetVersion();
	*(esp_48 - 0x1C) = 0x00401000;
	VirtualProtect(*(esp_48 - 0x1C), *(esp_48 - 0x18), *(esp_48 - 0x14), *(esp_48 - 0x10));
	*(esp_48 - 0x20) = (union Eq_63 *) eax_38;
	GetCurrentProcessId();
	*(esp_48 - 0x24) = 0xFDA7;
	GetACP();
	*(esp_48 - 0x28) = 0x00401000;
	GetCommandLineA();
	word32 esp_93;
	word32 ebp_94;
	byte SCZO_95;
	word32 eax_96;
	byte SZO_97;
	byte C_98;
	byte al_99;
	word32 ebx_100;
	(eax_38 - ~0x40411182)();
	GetCommandLineA();
	return fn00401026((byte) GetACP(), ebx_100);
}

