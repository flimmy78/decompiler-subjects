// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040104E: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	GetCurrentThreadId();
	GetCurrentThreadId();
	Eq_8 eax_11 = GetModuleHandleA(4397274);
	GetTickCount();
	GetCommandLineA();
	ptr32 esp_100 = fp - 0x4C;
	Eq_8 eax_32 = CreateFileA(0x004318C0, 0xA0000000, 0x02, null, 0x03, 0x20, 0x00);
	if (eax_32 == ~0x00)
	{
		GetCurrentProcessId();
		CloseHandle(eax_32);
		Eq_8 eax_86 = GetProcAddress(eax_32, eax_11);
		GetFileType(eax_86);
		GetCurrentThreadId();
		esp_100 = fp - 0x60;
		dwLoc1C = eax_86();
	}
	union Eq_8 * esp_51 = esp_100 - 0x04;
	*esp_51 = (union Eq_8 *) 0x00;
	*(esp_51 - 0x04) = 0x02;
	*(esp_51 - 0x08) = 0x03;
	*(esp_51 - 0x0C) = 0x00;
	*(esp_51 - 0x10) = 0x04;
	*(esp_51 - 0x14) = 0x80000000;
	*(esp_51 - 0x18) = 4397255;
	CreateFileA(*(esp_51 - 0x18), *(esp_51 - 0x14), *(esp_51 - 0x10), *(esp_51 - 0x0C), *(esp_51 - 0x08), *(esp_51 - 0x04), *esp_51);
	word32 esp_71;
	word32 ebp_72;
	byte SCZO_73;
	Eq_2 eax_74;
	byte Z_75;
	byte SZO_76;
	byte C_77;
	((dwLoc1C ^ 0xC0000005) + 0x0040114D)();
	return eax_74;
}

