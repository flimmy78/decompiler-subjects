// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040116C: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 * esp_12 = fp - 0x08;
	do
	{
		fs->ptr0000 = esp_12;
		null = (union Eq_7 *) ecx;
		esp_12 = esp_12 - 0x04;
		*esp_12 = 0x00;
		ebx = ebx + 0x01;
		ui8 al_32 = null ^ 0x00;
		ebp = ebp + 0x01;
		byte bh_30 = SLICE(ebx, byte, 8);
		byte bl_31 = (byte) ebx;
		int32 eax_33 = (word32) al_32;
		if (OVERFLOW(al_32))
			*(esp_12 - 0x04) = esp_12;
		ecx = ecx - 0x01;
	} while (al_32 != 0x00 && ecx != 0x00);
	byte bh_52 = bh_30 - al_32;
	ui32 ebx_53 = DPB(ebx, bh_52, 8);
	Eq_55 ebp_54 = ebp + ((char *) esp_12 + 1178533921)[eax_33];
	if (ebp_54 < 0x00)
	{
		Eq_2 eax_504 = DPB(eax_33, __inb(0xB8), 0);
		eax_504->a333D6692[eax_504].b0000 = eax_504->a333D6692[eax_504].b0000 - bl_31;
		edx[0x29B3C434] = (struct Eq_81) (edx[0x29B3C434] >> 0x5B);
		return eax_504;
	}
	else
	{
		byte al_94 = al_32 + 0x40 + (ebp_54 < 0x00);
		byte al_116 = al_94 + 116 + (DPB(eax_33, al_94, 0) < 0x6C1F0F8B);
		struct Eq_103 * esp_129 = *esp_12 + 0x04;
		int32 eax_117 = DPB(eax_33, al_116, 0);
		bool C_104 = cond(al_116);
		do
		{
			cu8 al_130 = al_116 + 0x70 + C_104;
			byte al_133 = al_130 - 0x3A - (al_130 < 0x00);
			edx = DPB(edx, ~0x18, 8);
			word32 v21_141 = Mem27[esp_129 + 2005810352 + edx:word32] + ebx_53;
			Mem142[esp_129 + 2005810352 + edx:word32] = v21_141;
			Eq_2 eax_134 = DPB(eax_117, al_133, 0);
			dx = DPB(dx, ~0x18, 8);
			if (v21_141 == 0x00)
			{
				byte v28_174 = esi->bE3ACC410 + bh_52;
				esi->bE3ACC410 = v28_174;
				Eq_2 esp_172 = esp_129 & ebx_53;
				if (!OVERFLOW(v28_174))
					;
				if (v28_174 == 0x00 && ecx != 0x01)
					return eax_134;
				else
				{
					do
					{
						Eq_2 eax_211 = __indw(0x60) + 0x04;
						ui8 al_213 = (byte) eax_211;
						__outb(~0x09, al_213);
						do
						{
							__outb(dx, al_213);
							esi = esi + 0x01;
							if (eax_211 >= esp_172)
								*(esp_172 - 0x02) = (struct Eq_201 **) cs;
							(struct Eq_207 **) 0x9C053CDE = (struct Eq_207 **) ss;
							esp_172 = (struct <anonymous> *) 0x9C053CDE;
							if (dl < esi->bCF1C1006)
								return eax_211;
							if (dl > esi->bCF1C1006)
							{
								*edi = (byte) __in(dx);
								Eq_2 esp_479 = &eax_211->t0000;
								*(esp_479 - 0x02) = (struct Eq_207 **) ss;
								edi = edi + 0x04;
								ds = *(esp_479 - 0x02);
								esp_172 = esp_479;
								eax_211 = (struct <anonymous> *) 3353287860;
							}
							uint32 eax_282 = (char *) eax_211 - 1480255772;
							int64 edx_eax_287 = (int64) eax_282;
							eax_211 = (word32) edx_eax_287;
							al_213 = (byte) edx_eax_287;
							dx = SLICE(edx_eax_287, word16, 32);
							dl = SLICE(edx_eax_287, byte, 32);
						} while (eax_282 > 0x00);
						Eq_135 v36_299 = eax_211->t0000 << ~0x04;
						eax_211->t0000 = v36_299;
						word32 * esi_296 = esi + 0x01;
						edi = edi + 0x01;
						Eq_276 C_302 = cond(v36_299);
						if (0x7A0E5AD1 == 0x00)
						{
							if (v36_299 >= 0x00)
							{
								if (true)
								{
									while (true)
									{
										word32 esi_411 = esi_296 + 0x04 + Mem300[0x7A0E5A9B:word32] + C_302;
										__outdw(dx, DPB(*esi_296, 0x59, 8));
										ui64 al_esi_416 = SEQ(al_213, (word32) esi_411 + 0x04);
										Eq_363 eax_418 = SLICE(al_esi_416 + 0xE400000004, word32, 32);
										*(eax_418 - 0x35) = *(eax_418 - 0x35) | dl;
										esi_296 = (word32) (al_esi_416 + 0xE400000004);
										al_213 = (byte) __indw(0x96);
										if (eax_418 >= 3111001223)
											break;
										(byte *) 2891634814 = (byte *) ((byte *) 2891634814 & dl);
										C_302.u0 = false;
									}
									word32 eax_437 = __indw(~0x46);
									(word32 *) 826298759 = eax_437;
									uint32 eax_442 = DPB(eax_437, (byte) eax_437 | 0x31, 0);
									if (eax_442 < 3592526215)
										return eax_442 - 3592526215;
									else
										__hlt();
								}
								esi->bAC7EA618 = 252;
								esp_172 = esp_172 + 0x04;
l00401328:
							}
							Eq_306 esp_320 = esp_172 - (struct <anonymous> *) 0x02;
							esp_320->t0000 = ds;
							word32 esp_322;
							word32 eax_323;
							struct Eq_314 * fs_324;
							byte SZO_325;
							byte C_326;
							word32 ecx_327;
							word32 ebp_328;
							word32 ebx_329;
							byte al_330;
							byte O_331;
							word32 esi_332;
							byte Z_333;
							byte bh_334;
							byte SCZO_335;
							byte SO_336;
							byte dh_337;
							word32 edx_338;
							word32 edi_339;
							struct Eq_330 * ds_340;
							byte bl_341;
							byte ah_342;
							word16 dx_343;
							byte dl_344;
							struct Eq_335 * ss_345;
							byte CZ_346;
							byte S_347;
							struct Eq_338 * cs_348;
							fn6EA78D63();
						}
						esi = (struct Eq_114 *) 0x7BA3CADB;
						eax_211 = (Eq_2) DPB(eax_211, 0x15, 0);
						if ((al_213 | 0x11) <= 0x11)
							goto l00401328;
					} while ((al_213 | 0x11) < 0x11);
					return eax_211;
				}
			}
			*edi = esi->b0000;
			ds = esp_129->ptr0000;
			__wait();
			int32 * esp_163 = esp_129 + 0x01;
			al_116 = al_133 & 0x84;
			eax_117 = DPB(eax_117, al_133 & 0x84, 0);
			C_104 = false;
			esi = esi + 0x01;
			edi = edi + 0x01;
			esp_129 = (struct Eq_103 *) (esp_163 + 0x01);
		} while (ecx == 0x00);
		*esp_163 = eax_117;
		byte al_170;
		__daa(al_133 & 0x84, &al_170);
	}
}

