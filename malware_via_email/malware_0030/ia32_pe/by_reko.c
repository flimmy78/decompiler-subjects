// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fn00401128(fn00401078(globals->a401128, (Eq_95 (*)[]) 0x062E), bl, bh, esi, edi);
	fn00401078(globals->a401128, (Eq_95 (*)[]) 0x062E);
	if (false)
	{
		*(fp - 0x18) = 0x00405000;
		*(fp - 0x1C) = 0x00401000;
		lstrcpyA(*(fp - 0x1C), *(fp - 0x18));
	}
	return 0x00;
}

// 00401078: Register byte fn00401078(Stack (ptr (arr Eq_95)) dwArg04, Stack (ptr (arr Eq_95)) dwArg08)
byte fn00401078(Eq_95 * dwArg04[], Eq_95 * dwArg08[])
{
	Eq_95 (* dwLoc08_26)[] = null;
	while (dwLoc08_26 < dwArg08)
	{
		if (dwLoc08_26 > (Eq_95 (*)[]) 0x01 && (dwLoc08_26 - 0x01 & 0x01) == 0x00)
		{
			word32 eax_112 = dwLoc08_26 + dwArg04;
			Mem119[dwArg04 + dwLoc08_26:byte] = (byte) (DPB(eax_112, *eax_112, 0) ^ 0x43);
		}
		if (dwLoc08_26 > (Eq_95 (*)[]) 0x01)
		{
			word32 eax_95 = dwLoc08_26 + dwArg04;
			Mem101[dwArg04 + dwLoc08_26:byte] = (byte) (DPB(eax_95, *eax_95, 0) + 121);
		}
		if (dwLoc08_26 > (Eq_95 (*)[]) 0x03)
		{
			Eq_95 (* edx_68)[] = dwLoc08_26 - (Eq_95 (*)[]) 0x03;
			if ((int32) (SEQ(edx_68 >> 0x1F, edx_68) % 0x03) == 0x00)
			{
				Eq_95 eax_84[] = dwLoc08_26 + dwArg04;
				Mem90[dwArg04 + dwLoc08_26:byte] = (byte) (DPB(eax_84, eax_84[0x00], 0) - (Eq_95 (*)[]) 0x04);
			}
		}
		word32 ecx_52 = dwArg04 + dwLoc08_26;
		Mem62[ecx_52 + 0x00:byte] = Mem0[dwLoc08_26 + dwArg04:byte] - (byte) dwLoc08_26;
		cl = (byte) ecx_52;
		dwLoc08_26 = dwLoc08_26 + 0x01;
	}
	return cl;
}

// 00401128: void fn00401128(Register byte cl, Register byte bl, Register byte bh, Register (ptr word32) esi, Register (ptr word32) edi)
void fn00401128(byte cl, byte bl, byte bh, word32 * esi, word32 * edi)
{
	if (CZ)
	{
		*edi = *esi;
		__inb(166);
	}
}

