// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Stack word32 dwArg04, Stack (ptr byte) dwArg08, Stack word32 dwArg0C, Stack (ptr word32) dwArg10, Stack word32 dwArg14, Stack (arr Eq_26) dwArg18)
void fn00401000(word32 dwArg04, byte * dwArg08, word32 dwArg0C, word32 * dwArg10, word32 dwArg14, Eq_26 dwArg18[])
{
	*dwArg10 = dwArg0C;
	word16 wLoc0C_21 = (word16) (uint32) ((uint64) (uint32) dwArg14 % 0x05);
	byte * dwArg04_26 = dwArg04 + dwArg14;
	while (true)
	{
		dwArg0C = dwArg0C - 0x01;
		if (dwArg0C == 0x00)
			break;
		*dwArg08 = (byte) ((int32) *dwArg04_26 ^ (word32) (&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&(dwArg18)[(int32) wLoc0C_21].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000)[0x00]);
		word16 cx_70 = wLoc0C_21 + 0x01;
		wLoc0C_21 = cx_70;
		if ((int32) cx_70 == 0x05)
			wLoc0C_21 = 0x00;
		dwArg08 = dwArg08 + 0x01;
		dwArg04_26 = dwArg04_26 + 0x01;
	}
}

// 004010F5: Register Eq_48 Win32CrtStartup()
Eq_48 Win32CrtStartup()
{
	ptr32 esp_16 = fp - 0x0200;
	<anonymous> ** eax_18 = select(0x00, null, null, null, null);
	if (eax_18 != (<anonymous> **) ~0x00)
	{
		word32 eax_277;
		word32 edx_278;
		word32 ebp_279;
		byte SCZO_280;
		byte Z_281;
		word32 ecx_282;
		byte SO_283;
		byte al_284;
		byte C_285;
		byte cl_286;
		byte SZO_287;
		(*eax_18)();
	}
	Eq_69 ecx_45 = globals->t403004;
	union Eq_48 * esp_48 = esp_16 - 0x04;
	*esp_48 = (union Eq_48 *) (fp - 0x018C);
	*(esp_48 - 0x04) = 0x04;
	*(esp_48 - 0x08) = fp - 424;
	*(esp_48 - 0x0C) = 0x04;
	*(esp_48 - 0x10) = fp - 0x01AC;
	*(esp_48 - 0x14) = fp - 0x01B0;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	int32 dwLoc01C8_77 = 0x00;
	while (dwLoc01C8_77 < 0x10)
	{
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x01C4)[dwLoc01C8_77].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (Eq_291) ((char *) ecx_45 + 4206842)[dwLoc01C8_77];
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x019C)[dwLoc01C8_77].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (Eq_300) ((char *) ecx_45 + 4206842 + dwLoc01C8_77)[0x0010];
		dwLoc01C8_77 = dwLoc01C8_77 + 0x01;
	}
	word32 edx_111 = globals->dw403000;
	*esp_48 = (union Eq_48 *) (fp - 0x018C);
	*(esp_48 - 0x04) = 0x00;
	*(esp_48 - 0x08) = fp - 464;
	*(esp_48 - 0x0C) = 0x04;
	*(esp_48 - 0x10) = fp - 0x01D4;
	*(esp_48 - 0x14) = fp - 0x01D4;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	Eq_69 edx_131 = globals->t403004;
	*esp_48 = (union Eq_48 *) (fp - 0x018C);
	*(esp_48 - 0x04) = 0x04;
	*(esp_48 - 0x08) = fp - 464;
	*(esp_48 - 0x0C) = 0x04;
	*(esp_48 - 0x10) = fp - 0x01AC;
	*(esp_48 - 0x14) = fp - 0x01B0;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	*esp_48 = 0x40;
	*(esp_48 - 0x04) = 0x3000;
	*(esp_48 - 0x08) = (LPVOID *) edx_131;
	*(esp_48 - 0x0C) = 0x00;
	Eq_247 eax_161 = VirtualAlloc(*(esp_48 - 0x0C), *(esp_48 - 0x08), *(esp_48 - 0x04), *esp_48);
	*(esp_48 - 0x10) = 0x00;
	GetModuleHandleW(*(esp_48 - 0x10));
	Eq_69 dwLoc01EC_172 = null;
	while (dwLoc01EC_172 < edx_131)
	{
		Mem186[eax_161 + dwLoc01EC_172:byte] = Mem164[dwLoc01EC_172 + 0x00403008:byte];
		dwLoc01EC_172 = dwLoc01EC_172 + 0x01;
	}
	*(esp_48 - 0x14) = fp - 0x018C;
	*(esp_48 - 0x18) = 0x08;
	*(esp_48 - 0x1C) = fp - 0x01D8;
	*(esp_48 - 0x20) = (LPVOID *) edx_131;
	*(esp_48 - 0x24) = (LPVOID *) eax_161;
	*(esp_48 - 0x28) = (LPVOID *) (eax_161 - (void *) 0x08);
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	*(esp_48 - 0x14) = fp;
	*(esp_48 - 0x18) = fp - 0x018C;
	*(esp_48 - 0x1C) = (LPVOID *) edx_131;
	*(esp_48 - 0x20) = edx_111;
	*(esp_48 - 0x24) = (LPVOID *) eax_161;
	*(esp_48 - 0x28) = (char *) edx_131 + 0x00403008;
	word32 esp_237;
	word32 eax_238;
	word32 edx_239;
	word32 ebp_240;
	byte SCZO_241;
	byte Z_242;
	word32 ecx_243;
	byte SO_244;
	byte al_245;
	byte C_246;
	byte cl_247;
	byte SZO_248;
	(eax_161 + 0x1010)();
	return 0x00;
}

