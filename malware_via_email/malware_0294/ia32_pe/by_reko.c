// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00403A23: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_36;
	word32 ebp_37;
	word32 eax_38;
	struct Eq_12 * fs_39;
	byte SCZO_40;
	word32 ebx_41;
	word32 esi_42;
	word32 edi_43;
	byte SZO_44;
	byte C_45;
	word32 ecx_46;
	byte Z_47;
	byte al_48;
	byte bl_49;
	byte CZ_50;
	_set_app_type();
	globals->dw403D58 = globals->dw403D58 | ~0x00;
	globals->dw403D5C = globals->dw403D5C | ~0x00;
	word32 esp_60;
	word32 ebp_61;
	word32 * eax_62;
	struct Eq_39 * fs_63;
	byte SCZO_64;
	word32 ebx_65;
	word32 esi_66;
	word32 edi_67;
	byte SZO_68;
	byte C_69;
	word32 ecx_70;
	byte Z_71;
	byte al_72;
	byte bl_73;
	byte CZ_74;
	_p__fmode();
	word32 ecx_75 = globals->dw403C34;
	*eax_62 = ecx_75;
	word32 ebp_78;
	word32 * eax_79;
	struct Eq_61 * fs_80;
	byte SCZO_81;
	word32 ebx_82;
	word32 esi_83;
	word32 edi_84;
	byte SZO_85;
	byte C_86;
	word32 ecx_87;
	byte Z_88;
	byte al_89;
	byte bl_90;
	byte CZ_91;
	ptr32 esp_279;
	_p__commode();
	word32 ecx_92 = globals->dw403C30;
	*eax_79 = ecx_92;
	word32 eax_95 = *adjust_fdiv;
	globals->dw403D54 = eax_95;
	fn00403BB5();
	if (globals->dw401230 == 0x00)
	{
		*(esp_279 - 0x04) = 0x00403BB2;
		word32 esp_263;
		word32 ebp_264;
		word32 eax_265;
		struct Eq_231 * fs_266;
		byte SCZO_267;
		word32 ebx_268;
		word32 esi_269;
		word32 edi_270;
		byte SZO_271;
		byte C_272;
		word32 ecx_273;
		byte Z_274;
		byte al_275;
		byte bl_276;
		byte CZ_277;
		_setusermatherr();
		esp_279 = esp_263 + 0x04;
	}
	fn00403BA0();
	word32 * esp_100 = esp_279 - 0x04;
	*esp_100 = 0x00401218;
	*(esp_100 - 0x04) = 0x00401214;
	ptr32 esp_104;
	word32 ebp_105;
	word32 eax_106;
	struct Eq_116 * fs_107;
	byte SCZO_108;
	word32 ebx_109;
	word32 esi_110;
	word32 edi_111;
	byte SZO_112;
	byte C_113;
	word32 ecx_114;
	byte Z_115;
	byte al_116;
	byte bl_117;
	byte CZ_118;
	initterm();
	*(esp_104 - 0x04) = fp - 0x70;
	*(esp_104 - 0x08) = globals->dw403C28;
	*(esp_104 - 0x0C) = fp - 0x68;
	*(esp_104 - 0x10) = fp - 116;
	*(esp_104 - 0x14) = fp - 100;
	ptr32 esp_136;
	word32 ebp_137;
	word32 eax_138;
	struct Eq_168 * fs_139;
	byte SCZO_140;
	word32 ebx_141;
	word32 esi_142;
	word32 edi_143;
	byte SZO_144;
	byte C_145;
	word32 ecx_146;
	byte Z_147;
	byte al_148;
	byte bl_149;
	byte CZ_150;
	_getmainargs();
	*(esp_136 - 0x04) = 0x00401210;
	*(esp_136 - 0x08) = 0x00401204;
	struct Eq_194 * esp_155;
	word32 ebp_156;
	word32 eax_157;
	struct Eq_197 * fs_158;
	byte SCZO_159;
	word32 ebx_160;
	word32 esi_161;
	word32 edi_162;
	byte SZO_163;
	byte C_164;
	word32 ecx_165;
	byte Z_166;
	byte al_167;
	cu8 bl_168;
	byte CZ_169;
	initterm();
	Eq_211 esi_172 = *acmdln;
	if (esi_172->unused == 0x22)
	{
		do
		{
			esi_172 = (Eq_211) (esi_172 + 0x01);
			cu8 al_240 = esi_172->unused;
		} while (al_240 != bl_168 && al_240 != 0x22);
		if (esi_172->unused == 0x22)
		{
l00403B12:
			esi_172 = (Eq_211) (esi_172 + 0x01);
		}
	}
	else
	{
		while (esi_172->unused > 0x20)
			esi_172 = (Eq_211) (esi_172 + 0x01);
	}
	cu8 al_181 = esi_172->unused;
	if (al_181 == bl_168 || al_181 > 0x20)
	{
		word32 eax_196;
		esp_155->t0020 = fp - 0x60;
		GetStartupInfoA(esp_155->t0020);
		if (0x00 != 0x00)
			eax_196 = (word32) wLoc30;
		else
		{
			esp_155->dw001C = 0x0A;
			eax_196 = esp_155->dw001C;
		}
		esp_155->dw001C = eax_196;
		esp_155->t0018 = esi_172;
		esp_155->dw0014 = 0x00;
		esp_155->t0010 = null;
		Eq_211 eax_206 = GetModuleHandleA(esp_155->t0010);
		esp_155->t000C = eax_206;
		fn00403BBC(dwArg00, dwArg04, dwArg08, dwArg0C);
		esp_155->t0018 = eax_206;
		exit(esp_155->t0018);
	}
	goto l00403B12;
}

// 00403BA0: void fn00403BA0()
void fn00403BA0()
{
	word32 esp_6;
	word32 ecx_7;
	controlfp();
}

// 00403BB5: void fn00403BB5()
void fn00403BB5()
{
}

// 00403BBC: void fn00403BBC(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10)
void fn00403BBC(word32 dwArg04, word32 dwArg08, word32 dwArg0C, word32 dwArg10)
{
	word32 esp_18;
	MFC42.DLL!Ordinal_1576();
}

